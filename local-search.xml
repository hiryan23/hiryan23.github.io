<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>2025.02.15 关于理想（二）</title>
    <link href="/2025/02/15/%E5%85%B3%E4%BA%8E%E7%90%86%E6%83%B3%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <url>/2025/02/15/%E5%85%B3%E4%BA%8E%E7%90%86%E6%83%B3%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>其实想说的还谈不上理想，但是为了不让《关于理想（一）》太孤单，还是起了这样的名字。</p><span id="more"></span><p>今天结束寒假回归宿舍。好像每次都是学期初喜欢写博客，然后逐渐废弃，已见怪不怪。在路上，突然想到一个点：现在还能不能找到一个国家或者地区，类似于改革开放初期的中国，千禧年附近的上海或者深圳。如果可以的话，那么毕业后选择过去发展，结果会如何。</p><p>出发的根本逻辑是“在风口上，猪都能飞起来”。能想到这个点，有一个原因是父亲前几天闲聊时说今年是他来到上海的第三十年了。我看着他滔滔不绝地说着三十年前的三月份的某一天（具体哪天我忘了），他来到上海的情景，听得津津有味。其实我也有过这样的一种想法，如《平凡的世界》中所说，自己去到某个地方，面对人生地不熟和一切未知的挑战，从头开始奋斗，孤身一人或者和伴侣一起，想必是非常痛快。</p><p>自然地，那么去哪呢？我又想到前几天在油管上看了一部关于“走线”的纪录片，讲的是一些各种各样的中国人通过“走线”非法移民至美国的故事。片子自然是拍的污名化，但是对各个角色还是触动很深，他们各自有各自的考虑，也有各自的生活和命运。对我而言，我肯定不会走线去美国，问题就是现在去美国还合适吗？我想了想，莫名感觉不大行。因为我总感觉这些国家已经得到了较大的发展，机遇不能说没有，但是我朴素地认为相对较少，相对较难，相对较小。</p><p>又一个自然地，就想到应当去那些正在飞速发展初期，或者即将开始飞速发展的国家和地区。这就像改革开放初期的中国，或者什么时期的发达国家，whatever。你去投资，去创业，去买房，去扎根，在几十年后，自发被动地能够获得较多的回报，实现比较好的状态。这是好的。问题是怎么确定哪些国家和地区在飞速发展初期，或者即将开始飞速发展呢？得了解政策，理解时代。这就要求我开始关注全球的政策，必须得开始胸怀天下。而且还得开始关注历史，总结历史的经验。历史真的是无穷的宝库。</p><p>政策是关键因素吗，肯定是，但是也肯定不唯一，这都是套路。具体要看什么，还得具体看。父亲提了一个印度，从数据上看，我之前似乎也听说过印度经济发展增速很快，或许印度确实是值得考虑的一点。但是对印度的偏见还是存在：卫生问题，人口问题，种姓制度问题。我说了非洲，这倒是和我高中时想去非洲的想法对上了，但是非洲是不是正在处于发展起飞阶段，还是只是在跑道上滑行，这个我更倾向于后者。而且非洲也有偏见：安全问题，气候问题。父亲又提了一个台湾，他的观点是台湾在未来将被收复，收复后可能会出现较大政策扶持。台湾我不了解，但我想不出什么坏处，我很想去台湾旅游看看，其实我哪都想去旅游看看。我否定了一些欧美发达国家，因为我觉得这个机遇应该出现在发展中国家，提了一个巴基斯坦，仅因为新闻中经常看到，和中国关系不错，有可能在未来会迅速发展。父亲最后说西部地区在未来也会发展，但我认为在国内还是不好说，太卷了，但西部地区会不会没那么卷呢？</p><p>这些思考还是基于我的不了解。不了解的评论就是瞎猜。所以当务之急是开始了解下，开始行动很重要。</p><p>也没啥好写的，就这样吧。</p>]]></content>
    
    
    <categories>
      
      <category>日记、杂感与自我批判</category>
      
    </categories>
    
    
    <tags>
      
      <tag>碎碎念</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2024.11.17 关于理想（一）</title>
    <link href="/2024/11/17/%E5%85%B3%E4%BA%8E%E7%90%86%E6%83%B3%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <url>/2024/11/17/%E5%85%B3%E4%BA%8E%E7%90%86%E6%83%B3%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<p>评价一类理想。 <span id="more"></span></p><p>又有好久没写日记了，最近在沉迷三角洲行动，虽然作业和课程压力很大。</p><p>我知道关于理想我的思考肯定不会局限于这一篇，所以我在标题中加了序号。</p><p>很多人说自己的理想，或者人生目标，或者最大的愿望，是挣很多的钱。设想这样一个情境：你拥有足够多的钱，但是生活在一个没有人的世界里，所有的工作与服务都由机器人提供，不会对你的生活质量产生任何影响。在这样的世界里，你能够得到身体上的满足，但是我断言你不会感到满意，因为你没法从其他人那里得到尊敬和认可——这个世界上除了你没有其他人。</p><p>同样，有些人的理想就是为了拿到某个奖项，得到某项荣誉。但是，如果完全没有人和你竞争，你自然就是最厉害的，但你也无法满意；如果你自己自封为王，没有人知晓或认可，你同样也无法满意。</p><p>所以我说，这些人，或者说有一种人吧，他们的理想其实是关于获得他人的尽可能多正认可。这句话值得细细分析。首先，为什么说是认可，因为当你得到他人的喜爱的时候你会感到满意，得到他人的羡慕，甚至是嫉妒恨的时候，你也会感到满意，理想就是一个你追求的让你满意的东西，因为在实现理想后你彻底地满意，随之能动性就会死亡，遑论生命了。喜爱、羡慕、嫉妒，还有其它类似的词，其本质我认为是认可。先认为你确实做到了某件事，抑或认为你确实拥有某个物，然后才有对你的尊重、喜爱、羡慕、嫉妒，才能进一步让你满意。否则，如果我根本没听说过你，或者我不认可你的成就，那么你就不会从我这得到满意。其次，他人有认可，肯定也有不认可。没有什么东西是绝对能受所有人认可的，即使是上帝也不例外。所以，这种人追求的应该是尽可能正的认可。那么这个正，应该如何衡量？我认为就是体现出正认可的人数与体现出负认可的人数之差。可能有些人十分认可你，也有些人勉强认可你，也有些人认为你完全不配，这些都体现出对你的认可，所以我认为这些人与人之间的正负认可是平等的。所谓十分认可和勉强认可，只是个体内正认可与负认可含量的大小。需要注意的是，负认可也是认可，并非不认可。</p><p>这就解释了这种理想带来的竞争关系：我想挣比你更多的钱，不是为了钱或者财富本身，而是为了得到更多的正认可。我想拿到世界冠军，或者获得什么奖项荣誉，也是为了得到更多正认可。但是得到正认可的途径不只有这些路。最简单的得到认可的方法就是帮助他人了。在帮助他人的过程中，自动实现了认可的存在性，因为如果他人都不认可你的帮助，那就没有帮助一说了。从这个角度看，大部分人的理想都统一了，只是路径不同罢了。而且从这个角度，好像利他是比利己更有利于实现理想的方式。</p><p>（为了实现提升文笔——至少不倒退——的作用，在正文中应该尽量减少口语化和自言自语的内容……尽量</p>]]></content>
    
    
    <categories>
      
      <category>日记、杂感与自我批判</category>
      
    </categories>
    
    
    <tags>
      
      <tag>碎碎念</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>量化交易初探</title>
    <link href="/2024/11/03/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93%E5%88%9D%E6%8E%A2/"/>
    <url>/2024/11/03/%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93%E5%88%9D%E6%8E%A2/</url>
    
    <content type="html"><![CDATA[<p>本文为讲座笔记，分享者为MS。干货满满。 <span id="more"></span></p><h2 id="股票量化交易">股票量化交易</h2><h3 id="什么是量化交易">什么是量化交易</h3><ul><li>通过分析<strong>历史</strong>数据，寻找规律</li><li>依赖于统计模型和计算机、AI</li><li>程序自动决策，自动下单交易</li><li>大量交易、利用大数定律盈利</li></ul><h3 id="量化历史">量化历史</h3><ul><li>萌芽与起步（1960s）<ul><li>Edward O. Thorp</li><li>Stephen Ross</li></ul></li><li>成长与繁荣（1980s）<ul><li>一些老牌美国量化公司</li></ul></li><li>逐渐成熟（21世纪）<ul><li>AUM占对冲基金行业三分之一</li><li>占美股市值9%</li><li>算法交易成交额占比75%</li></ul></li></ul><p>国内量化发展 - 量化1.0（2010—2015） - 市场风格明显 - 股指期货对冲 -量化2.0（2016—2019） - 高频涌现 - 量价为主，复杂模型登场 - 量化四大金刚- 量化3.0（2020—2023） - 策略体系逐渐成熟 - 行业竞争升温 -23年达到万亿，24年下降</p><h3 id="量化-vs-主观">量化 vs 主观</h3><ul><li><p>计算机决策 vs 投资经理</p></li><li><p>历史数据挖掘统计规律 vs 逻辑推理</p></li><li><p>交易频率、广度高 vs 交易慢、数量少</p></li><li><p>持仓时间短 vs 长</p></li><li><p>每笔交易胜率低（50.5%~53%） vs 优秀投资经理胜率高</p></li><li><p>客观性 vs 易受情绪干扰</p></li><li><p>对数据依赖较高（统计显著性） vs 低</p></li><li><p>严重依赖历史，无法快速应对根本性的变化 vs灵活性高，对突发事件、黑天鹅事件进行演绎推理</p></li><li><p>收益相对稳定、风险较小 vs 收益波动较大、风险较高</p></li><li><p>回报上限低 vs 回报上限高</p></li><li><p>投资经理压力较小 vs 投资经理压力较大</p></li></ul><h3 id="量化策略分类">量化策略分类</h3><h4 id="按频率">按频率</h4><ul><li>低频（持仓&gt;5d）<ul><li>基本面量化策略、选股策略</li><li>2 sigma，Citadel LLC，Millennium</li></ul></li><li>中低频（持仓1~5d）<ul><li>绝大多数股票量化产品，期货CTA</li><li>中小私募</li></ul></li><li>中频（持仓hours~1d）<ul><li>股票T0策略，中频CTA</li></ul></li><li>中高频（持仓&lt;1h）<ul><li>股票T0</li></ul></li><li>高频（延迟~1ms）<ul><li>自营为主</li><li>Jane Street、Tower Research</li></ul></li><li>超高频（延迟&lt;1微秒）<ul><li>做市商或自营</li><li>HRT、Jump Trading、Citadel Securities</li></ul></li></ul><p>低频 vs 高频 - 样本点少 vs 多 - 使用各类量价和另类数据 vs（基本）只使用高频量价数据 - 更依赖于预测模型 vs 更依赖于 IT infra -收益低、不稳定 vs 收益高、稳定 - 容量大 vs 容量小 - 适用于资管资金 vs适用于自营资金 - 监管风险小 vs 监管风险大</p><h3 id="股票量化产品分类">股票量化产品分类</h3><ul><li>指数增强<ul><li>选一个基准线，目的是超过基准线的超额收益</li><li>目的是优化超额收益</li></ul></li><li>市场中性<ul><li>对标指数，拿出一些资金做空对应股指期货</li></ul></li><li>股票多头<ul><li>没有基准，啥都买</li></ul></li><li>股票T0、混合策略、事件驱动etc</li><li>海外：<ul><li>130/30、绝对收益、纯中性产品</li></ul></li></ul><h2 id="多因子模型">多因子模型</h2><h4 id="框架">框架</h4><p>data -&gt; alphas -&gt; combine -&gt; optimizer -&gt; execution</p><p>alpha 是对市场有预测能力的向量、因子</p><p><span class="math inline">\(R^{n\timesm}\)</span>：n为股票数目，m为alpha个数 <span class="math inline">\(R^n\)</span>：把m合并成一个向量 <span class="math inline">\(\pmbZ^n\)</span>：优化器把连续的向量变成离散的向量（为了交易）</p><p>execution：作用，帮忙拆单，防止影响市场</p><h4 id="data">data</h4><ul><li>price</li><li>volume</li><li>fundamentals</li><li>news</li><li>...</li></ul><h4 id="alphas">alphas</h4><p>alpha分两类：公式化 vs 机器学习，为了能预测未来的回报率（研究员）##### 公式化alpha因子 101 Formulaic Alphas，Zura Kakushadze</p><ul><li>又叫线性因子、手写因子</li><li>直观，可解释性强</li><li>过拟合少</li><li>容易去相关</li><li>预测能力差</li><li>人力密集型</li></ul><h5 id="机器学习因子">机器学习因子</h5><p>ML因子、非线性因子（针对特征而言） 通过机器学习模型预测回报率 -线性模型 - 神经网络 - 树模型 - 统计模型</p><ul><li>分类<ul><li>原始输入：模型输入为原始数据（端到端），如开高低收</li><li>特征输入：模型输入为特征，如MA、std等</li><li>金融数据信噪比非常低，所以端到端输入真的有效吗？会过拟合到噪音<ul><li>vs 常见AI场景：信噪比高</li></ul></li></ul></li><li>容易过拟合</li><li>不直观、难以理解</li><li>预测能力更强</li><li>智力密集型</li></ul><h5 id="另类因子">另类因子</h5><ul><li>另类数据</li><li>另类构造<ul><li>事件型稀疏因子</li><li>signal shaping</li></ul></li></ul><h5 id="预测能力">预测能力</h5><ul><li>alpha和回报率r的相关性？<ul><li>corr：1%~5%</li></ul></li><li>长周期回报率 vs 短周期回报率，哪个容易预测？<ul><li>小于5天，越短周期越好预测</li><li>大于5天，越长周期越好预测</li></ul></li><li>小股票 vs 大股票，哪个容易预测？<ul><li>小股票容易预测（市值小、流动性差）<ul><li>收益有限，竞争小</li></ul></li></ul></li><li>A股 vs 美股，哪个容易预测？<ul><li>A股<ul><li>国外投资者入资有限</li><li>散户多，结构性机会</li></ul></li></ul></li><li>A股上涨 vs 下跌，哪个容易预测？<ul><li>下跌<ul><li>因为无法做空</li></ul></li></ul></li></ul><h4 id="combine">combine</h4><p>因子组合（基金经理） - 把多个因子（预测）组合成一个聚合因子 -idea聚合 - 理想情况下idea不相关 - 聚合因子 - 预测能力更强，更稳定 -线性、非线性</p><h4 id="optimizer">optimizer</h4><p>最重要！</p><h5 id="优化器基础">优化器基础</h5><ul><li>Markovitz</li><li>假设<ul><li>风险定义为方差</li><li>投资人风险厌恶</li><li>希望最大化效用期望</li></ul></li><li>均值—方差优化<ul><li><span class="math inline">\(\max_{w}\Sigma_i w_i E[R_i]-\lambdaw^T\Sigma w\)</span></li><li><span class="math inline">\(\lambda\)</span>风险厌恶系数</li></ul></li></ul><h5 id="实际的优化器">实际的优化器</h5><p>Risk Model: <span class="math inline">\(\Sigma=F^T\Sigma_FF+\Sigma_\epsilon\)</span></p><p>optimize <span class="math display">\[\max_{\Delta p} \alpha^T\Deltap-\lambda\cfrac{1}{2}(p_0+\Delta p)^T\Sigma(p_0+\Delta p)-\mu TC(\Deltap)\]</span> - p是仓位，Δp是仓位变化 - alpha是收益率，<span class="math inline">\(\alpha^T\Delta p\)</span>是预期收益 -中间的二次型：收益的方差 - TC是Market impact model -印花税、交易佣金等，是Δp的线性函数 - 冲击成本（marketimpact）Δp的1.5次或2次函数</p><p>s.t. - position limit - trading volume constraints - factorexposure</p><h6 id="协方差矩阵sigma">协方差矩阵<span class="math inline">\(\Sigma\)</span></h6><ul><li>对角线：股票回报率的方差</li><li>其他位置：两个股票回报率之间的协方差</li><li>如何估计（也有数据商提供，比如barra）<ul><li>直接估计，用回报率的向量，历史数据爆算<ul><li>矩阵过大，4000*4000</li><li>样本点过少，一年就252样本，估出来矩阵奇异</li></ul></li><li>鲁棒统计量<ul><li>取前10个主成分，对角线单独估计。需要估计的参数少，可能就4000</li><li>无法利用公司基本面信息</li></ul></li><li>因子模型（barra）<ul><li>考虑市场、行业、风格因子和股票的特异性</li><li>回报率分解</li></ul></li></ul></li></ul><h6 id="风格因子">风格因子</h6><ul><li>Style factor / risk factor</li><li>具有经济、金融含义，反应股票、公司的性质，对于回报率和风险具有解释意义的数值<ul><li>广泛知道的</li><li>强调风险而不是盈利</li><li>具有实际的含义</li></ul></li><li>例子：<ul><li>市值因子Size</li><li>价值因子Value</li><li>动量因子Momentum</li><li>其他：成长因子Growth、盈利因子Earnings Yield</li></ul></li></ul><h6 id="因子模型">因子模型</h6><ul><li>回报率分解<ul><li>回报率受：市场、行业、风格</li><li>return = market_beta *market_return + industry_beta *industry_return + style_factor_loading * style_factor_return +idiosyncratic_return</li><li>beta就是capm的beta，但是loading是查表，风格return是根据loading算出来的</li><li>最后的特异性（alpha_i）是最特殊的</li></ul></li><li>矩阵形式</li><li>所以，回报率的协方差矩阵也可以进行分解</li></ul><p><span class="math inline">\(R=LR^{fac}+\alpha\)</span> <span class="math inline">\(\Sigma=Cov(r)=L^T HL+D\)</span></p><p>人为对协方差矩阵降维</p><h6 id="交易成本">交易成本</h6><p>固定成本 - Δp的线性函数 - 印花税 - 证管费、经手费</p><p>市场冲击 - 交易使价格向不利的方向变动 - 原因？ - 微观：吃掉对手单 -宏观：供需改变</p><p>如何估计market impact？ - 假设：Market impact is reverting - 市场有效- 一次交易行为，本质没有真实改变公司的基本面 -推高价格后，会触发隐藏的流动性（需求） - 多次交易 -像脉冲一样，价格被抬高后，会慢慢回去 - RMI、decay kernel，可以算出MI -只能估计，通过理论模型，因为根本无法观测</p><h5 id="优化器求解">优化器求解</h5><ul><li>二次、整数、凸优化</li><li>有专门的求解器<ul><li>Mosek（美国）</li><li>Gurobi（欧洲）</li><li>Cplex（IBM）</li><li>COPT（SJTU）</li></ul></li><li>为什么有约束条件？<ul><li>因为模型假设肯定是不完备的，有些风险不能被刻画</li><li>比如风险用二次项，但是还有一些风险不能用二次项</li><li>用约束条件刻画非二次，无法刻画，尾部的，非正态的风险</li></ul></li></ul><h6 id="优化器回顾">优化器回顾</h6><p>优化器做了什么？ - 平衡三者 - 收益（return） - 风险（risk） -成本（cost） - 风险项<span class="math inline">\(\lambda\)</span> -控制收益维度 - 例如：赌小盘股、半导体 - 成本项<span class="math inline">\(\mu\)</span> - 控制收益的实现（速度） -交易太快：滑点MI太大 - 交易太慢：return decay -风险项和成本项不是给定的，是实证、回测或者估出来的</p><h4 id="executor">executor</h4><p>算出来Δp后，用execution拆单 - TWAP 按照时间平均拆单 - VWAP按照交易量平均拆单 - IS(implementation shortfall)优化相比下单时的价格</p><h4 id="多因子模型回顾">多因子模型回顾</h4><p>什么是多因子？ 两个含义： - alpha，聚合因子 -风险里的因子（barra）</p><h5 id="多因子模型优点">多因子模型优点</h5><ul><li>策略层面<ul><li>系统化</li><li>普适性</li><li>稳定易风控</li><li>聚合大量预测模型</li><li>（所以）适合管理大规模资金</li></ul></li><li>商业层面<ul><li>规模效应，对于大公司友好</li><li>易拆分、隔离小团队做多因子模型的不同环节</li></ul></li></ul><h5 id="多因子模型缺点">多因子模型缺点</h5><ul><li>策略层面<ul><li>灵活性差：必须通过优化器调仓</li><li>无法为特殊策略定制参数<ul><li>MI model、risk model</li><li>泛用性强，对策性差</li></ul></li><li>不易处理多周期预测<ul><li>多步骤多因子模型？（事实上效果差）</li></ul></li><li>收益率有限</li></ul></li><li>商业层面<ul><li>规模效应，对于小公司不友好<ul><li>小公司成长过程中会被模型拖累</li></ul></li><li>易拆分、隔离，强制隔离，不准跨环节操作</li></ul></li></ul><h4 id="alternatives">Alternatives</h4><ul><li>股票量化策略能不能不用多因子模型？<ul><li>本质问题：要不要用优化器</li></ul></li><li>其它的股票策略<ul><li>头部选股<ul><li>就选alpha值最高的股票，不需要优化器</li><li>逐渐被慢慢淘汰了，因为被优化器薄纱</li></ul></li><li>事件驱动</li><li>特殊交易<ul><li>例：打板</li></ul></li></ul></li><li>要考虑你的策略和多因子比有什么优势，多因子做不到的<ul><li>MI model、risk model失效</li></ul></li></ul><h2 id="量化职业发展">量化职业发展</h2><h3 id="低频-vs-高频">低频 vs 高频</h3><ul><li>IT技术实力<ul><li>C/C++底层代码优化</li><li>计算机网络、延迟技术</li></ul></li><li>金融知识<ul><li>微观层面：订单簿、交易规则、券商/交易所的行业信息（高频）</li><li>宏观层面：基本面、公司事件（低频）</li></ul></li></ul><h3 id="市场品种选择">市场/品种选择</h3><ul><li>市场规模<ul><li>看量化头部公司、腰部公司年利润</li></ul></li><li>竞争程度（和猎头交流）<ul><li>人才密集度（人员工资、招聘难度）<ul><li>比如期货高频，很完备，很卷</li></ul></li><li>小团队 vs 大团队作战<ul><li>美国股票资管：没有超大型玩家策略，基金经理选择加入平台型公司，行业发展程度高，垄断化寡头化</li><li>中国，选择自己出来开公司拿牌照</li></ul></li></ul></li><li>可持续性<ul><li>竞争层面<ul><li>体量小？</li><li>大玩家不进来？</li><li>时间早？</li><li>crypto</li></ul></li><li>监管层面<ul><li>政府监管</li></ul></li></ul></li></ul><h3 id="策略环节">策略环节</h3><ul><li>公式化因子<ul><li>“灵性”</li><li>基本面、财务知识</li></ul></li><li>机器学习<ul><li>编程能力</li><li>研究能力</li></ul></li><li>优化器<ul><li>框架知识</li><li>统计、优化、编程</li></ul></li></ul><h3 id="团队选择">团队选择</h3><p>大团队 vs 小团队 - 管理模式不一样 - 大团队：部门化 -小团队：研究员+基金经理模式</p><p>大团队 - 方法论和框架完整有效 - 部分有培养体系 -生存压力、业绩压力较小，年薪百万 -流水线细化、知识面狭窄、容易成为螺丝钉 - 晋升困难</p><p>小团队 - 方法论和框架有待验证 - 有较大生存压力、业绩压力 -全面接触各个流程、知识面广 - 取决于老板、领导的水平 - 有晋升空间</p><h3 id="学习建议">学习建议</h3><p>向老板学习</p>]]></content>
    
    
    <categories>
      
      <category>金融学</category>
      
    </categories>
    
    
    <tags>
      
      <tag>量化金融</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>管理科学</title>
    <link href="/2024/10/12/%E7%AE%A1%E7%90%86%E7%A7%91%E5%AD%A6/"/>
    <url>/2024/10/12/%E7%AE%A1%E7%90%86%E7%A7%91%E5%AD%A6/</url>
    
    <content type="html"><![CDATA[<blockquote><p><em>本笔记整理自安泰经济与管理学院2024年秋季学期课程BUSS2402-03金融工程学，授课人是孙海龙老师。</em></p></blockquote><span id="more"></span><h2 id="线性规划linear-programming">线性规划（Linear Programming）</h2><h3 id="一般形式">一般形式</h3><p><span class="math display">\[\begin{align}\max(\min)\ \ \ \  &amp;Z=c_1x_1+c_2x_2+\cdots+c_nx_n\\s.t.\ \ \ \ &amp;a_{11}x_1+a_{12}x_2+\cdots+a_{1n}x_n&amp;\leq(=,\geq)\b_1\\&amp;a_{21}x_1+a_{22}x_2+\cdots+a_{2n}x_n&amp;\leq(=,\geq)\ b_2\\&amp;a_{31}x_1+a_{32}x_2+\cdots+a_{3n}x_n&amp;\leq(=,\geq)\ b_3\\\vdots\\&amp;a_{m1}x_1+a_{m2}x_2+\cdots+a_{mn}x_n&amp;\leq(=,\geq)\ b_m\\&amp;x_1,x_2,\cdots,x_n&amp;\leq(=,\geq)\ 0\end{align}\]</span> - <span class="math inline">\(x_j,\forallj=1,\cdots, n\)</span>是决策变量 - <span class="math inline">\(a_{ij},b_i,c_j,\foralli=1,\cdots,m,j=1,\cdots,n\)</span>是参数</p><h3 id="矩阵形式">矩阵形式</h3><p><span class="math display">\[\begin{align}\max_{\pmb x}\ \ \ \  &amp;\pmb c^T\pmb x\\s.t.\ \ \ \ &amp;\pmb A\pmb x&amp;\le(=,\ge)\ \pmb b\\&amp;\pmb x&amp;\le(=,\ge)\ \pmb 0\end{align}\]</span></p><ul><li>Objective Vector: <span class="math inline">\(\pmbc=\begin{bmatrix}c_1\\c_2\\\vdots\\c_n\end{bmatrix}\)</span></li><li>Constraint Matrix: <span class="math inline">\(\pmbA=\begin{bmatrix} a_{11} &amp;a_{12} &amp;\cdots &amp;a_{1n}\\a_{21}&amp;a_{22} &amp;\cdots &amp;a_{2n}\\\vdots &amp;\vdots &amp;\ddots&amp;\vdots\\ a_{m1} &amp;a_{m2} &amp;\cdots&amp;a_{mn}\\\end{bmatrix}\)</span></li><li>Decision Variables Vector: <span class="math inline">\(\pmbx=\begin{bmatrix}x_1\\x_2\\\vdots\\x_n\end{bmatrix}\)</span></li><li>Right-Hand Side Vector: <span class="math inline">\(\pmbb=\begin{bmatrix}b_1\\b_2\\\vdots\\b_m\end{bmatrix}\)</span></li></ul><h3 id="基本概念">基本概念</h3><ul><li>线性：模型中的所有函数都是线性的<ul><li>目标函数线性</li><li>约束条件线性</li></ul></li><li>规划：计划、部署某项活动，例如生产、物流、运输、排班等。</li><li>线性规划（Linear Programming，LP）是一类数学优化模型<ul><li>目标是最大化（最小化）一个线性函数</li><li>决策受限于一系列（有限个）线性（等式或不等式）约束条件</li></ul></li></ul><h3 id="假设分析">假设分析</h3><p>主要是看模型的某些参数变化后，对目标函数的影响</p><ul><li>目标函数系数变动<ul><li>只有一个系数变动</li><li>多个（两个）系数同时变动</li></ul></li><li>约束条件系数变动<ul><li>单个约束条件单一系数变动</li><li>约束条件同时变动</li></ul></li></ul><h4 id="敏感性分析">敏感性分析</h4><h5 id="只有一个系数变动">只有一个系数变动</h5><p>例如单位利润变动。</p><ul><li>可变化值：最优解不变的前提下，目标函数系数允许变动（增加或减少）的最大值</li></ul><h5 id="多个两个系数变动">多个（两个）系数变动</h5><p>和前面的差不多</p><h5 id="法则">100%法则</h5><p>当目标函数的系数同时变动时，计算每个系数的变化量占允许变化量的百分比。将各百分比相加：- 如果百分比之和不超过100%，则最优解一定不变 -如果百分比之和超过100%，则不确定</p><h5 id="图形表示">图形表示</h5><p>看成目标函数发生旋转 <img src="/2024/10/12/%E7%AE%A1%E7%90%86%E7%A7%91%E5%AD%A6/4a7d05ddddd86dab50847511acbb90a.png"></p><h4 id="约束条件变动">约束条件变动</h4><h5 id="约束条件右端项rhs变化">约束条件右端项（RHS）变化</h5><p>例如总禀赋发生变化。</p><h6 id="影子价格">影子价格</h6><p>由于约束条件RHS变化产生的目标函数变化率，被称作这个约束条件的影子价格。</p><h6 id="允许变化范围">允许变化范围</h6><p>每个影子价格都对应着一个RHS的变化范围。这个范围被称为右端数值的允许变化范围，简称允许变化范围。-与目标函数系数的允许变化范围不同，RHS数值在允许变化范围内变动并不意味着最优解不变。-只要影子价格不为零，右侧数值的变化一定会导致最优解的改变。（最优解的改变导致目标函数发生变化）</p><h6 id="法则-1">100%法则</h6><p>若同时改变几个约束函数的右端数值，只要这些变动占允许变化范围百分比之和不超过100%，那么影子价格就依然有效。如果超过100%，则无法确定。</p><p>注意：100%法则只对分析单独变化目标函数系数或者单独变化约束RHS有效，两种同时变化无效。</p><h5 id="图形表示-1">图形表示</h5><p>看成约束条件发生平移 <img src="/2024/10/12/%E7%AE%A1%E7%90%86%E7%A7%91%E5%AD%A6/7f6463e5f8d700ce89227ba41043699.png"></p><h5 id="约束条件左端项变动">约束条件左端项变动</h5><h3 id="对偶问题">对偶问题</h3><p>利润最大化vs成本最小化 <span class="math display">\[\begin{align}\max_{x_1,x_2}\ \ \ \ &amp;Z=\pmb c^T\pmb x\\s.t.\ \ \ \ &amp;\pmb A\pmb x\leq\pmb b\\&amp;\pmb x\geq\pmb 0\end{align}\]</span> <span class="math display">\[\begin{align}\min_{y_1,y_2,y_3}\ \ \ \ &amp;W=\pmb y^T\pmb b\\s.t.\ \ \ \ &amp;\pmb y^T\pmb A\geq\pmb c^T\\&amp;\pmb y^T\geq\pmb 0^T\end{align}\]</span></p><h4 id="构造规则">构造规则</h4><ul><li>原始问题目标函数的系数是对偶问题约束右端项</li><li>原始问题约束右端项是对偶问题目标函数的系数</li><li>原始问题一个变量在所有约束方程中的系数是对偶问题一个约束方程中的全部系数</li></ul><p><img src="/2024/10/12/%E7%AE%A1%E7%90%86%E7%A7%91%E5%AD%A6/3925d575c5052d5cd6ee71aceda0182.png"> <img src="/2024/10/12/%E7%AE%A1%E7%90%86%E7%A7%91%E5%AD%A6/b8238bca0157c75668a8673cc4dab66.png"></p><h4 id="关系">关系</h4><ul><li>对称性：对于LP问题，对偶的对偶=原始问题</li><li>弱对偶定理：原始和对偶<strong>可行解</strong>之间的关系<ul><li>如果<span class="math inline">\(\pmbx\)</span>是原始问题（最大化）的可行解，<span class="math inline">\(\pmby\)</span>是对偶问题（最小化）的可行解，那么<span class="math display">\[\pmb c^T\pmb x\le\pmb y^T\pmb b\]</span></li><li>即对偶问题可以求出原问题最优解（最大化）的上界</li></ul></li><li>强对偶定理：原始和对偶<strong>最优解</strong>之间的关系<ul><li>如果<span class="math inline">\(\pmbx\)</span>是原始问题的最优解（有界），而<span class="math inline">\(\pmby\)</span>是对偶问题的最优解（有界），那么<span class="math display">\[\pmb c^T\pmb x^*=(\pmb y^*)^T\pmb b\]</span></li></ul></li><li>影子价格：对偶问题的最优解<span class="math inline">\(\pmby^*\)</span>可以理解为对应原始问题约束条件的影子价格</li></ul><p><img src="/2024/10/12/%E7%AE%A1%E7%90%86%E7%A7%91%E5%AD%A6/80175d489ac90a216b8dd12d9aeaf44.png"></p><h4 id="互补松弛条件">互补松弛条件</h4><p><img src="/2024/10/12/%E7%AE%A1%E7%90%86%E7%A7%91%E5%AD%A6/d4a9b64546431c2c456b1dc4344e823.png"> -如果受约束的原始资源比较宽松（即存在“剩余”），则该资源的额外数量没有价值-同样，如果对偶（影子）价格不为零（非负约束条件宽松），则资源供给稀缺（没有“剩余”）</p><h3 id="最小费用流问题">最小费用流问题</h3><h4 id="一般模型">一般模型</h4><p><span class="math display">\[\begin{align}&amp;\min\sum_{(i,j)\in A}c_{ij}x_{ij}\\s.t.\ \ \ \ &amp;b_i+\sum_{(j,i)\in A}x_{ji}=\sum_{(i,j)\in A}x_{ij}\\&amp;0\leq x_{ij}\leq u_{ij}\end{align}\]</span> 其中， <span class="math inline">\(i,j\)</span>:nodes <span class="math inline">\((i,j)\)</span>: arc from <span class="math inline">\(i\)</span> to <span class="math inline">\(j\)</span> <span class="math inline">\(n\)</span>:number of nodes in the network <span class="math inline">\(c_{ij}\)</span>: the cost of arc<span class="math inline">\((i,j)\)</span> <span class="math inline">\(x_{ij}\)</span>: the flow of arc<span class="math inline">\((i,j)\)</span> <span class="math inline">\(u_{i,j}\)</span>: the capacity of arc<span class="math inline">\((i,j)\)</span> <span class="math inline">\(A\)</span>: the set of arcs <span class="math inline">\(b_i\)</span>: the supply/demand of node <span class="math inline">\(i\)</span></p><h5 id="假设">假设</h5><ul><li>其中至少一个节点为<strong>供给点</strong>，每个供给点产生的净流量指定为一个固定<strong>正数</strong></li><li>至少一个节点为<strong>需求点</strong>，每个需求点产生的净流量指定为一个固定<strong>负数</strong></li><li>其余所有节点都是转运点，每个转运点的净流量为固定值0</li><li>通过弧的流仅允许<strong>沿着箭头</strong>的方向流动，最大流量由该弧的容量确定（如果是双向流，则可以用一对指向相反方向的弧表示）</li><li>网络具有足够的弧提供足够的容量，使得所有在供给点产生的流都能到达需求节点</li><li>在流的单位成本已知的前提下，通过<strong>每个弧的流量成本与流量成正比</strong></li><li>最小费用流问题的目标在满足给定需求的条件下，使得通过网络供给的<strong>总成本最小</strong>（或者最大化利润）</li></ul><h5 id="省流版">省流版</h5><ul><li>目标函数最小化：总弧上成本</li><li>约束条件：每个节点流量、每条弧容量</li></ul><h4 id="性质">性质</h4><h5 id="可行解性质">可行解性质</h5><p>当且仅当供给点所提供的流量总和等于需求点所需流量总和时，最小费用流问题具有可行解- 当存在额外供给（供给需求大于等于需求总和）时 - 采用小于等于约束条件 -<strong><em>引入“虚拟需求节点”，并从每个供给点向虚拟需求节点添加单位流量成本为零的弧</em></strong></p><h5 id="整数解性质">整数解性质</h5><p>如果所有的供给、需求和弧的容量都是整数值，那么只要最小费用流问题有可行解，对于任何流量值都一定存在整数最优解</p><h4 id="常见子问题概述">常见子问题概述</h4><h4 id="运输问题">运输问题</h4><ul><li>没有转运点和弧容量限制</li></ul><h4 id="指派问题">指派问题</h4><ul><li>运输问题的特殊类型</li></ul><h4 id="最大流问题">最大流问题</h4><ul><li>网络中所有流起源于“源”，终止于“汇”，其余节点均为转运点</li><li>目标：使得从源到汇的总流量最大，该流量的大小可以用两种等价的方法来衡量，即离开源的量或者进入汇的量#### 最短路问题</li><li>在网络中选择一条路，始于“源”，终于“目的地”</li><li>目标：寻找从源到目的地的最短路线</li></ul><h3 id="整数规划">整数规划</h3><h4 id="变量整数规划">0—1变量整数规划</h4><ul><li>用0—1变量表示“是非决策”</li><li>称为“0—1整数规划” (binary integer programming)</li></ul><h5 id="集合覆盖问题">集合覆盖问题</h5><p>所有函数约束都是<strong>集合覆盖约束</strong>且目标为总成本最小的模型，被称作集合覆盖问题###### 集合覆盖约束 - 0—1变量的和大于等于1的约束条件</p><h5 id="准备成本问题">准备成本问题</h5><ul><li>定量决策<span class="math inline">\(x\)</span>在是非决策<span class="math inline">\(y\)</span>确定后才能得出</li><li>用一个比较大的数值来进行限制<span class="math inline">\(x\leq99y\)</span><ul><li>若<span class="math inline">\(y=1\)</span>，<span class="math inline">\(x\leq 99\)</span></li><li>若<span class="math inline">\(y=0\)</span>，<span class="math inline">\(x\leq 0\)</span></li></ul></li></ul><h4 id="一般的整数线性规划">一般的整数线性规划</h4><ul><li>要求一部分或者全部决策是整数的线性规划模型被称为<strong>整数线性规划</strong>（LinearInteger Programming） <span class="math display">\[\begin{align}\max\ \ \ \  &amp;\pmb c^T\pmb x+\pmb d^T\pmb y\\s.t.\ \ \ \  &amp;\pmb A\pmb x+\pmb B\pmb y\leq\pmb b\\&amp;\pmb x,\pmb y\geq 0,\pmb x\text{ integer}\end{align}\]</span></li><li>如果没有决策变量<span class="math inline">\(\pmby\)</span>则以上模型成为<strong>整数规划</strong>（integerprogramming）</li><li>如果没有决策变量<span class="math inline">\(\pmb y\)</span>且<span class="math inline">\(\pmbx\)</span>为0—1变量，则以上模型称为<strong>0—1整数规划</strong></li></ul><h5 id="分离约束">分离约束</h5><ul><li><strong>分离约束</strong>（disjunctiveconstraints）可以用来表示至少一部分约束条件需要被满足</li><li>假设两个约束条件<span class="math inline">\(\pmb a^\prime\pmb x\geqb\)</span>和<span class="math inline">\(\pmb c^\prime\pmb x\geqd\)</span>，且其中至少一个约束条件被满足。那么分离约束：<span class="math display">\[\pmb a^\prime\pmb x\geq yb,\pmb c^\prime\pmbx\geq(1-y)d,\ \ y\in\{0,1\}\]</span></li><li>如果约束条件为<span class="math inline">\(\pmb a^\prime\pmb x\leqb\)</span>和<span class="math inline">\(\pmb c^\prime\pmb x\leqd\)</span>，那么分离约束<span class="math display">\[\pmb a^\prime\pmbx\leq b+yM,\pmb c^\prime\pmb x\leqd+(1-y)M,y\in\{0,1\}\]</span>，其中<span class="math inline">\(M\)</span>是一个足够大的数。</li><li>考虑<span class="math inline">\(m\)</span>个约束条件<span class="math inline">\(\pmb a_i^\prime\pmb x\geq b,i=1,\cdots,m\)</span>，其中<span class="math inline">\(\pmb a_i\geq0\)</span>。假设需要至少<span class="math inline">\(k\)</span>个约束条件被满足，则可以通过引入<span class="math inline">\(m\)</span>决策变量<span class="math inline">\(y_i,i=1\cdots,m\)</span>并利用以下分离约束：<span class="math display">\[\begin{align}&amp;\pmb a_i^\prime\pmb x\geq b_iy_i,i=1,\cdots,m\\&amp;\sum_{i=1}^my_i\geq k,\\&amp;y_i\in\{0,1\},i=1\cdots,m\end{align}\]</span></li><li>小于的情况：<span class="math display">\[\begin{align}&amp;\pmb a_i^\prime\pmb x\leq b_i+(1-y_i)M,i=1,\cdots,m\\&amp;\sum_{i=1}^my_i\geq k,\\&amp;y_i\in\{0,1\},i=1\cdots,m\end{align}\]</span></li></ul><h6 id="理解">理解</h6><p>从取交集变成了取并集。</p><h5 id="旅行商问题">旅行商问题</h5><ul><li>一个旅行商计划从起点出发，走遍一个地区的所有城市，且每个城市只走一次，最终返回起点</li><li>城市<span class="math inline">\(i\)</span>与城市<span class="math inline">\(j\)</span>的距离为<span class="math inline">\(d_{ij}\)</span></li><li>最小化总路程</li></ul><p><img src="/2024/10/12/%E7%AE%A1%E7%90%86%E7%A7%91%E5%AD%A6/8d9fd3491abd3a7b5e7d1df65115200.png"></p><h6 id="完整模型">完整模型</h6><p>决策变量：令<span class="math inline">\(x_{ij}=1\)</span>表示从城市<span class="math inline">\(i\)</span>出发前往城市<span class="math inline">\(j\)</span>，否则为0 <img src="/2024/10/12/%E7%AE%A1%E7%90%86%E7%A7%91%E5%AD%A6/9a32c4102f2719757025b4b519bfc3c.png"></p><h4 id="求解算法">求解算法</h4><h5 id="一个直接但不可行的思路">一个直接但不可行的思路</h5><p>先线性规划松弛，去掉整数解条件，再将最优解取整 -取整之后的解可能是不可行解 - 即使是可行解，可能也与最优解相差甚远</p><h5 id="分支定界法">分支定界法</h5><ul><li><p>分支（branching）</p><ul><li>在剩余尚未剪枝的子问题中选取最近的子问题</li><li>在该问题的LP relaxation最优解中选取数值为非整数的变量<span class="math inline">\(x_j^*\)</span>作为分支变量，并把整个可行解分成两个子集（<span class="math inline">\(x_j\leq\lfloor x_j^*\rfloor\)</span>和<span class="math inline">\(x_j\geq\lceil x_j^*\rceil+1\)</span>）</li></ul></li><li><p>定界（bounding）</p><ul><li>求解两个子问题的LP relaxation，并记录各自的最优目标值<span class="math inline">\(Z\)</span></li></ul></li><li><p>剪枝（fathoming）</p><ul><li>对每个子问题，如果满足以下剪枝测试之一，则将该子问题剪枝</li><li>最优目标值<span class="math inline">\(Z\leq Z^*\)</span>，<span class="math inline">\(Z^*\)</span>为当前最好的可行解（incumbent）对应的目标值</li><li>LP relaxation没有可行解</li><li>LP relaxation的最优解是整数且<span class="math inline">\(Z\geqZ^*\)</span>，该解称为新的incumbent，继续对下一个子问题进行剪枝测试</li></ul></li><li><p>最优性测试：如果所有子问题都已剪枝，则当前incumbent为最优解；否则继续循环</p></li><li><p>最差情况下，分支定界法需要验证指数多的可行解</p></li></ul><h5 id="割平面法">割平面法</h5><ul><li>割平面法从LP relaxation入手</li><li>如果当前的最优解不是整数，则逐步添加线性约束条件，将当前的解从可行解集中切割掉，且不影响整数可行解集</li><li>继续求解LP relaxation，直到得到最优解为整数</li></ul><h2 id="非线性规划nonlinear-programming">非线性规划（NonlinearProgramming）</h2><h3 id="一般形式-1">一般形式</h3><p><span class="math display">\[\begin{align}&amp;\min f(x)\\s.t.\ \ \ \ &amp;g_i(x)\leq 0 \text{ for each }i\in\{1,\cdots,m\}\\&amp;h_j(x)=0\text{ for each }j\in\{1,\cdots,p\}\\&amp;x\in X\end{align}\]</span></p><h3 id="求解">求解</h3><ul><li>线性规划问题<ul><li>如果存在最优解，那么一定存在最优角点解</li><li>单纯形法</li></ul></li><li>非线性规划问题<ul><li>可行域可能不是凸集，角点可能不存在</li><li>即使可行域是凸集，最优解可能是内点而非角点</li><li>不存在单一算法（GRG，Generalized Reduced Gradient）</li></ul></li></ul><h3 id="凸优化convex-optimization">凸优化（Convex Optimization）</h3><h4 id="凸二次规划">凸二次规划</h4><ul><li>目标函数为凸函数+最小化，或者凹函数+最大化</li><li>约束条件为线性（一般而言，其实也可以是二次）</li></ul><h5 id="一般形式-2">一般形式</h5><p><span class="math display">\[\begin{align}\min\ \ \ \ \pmb x^T\pmb Q\pmb x\\s.t. \ \ \ \ \pmb A\pmb x\leq \pmb b\end{align}\]</span></p><h3 id="可分离规划separable-programming">可分离规划（SeparableProgramming）</h3><p>可用来将非线性规划问题变成LP</p><h2 id="排队模型queueing-model">排队模型（queueing model）</h2><table><thead><tr class="header"><th>符号</th><th>概念</th><th>含义</th></tr></thead><tbody><tr class="odd"><td><span class="math inline">\(\lambda\)</span></td><td>平均到达率</td><td>单位时间到达人数</td></tr><tr class="even"><td><span class="math inline">\(\mu\)</span></td><td>平均服务率</td><td>单位时间服务人数</td></tr><tr class="odd"><td><span class="math inline">\(s\)</span></td><td>服务台数</td><td>服务台个数</td></tr><tr class="even"><td><span class="math inline">\(\rho\)</span></td><td>有效因子（利用率）</td><td><span class="math inline">\(=\cfrac{\lambda}{s\mu}\)</span><br>每个服务台提供服务时，用于服务顾客的平均时间比例</td></tr><tr class="odd"><td><span class="math inline">\(L\)</span></td><td>系统长度</td><td>系统中顾客数</td></tr><tr class="even"><td><span class="math inline">\(L_q\)</span></td><td>队列长度</td><td><span class="math inline">\(=L-\rho\)</span><br>队列中顾客数</td></tr><tr class="odd"><td><span class="math inline">\(W\)</span></td><td>系统等待时间</td><td><span class="math inline">\(=\cfrac{L}{\lambda}\)</span><br>单位顾客在系统中的时间</td></tr><tr class="even"><td><span class="math inline">\(W_q\)</span></td><td>队列等待时间</td><td><span class="math inline">\(=W-\cfrac{1}{\mu}\)</span><br>单位顾客在队列中的时间</td></tr></tbody></table><h3 id="基本排队系统">基本排队系统</h3><ul><li>顾客（customer）</li><li>队列（queue/waiting line）<ul><li>如果一个顾客不能立刻接受服务，则加入队列（不包括正在接受服务的顾客）</li></ul></li><li>服务台（server）</li><li>每个顾客由其中一个或者多个服务台提供服务，然后离开</li></ul><h4 id="到达">到达</h4><ul><li>到达间隔时间（interarrival times）<ul><li>连续两个顾客到达排队系统的时间间隔</li></ul></li><li>平均到达率（mean arrival rate）<ul><li>单位时间内顾客到达的期望数量，常用<span class="math inline">\(\lambda\)</span>表示</li></ul></li><li>到达间隔时间的期望：<span class="math inline">\(\cfrac{1}{\lambda}\)</span><ul><li>例：假设100个小时里有300个顾客到达：<ul><li><span class="math inline">\(\lambda=\cfrac{300}{100}=3\)</span>，即平均每小时3个顾客</li><li><span class="math inline">\(\cfrac{1}{\lambda}=\cfrac{1}{3}\)</span>，即顾客到达平均间隔1/3小时</li></ul></li></ul></li><li>大多数排队模型假设到达间隔时间是随机变量，并服从指数分布（exponentialdistribution）</li></ul><h5 id="指数分布">指数分布</h5><ul><li><p>性质</p><ul><li>到达时间间隔比均值小的可能性较大，比均值大得多的可能性很小</li><li>到达时间间隔越大，出现的概率越小</li><li>顾客随机到达（random arrivals）<ul><li>服务台无法控制顾客何时到达，到达时间无法凭感觉预测，下一分钟有顾客到达的概率和其他分钟相同（无记忆性）</li></ul></li></ul></li><li><p>概率密度函数（probability density function） <span class="math display">\[f(x;\lambda)=\begin{cases}\lambda \text e^{-\lambda x}\ \ \ \ &amp;x\geq 0,\\0\ \ \ \ &amp;x&lt;0.\end{cases}\]</span></p></li><li><p>累计概率分布函数（cumulative distribution function） <span class="math display">\[F(x;\lambda)=\begin{cases}1-\text e^{-\lambda x}\ \ \ \ &amp;x\geq 0,\\0\ \ \ \ &amp;x&lt;0.\end{cases}\]</span> <span class="math display">\[\textE[X]=\cfrac{1}{\lambda}\ \ \ \ \\text{Var}[X]=\cfrac{1}{\lambda^2}\]</span> <img src="/2024/10/12/%E7%AE%A1%E7%90%86%E7%A7%91%E5%AD%A6/4285b689257e1980f85aedb2cbcf2b2.png" alt="概率密度函数"></p></li><li><p>无记忆性</p><ul><li>下一分钟的到达概率完全不受上一分钟的影响，也被称为马尔可夫特性 <span class="math display">\[\text{Pr}(T&gt;s+t|T&gt;s)=\text{Pr}(T&gt;t),\ \\ \ \forall s,t\geq 0\]</span></li></ul></li><li><p>指数分布是唯一具有无记忆性的连续概率分布</p></li></ul><h4 id="队列">队列</h4><ul><li>队列大小（queue size）<ul><li>等候服务的顾客数量</li></ul></li><li>系统中的顾客数量：队列中的顾客数加上正在接受服务的顾客数量</li><li>队列容量（queue capacity）：队列所能容纳的顾客最大数量<ul><li>无限队列（infinite queue）：可以容纳无限数量顾客的队列</li><li>有限队列（finitequeue）：队列容量需要纳入考量；当有限队列已满时，新的顾客会马上离开</li></ul></li><li>顾客服务规则（queue discipline）：选择队列中成员接受服务的顺序<ul><li>先到先服务（first-come, first-served, FCFS, 或FIFO）</li><li>随机服务（random selection）</li><li>有优先权的服务（priority procedure）</li><li>后到先服务（last-come, first-served, LCFS, 或LIFO）</li></ul></li></ul><h4 id="服务">服务</h4><ul><li>根据服务台数量的不同，服务系统分为单服务台系统（single-serversystem）和多服务台系统（multiple-server system）</li><li>服务时间（service time）：从服务开始到结束经过的时间</li><li>基本的排队模型假设服务时间服从某个概率分布，并与哪一个服务台正在提供服务无关<span class="math display">\[\cfrac{1}{\mu}=期望服务时间\]</span> <span class="math display">\[\mu = 平均服务率\]</span></li><li>例如，卡特先生理发的期望时间是<span class="math inline">\(\cfrac{1}{\mu}\)</span>=20分钟=每位顾客1/3小时，则他的平均服务率<span class="math inline">\(\mu\)</span>=3位顾客/小时</li></ul><h5 id="服务时间分布">服务时间分布</h5><ul><li>指数分布<ul><li>常见假设，且容易分析</li><li>适用于服务时间较为随机的系统，但是并不适用于具有固定流程的系统（服务时间相对固定），如ATM机</li><li>期望值与标准差相等</li></ul></li><li>固定服务时间（constant service time）<ul><li>适用于具有固定流程的服务系统</li><li>标准差为零，也被称为退化分布（degenerate distribution）</li></ul></li><li>Erlang分布（Erlang distribution）<ul><li>允许服务时间的波动量处于指数分布与退化分布之间</li><li><span class="math inline">\(k\)</span>个独立同分布的指数随机变量之和服从Erlang分布</li><li>Gamma分布的离散形式</li></ul></li></ul><h3 id="符号表示">符号表示</h3><p><span class="math display">\[DIT/DST/NS\]</span> - DIT: Distributionof interarrival times - DST: Distribution of service times - NS: Numberof servers</p><ul><li>分布符号<ul><li>M=指数分布（Markovian）</li><li>D=退化分布（constant times）</li><li>GI=到达间隔时间服从相互独立的一般分布（允许任意类型的分布）</li><li>G=服务时间的一般分布（允许任意类型的分布）</li></ul></li><li>例如：<ul><li>M/M/1表示单服务台，且到达间隔时间和服务时间服从指数分布</li><li>GI/M/s表示允许任意的到达间隔时间分布（到达间隔时间相互独立），服务时间服从指数分布，共<span class="math inline">\(s\)</span>个服务台</li></ul></li></ul><h3 id="模型假设">模型假设</h3><ul><li>到达间隔时间独立同分布（independent and identically distributed,i.i.d.）</li><li>所有到达的顾客都进入排队系统，直到服务结束离开</li><li>排队系统的队列是无限队列（出于应用的目的）</li><li>服务规则：FCFS</li><li>有特定数量的服务台，每个服务台可以为任意顾客服务</li><li>每位顾客由一个服务台单独提供服务</li><li>每个服务台一旦完成当前服务，立即开始为下一个顾客服务</li><li>服务时间独立同分布</li></ul><h4 id="mm1模型">M/M/1模型</h4><ul><li>假设<ul><li>到达时间间隔服从均值为<span class="math inline">\(\cfrac{1}{\lambda}\)</span>的（负）指数分布</li><li>服务时间服从均值为<span class="math inline">\(\cfrac{1}{\mu}\)</span>的（负）指数分布</li><li>1个服务台</li><li>无限队列</li><li>利用率<span class="math inline">\(\rho&lt;1\)</span></li></ul></li><li>系统中有<span class="math inline">\(n\)</span>个顾客的概率 <span class="math display">\[P_n=(1-\rho)\rho^n\]</span></li><li>公式 <span class="math display">\[\begin{align}L&amp;=\cfrac{\rho}{1-\rho}=\cfrac{\lambda}{\mu-\lambda}\\W&amp;=\cfrac{1}{\lambda}L=\cfrac{1}{\mu-\lambda}\\W_q&amp;=W-\cfrac{1}{\mu}=\cfrac{\lambda}{\mu(\mu-\lambda)}\\L_q&amp;=\lambdaW_q=\cfrac{\lambda^2}{\mu(\mu-\lambda)}=\cfrac{\rho^2}{1-\rho}\end{align}\]</span></li><li>性能度量<ul><li>假设队列是FCFS，则系统中的等待时间超过<span class="math inline">\(t\)</span>的概率<span class="math inline">\(\textP(\mathscr W&gt;t)=\text e^{-\mu(1-\rho)t}\)</span></li><li>队列中的等待时间超过<span class="math inline">\(t\)</span>的概率<span class="math inline">\(\textP(\mathscr W_q&gt;t)=\rho\text e^{-\mu(1-\rho)t}\)</span></li></ul></li></ul><h4 id="mg1模型">M/G/1模型</h4><ul><li>假设<ul><li>到达时间间隔服从均值为<span class="math inline">\(\cfrac{1}{\lambda}\)</span>的（负）指数分布</li><li>服务时间服从任意形式的概率分布，不需要知道分布的具体形式，只需要估计出均值<span class="math inline">\(\cfrac{1}{\mu}\)</span>和标准差<span class="math inline">\(\sigma\)</span></li><li>1个服务台</li><li>无限队列</li><li>利用率<span class="math inline">\(\rho&lt;1\)</span></li></ul></li><li>公式 <span class="math display">\[\begin{align}L_q&amp;=\cfrac{\lambda^2\sigma^2+\rho^2}{2(1-\rho)}\tag{Pollaczek-Khintchine}\\L&amp;=L_q+\rho\\W_q&amp;=\cfrac{L_q}{\lambda}\\W&amp;=W_q+\cfrac{1}{\mu}\end{align}\]</span></li></ul><h4 id="mms模型">M/M/s模型</h4><ul><li>假设<ul><li>到达时间间隔服从均值为<span class="math inline">\(\cfrac{1}{\lambda}\)</span>的（负）指数分布</li><li>服务时间服从均值为<span class="math inline">\(\cfrac{1}{\mu}\)</span>的（负）指数分布</li><li><span class="math inline">\(s\)</span>个服务台</li><li>无限队列</li><li>利用率<span class="math inline">\(\rho&lt;1\)</span></li></ul></li><li>公式 <span class="math display">\[\begin{align}L&amp;=\cfrac{\rho}{1-\rho}=\cfrac{\lambda}{s\mu-\lambda}\\W&amp;=\cfrac{1}{\lambda}L=\cfrac{1}{s\mu-\lambda}\\W_q&amp;=W-\cfrac{1}{\mu}\\L_q&amp;=\lambda W_q\end{align}\]</span><img src="/2024/10/12/%E7%AE%A1%E7%90%86%E7%A7%91%E5%AD%A6/5afcfd32891b742ff363c725b5a582b.png"></li></ul><h4 id="mds模型">M/D/s模型</h4><p><img src="/2024/10/12/%E7%AE%A1%E7%90%86%E7%A7%91%E5%AD%A6/d6fd8eee945cdadf983a52c2a43a392.png"></p><h4 id="有优先权的排队模型">有优先权的排队模型</h4><ul><li>假设<ul><li>有两类及以上类型的顾客</li><li>每类顾客都有一个优先级</li><li>优先级高的顾客先接受服务</li><li>相同优先级顾客，FCFS</li></ul></li><li>两种优先权<ul><li>无强制优先规则：当前服务不被打断的情况下，按照优先级选择下一个服务的顾客<ul><li>对于优先级<span class="math inline">\(i\)</span>，到达时间间隔服从均值为<span class="math inline">\(\cfrac{1}{\lambda_i}\)</span>的（负）指数分布</li><li>不管优先级，服务时间服从均值为<span class="math inline">\(\cfrac{1}{\mu}\)</span>的（负）指数分布</li><li>只有一个服务台</li><li>平均到达率为各优先级顾客到达率之和 <span class="math display">\[\rho=\cfrac{\lambda_1+\lambda_2+\cdots+\lambda_n}{s\mu}\]</span></li></ul></li><li>强制优先规则：优先服务具有优先权的顾客，且打断正在进行的服务<ul><li>对于优先级<span class="math inline">\(i\)</span>，到达时间间隔服从均值为<span class="math inline">\(\cfrac{1}{\lambda_i}\)</span>的（负）指数分布</li><li>不管优先级，服务时间服从均值为<span class="math inline">\(\cfrac{1}{\mu}\)</span>的（负）指数分布</li><li>只有一个服务台</li><li>平均到达率为各优先级顾客到达率之和 <span class="math display">\[\rho=\cfrac{\lambda_1+\lambda_2+\cdots+\lambda_n}{\mu}\]</span></li></ul></li></ul></li></ul><h3 id="绩效度量">绩效度量</h3><ul><li>排队系统中多少顾客在等待？</li><li>顾客需要等待多少时间？</li></ul><h4 id="绩效度量指标">绩效度量指标</h4><ul><li><span class="math inline">\(L\)</span>：系统中顾客数量期望值，包括正在接受服务的顾客</li><li><span class="math inline">\(L_q\)</span>：队列中的顾客数量期望值，不包括正在接受服务的顾客数</li><li><span class="math inline">\(W\)</span>：一个顾客在系统中的等待时间期望值（包括服务时间）</li><li><span class="math inline">\(W_q\)</span>：一个顾客在队列中的等待时间期望值（不包括服务时间）<span class="math display">\[W=W_q+\cfrac{1}{\mu}\]</span></li><li>这些定义假设系统处于稳态（steady-statecondition），也就是说系统处于已经工作一段时间之后的正常运行状态<ul><li>在排队系统开始运行阶段，系统中没有顾客，需要经过一定时间后系统中的期望顾客数量才会达到正常水平</li><li>稳态条件排除了短时间内平均到达率突然上升的非正常情况</li></ul></li></ul><h4 id="little公式">Little公式</h4><ul><li>排队论中最重要的公式之一 <span class="math display">\[L=\lambdaW\]</span></li><li><span class="math inline">\(L_q=\lambda W_q, W=\cfrac{L}{\lambda},W_q=\cfrac{L_q}{\lambda}\)</span></li><li><span class="math inline">\(L=\lambdaW=\lambda(W_q+\cfrac{1}{\mu})=L_q+\cfrac{\lambda}{\mu}\)</span></li><li>排队系统中顾客数=排队系统平均等待时间×单位时间到达顾客数（平均到达率）</li></ul><h4 id="用概率作为绩效度量指标">用概率作为绩效度量指标</h4><ul><li>最坏情况，即在一小部分时间内（小概率）<ul><li>系统或者队列中最多的顾客数是多少？</li><li>顾客的最长等待时间是多少？</li></ul></li><li><span class="math inline">\(P_n\)</span>：系统中有<span class="math inline">\(n\)</span>个顾客的稳态概率<ul><li>例<ul><li>假设目标在95%时间内系统的顾客数不超过3个，则 <span class="math display">\[P_0+P_1+P_2+P_3\geq 0.95\]</span></li><li>假设目标要求至少95%的顾客在系统中的等待时间不超过2小时<span class="math display">\[\text Pr(\scr W\leq 2 \text{ hours})\geq0.95\]</span>W表示一个顾客在稳态系统中的随机等待时间的期望</li></ul></li></ul></li></ul><h3 id="案例分析">案例分析</h3><p>Dupit公司案例 - 目前制度 -每名技术服务代表所负责的区域内应该有足够多的设备，使得他们大约75%的时间在从事维修工作（或在前往维修地点的路上）-连续工作时，每名技术代表平均一天应当能够维修4台设备（平均每台设备2小时，包括路上的时间）- 为了使顾客的等待时间最短，技术代表每工作日应平均接到3个维修电话 -设备每50个工作日就要进行一次维修，因此要为每名技术代表负责的区域指定大约150台设备 - 共10000名技术代表，年支付工资6亿美元（包括奖金） - 问题及建议 -公司的一款新产品——彩色打印复印一体机成为了购买者办公室的重要工具，因此需要更高水平的服务来减少设备的故障时间- 建议的新服务标准：顾客的平均等待时间从6小时降低到2小时 -可供选择的解决方案 -约翰的建议：每个代表负责较小的区域（负责更少的机器），从而降低每个代表期望工作时间所占百分比- 工程副总裁建议：为技术代表提供新的设备，缩短维修时间 -首席财务官建议：将现在由一个人负责的小区域变成几个人负责的大区域，在忙碌时间段通过团队支持可以大幅缩短平均维修等待时间，而不需要雇佣新代表-营销副总裁建议：给新打印机客户优先维修的权利，因为服务不及时的抱怨主要来自于这类客户</p><p>让我们说中文： - 顾客：需要维修的设备（新旧打印机） -顾客到达：打给每名技术代表的保修电话 - 队列：顾客所在地等待修理的设备 -服务者：技术代表 -服务时间：技术代表花在一台设备上的总时间，包括维修时间和路上的时间（当技术代表开始前往这台设备所在地时，即视为该设备进入服务系统）- <span class="math inline">\(\mu=4,\rho=0.75\Rightarrow\lambda=3\)</span></p><h4 id="约翰建议的制度">约翰建议的制度</h4><ul><li>新服务标准要求 <span class="math inline">\(W_q\leq\cfrac{1}{4}\text{day}\)</span></li><li><span class="math inline">\(\lambda=3\)</span>降低到<span class="math inline">\(\lambda=2\)</span>，<span class="math inline">\(\rho=\cfrac{\lambda}{\mu}=0.5\)</span></li><li>需要额外雇佣5000名技术代表，产生每年3亿美元成本<ul><li><em>可能的理由：<span class="math inline">\(10000\times3=15000\times 2\)</span></em></li></ul></li></ul><h4 id="工程副总裁建议">工程副总裁建议</h4><ul><li>平均值维修时间将从<span class="math inline">\(\cfrac{1}{4}\)</span>缩短到<span class="math inline">\(\cfrac{1}{5}\)</span>工作日</li><li>标准差将从<span class="math inline">\(\cfrac{1}{4}\)</span>减少到<span class="math inline">\(\cfrac{1}{10}\)</span>工作日</li><li>一次性成本大约5亿美元</li></ul><h4 id="首席财务官建议">首席财务官建议</h4><ul><li>M/M/1模型变成M/M/s模型</li><li>把三个相邻的技术代表负责的区域合并为一个区域可满足新标准</li><li>无增加成本</li></ul><h4 id="营销副总裁建议">营销副总裁建议</h4><ul><li>只将新服务标准应用于新打印机客户，赋予他们优先维修的权利</li><li>无增加成本</li></ul><h4 id="总结">总结</h4><table><thead><tr class="header"><th>Proposer</th><th>Proposal</th><th>Additional Cost</th></tr></thead><tbody><tr class="odd"><td>John Phixitt</td><td>Maintain one-person territories, but reduce number of machinesassigned to each from 150 to 100</td><td>$300 million per year</td></tr><tr class="even"><td>VP for Engineering</td><td>Keep current one-person territories, but provide newstate-of-the-art equipment to the tech-reps</td><td>One-time cost of $500 million</td></tr><tr class="odd"><td>Chief Financial Officer</td><td>Change to three-person territories</td><td>None, except disadvantages of larger territories</td></tr><tr class="even"><td>VP for Marketing (Chosen)</td><td>Change to two-person territories with priority given to theprinter-copies for repairs</td><td>None, except disadvantages of larger territories</td></tr></tbody></table><h4 id="管理启示">管理启示</h4><ol type="1"><li>设计一个单服务台系统时，相对较高的服务台有效因子（工作强度）将使系统的绩效度量指标大幅降低</li><li>降低服务时间的波动（不改变均值）可以大幅改进单服务台排队系统的绩效（对于多服务台排队系统也是这样，特别是具备较高有效因子的系统）</li><li>具有较高有效因子的多服务台排队系统能够表现的比单服务台系统更好。例如，通过将分立的单服务台排队系统组合为一个多服务台排队系统（不改变有效因子）产生的联合服务台大大改善了系统的绩效</li><li>根据优先级选择顾客进行服务可以大幅改善高优先级顾客服务的绩效度量指标</li></ol><h3 id="泊松分布">泊松分布</h3><p>如果一个离散随机变量<span class="math inline">\(X\)</span>（可能取值为非负整数）服从泊松分布，那么其概率密度函数为<span class="math display">\[f(k;\lambda)=\text{Pr}(X=k)=\cfrac{\lambda^k\texte^{-\lambda}}{k!}\]</span>其中，<span class="math inline">\(k\)</span>为事件出现的次数（<span class="math inline">\(X\)</span>的取值），<span class="math inline">\(\lambda=\text E(X)=\text{Var}(X)\)</span></p><h4 id="泊松到达">泊松到达</h4><p>排队系统中，如果单位时间内顾客到达服从参数为<span class="math inline">\(\lambda\)</span>的泊松分布，则称顾客随时间的到达过程为泊松到达- <span class="math inline">\(N(0)=0\)</span> -独立增长（任何不相交的时间段内到达的顾客数量相互独立） - 任何长度为<span class="math inline">\(t\)</span>的时间段内顾客到达的数量服从参数为<span class="math inline">\(\lambda t\)</span>的泊松分布。即对于任何<span class="math inline">\(s,t\geq 0\)</span>，有<span class="math display">\[\text{Pr}[N(t+s))-N(s)=n]=\cfrac{(\lambdat)^n}{n!}\text e^{-\lambda t}, \ \ \ \ n=0,1,\cdots\]</span> - 时间<span class="math inline">\(t\)</span>内的平均到达数量为<span class="math inline">\(\text E[N(t)]=\lambda t\)</span> -单位时间内的平均到达率为<span class="math inline">\(\lambda\)</span></p><ul><li>对于泊松过程，至少一个顾客在<span class="math inline">\([0,t)\)</span>到达的概率为：<span class="math display">\[\text{Pr}[N(t)\geq 1]=1-\text{Pr}[N(t)=0]=1-\texte^{-\lambda t}\]</span></li><li>至少一个顾客在<span class="math inline">\([0,t)\)</span>到达，等价于顾客到达时间间隔<span class="math inline">\(\leq t\)</span></li><li>排队系统中，如果顾客的到达时间间隔服从（负）指数分布，则单位时间内顾客的到达数量服从参数为<span class="math inline">\(\lambda\)</span>的泊松分布，到达率为<span class="math inline">\(\lambda\)</span>；反之亦然。</li><li>泊松分布中两个连续到达的顾客的到达时间间隔是（负）指数分布的。</li><li>M/M/s的顾客到达是泊松过程</li></ul><h3 id="生灭过程">生灭过程</h3><ul><li><p>大多数排队模型假设顾客到达和离开排队系统服从生灭过程(birth-and-deathprocess)</p><ul><li>出生(birth)：一个新的顾客到达排队系统</li><li>死亡(death)：一个接受完服务的顾客离开排队系统</li></ul></li><li><p>系统在时刻<span class="math inline">\(t\geq 0\)</span>的状态</p><ul><li><span class="math inline">\(N(t)\)</span>：排队系统在时刻<span class="math inline">\(t\)</span>的顾客数量</li></ul></li><li><p>生灭过程在概率上描述了排队系统的状态<span class="math inline">\(N(t)\)</span>如何随时间变化</p></li><li><p>假设：</p><ul><li>给定<span class="math inline">\(N(t)=n\)</span>，直到下一次出生（到达）前剩余的时间服从参数为<span class="math inline">\(\lambda_n\)</span>的指数分布</li><li>给定<span class="math inline">\(N(t)=n\)</span>，直到下一次死亡（服务完成）前剩余的时间服从参数为<span class="math inline">\(\mu_n\)</span>的指数分布</li><li>出生与死亡是相互独立的</li><li>系统的下一个状态或者是<span class="math inline">\(n\rightarrown+1\)</span>（出现一个到达）或者是<span class="math inline">\(n\rightarrown-1\)</span>（出现一个离开），取决于哪个事件先发生</li></ul></li><li><p>目标：求出当<span class="math inline">\(t\rightarrow\infty\)</span>，<span class="math inline">\(N(t)\)</span>的稳态概率(steady statedistribution)，也就是<span class="math inline">\(P_0,P_1,P_2,\cdots\)</span> <img src="/2024/10/12/%E7%AE%A1%E7%90%86%E7%A7%91%E5%AD%A6/0117c97e18555bf4b809e0bd2c6d990.png"></p></li><li><p>状态转移图</p><ul><li>节点：系统状态</li><li>箭头：系统状态仅有的可能转移（每个箭头上的数字给出了系统处于前尾状态时转移的平均率）<img src="/2024/10/12/%E7%AE%A1%E7%90%86%E7%A7%91%E5%AD%A6/553a8544a595eb7ac1be762668a95d2.png"></li></ul></li></ul><h4 id="rate-in-rate-out原则">Rate-in-rate-out原则</h4><ul><li>考虑系统的任意状态<span class="math inline">\(n(n=0,1,2,\cdots)\)</span></li><li>从时间0开始，假设统计该过程进入此状态的次数和离开此状态的次数。<ul><li><span class="math inline">\(E_n(t)\)</span>：系统进入此状态的次数</li><li><span class="math inline">\(L_n(t)\)</span>：系统离开此状态的次数</li></ul></li><li>由于进入和离开两个事件必然是交替发生，因此<span class="math display">\[|E_n(t)-L_n(t)|\leq1\Rightarrow\left|\cfrac{E_n(t)}{t}-\cfrac{L_n(t)}{t}\right|\leq\cfrac{1}{t}\Rightarrow\lim_{t\rightarrow\infty}\left|\cfrac{R_n(t)}{t}-\cfrac{L_n(t)}{t}\right|=0\]</span>其中<span class="math inline">\(\cfrac{E_n(t)}{t}\)</span>和<span class="math inline">\(\cfrac{L_n(t)}{t}\)</span>分别表示截止至<span class="math inline">\(t\)</span>内系统实际进入和离开状态<span class="math inline">\(n\)</span>的平均次数，<span class="math inline">\(\displaystyle\lim_{t\rightarrow\infty}\cfrac{E_n(t)}{t}\)</span>和<span class="math inline">\(\displaystyle\lim_{t\rightarrow\infty}\cfrac{L_n(t)}{t}\)</span>分别表示系统进入和离开状态<span class="math inline">\(n\)</span>的平均率</li><li>主要原理：平均到达率=平均离开率</li></ul><h4 id="平衡方程">平衡方程</h4><ul><li>对系统的任何状态<span class="math inline">\(n(n=0,1,2,\cdots)\)</span>，平均到达率=平均离开率</li><li>平衡方程：<span class="math display">\[\begin{align}\mu_1P_1&amp;=\lambda_0P_0\\\lambda_0P_0+\mu_2P_2&amp;=(\lambda_1+\mu_1)P_1\\\lambda_1P_1+\mu_3P_3&amp;=(\lambda_2+\mu_2)P_2\\&amp;\vdots\\\lambda_{n-2}P_{n-2}+\mu_nP_n&amp;=(\lambda_{n-1}+\mu_{n-1})P_{n-1}\\\lambda_{n-1}P_{n-1}+\mu_{n+1}P_{n+1}&amp;=(\lambda_n+\mu_n)P_n\\\vdots\end{align}\]</span></li></ul><h4 id="稳态概率">稳态概率</h4><p><span class="math display">\[\begin{align}P_1&amp;=\cfrac{\lambda_0}{\mu_1}P_0\\P_2&amp;=\cfrac{\lambda_1}{\mu_2}P_1+\cfrac{\mu_1P_1-\lambda_0P_0}{\mu_2}=\cfrac{\lambda_1\lambda_0}{\mu_2\mu_1}P_0\\P_3&amp;=\cfrac{\lambda_2}{\mu_3}P_2+\cfrac{\mu_2P_2-\lambda_1P_1}{\mu_3}=\cfrac{\lambda_2\lambda_1\lambda_0}{\mu_3\mu_2\mu_1}P_0\\&amp;\vdots\\P_n&amp;=\cfrac{\lambda_{n-1}}{\mu_n}P_{n-1}+\cfrac{\mu_{n-1}P_{n-1}-\lambda_{n-2}P_{n-2}}{\mu_n}=\cfrac{\lambda_{n-1}\lambda_{n-2}\cdots\lambda_0}{\mu_n\mu_{n-1}\cdots\mu_1}P_0\\P_{n+1}&amp;=\cfrac{\lambda_n}{\mu_{n+1}P_n}+\cfrac{\mu_nP_n-\lambda_{n-1}P_{n-1}}{\mu_{n+1}}=\cfrac{\lambda_n\lambda_{n-1}\cdots\lambda_0}{\mu_{n+1}\mu_{n}\cdots\mu_1}P_0\\&amp;\vdots\end{align}\]</span></p><h4 id="系统度量指标">系统度量指标</h4><p>令<span class="math inline">\(C_n=\cfrac{\lambda_n\lambda_{n-1}\cdots\lambda_0}{\mu_{n+1}\mu_{n}\cdots\mu_1}\)</span>，<span class="math inline">\(C_0=1\)</span> 则<span class="math inline">\(P_n=C_nP_0\)</span>，因此<span class="math display">\[P_0=\cfrac{1}{\sum_{n=0}^\infty C_n}\]</span> -系统长度：<span class="math inline">\(\displaystyle L=\sum_{n=0}^\inftynP_n\)</span>，排队长度<span class="math inline">\(\displaystyleL_q=\sum_{n=s}^\infty(n-s)P_n\)</span> - 系统等待时间：<span class="math inline">\(W=\cfrac{L}{\bar\lambda}\)</span>，<span class="math inline">\(W_q=\cfrac{L_q}{\bar\lambda}\)</span>，其中，<span class="math inline">\(\displaystyle\bar\lambda=\sum_{n=0}^\infty\lambda_nP_n\)</span>- 在M/M/1中 - <span class="math inline">\(C_n=(\cfrac{\lambda}{\mu})^n=\rho^n\)</span> -<span class="math inline">\(P_0=1-\rho\)</span> - <span class="math inline">\(P_n=(1-\rho)\rho^n\)</span></p>]]></content>
    
    
    <categories>
      
      <category>2024FG</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>2024.09.19 幸运的保研与支教前</title>
    <link href="/2024/09/19/%E5%B9%B8%E8%BF%90%E7%9A%84%E4%BF%9D%E7%A0%94%E4%B8%8E%E6%94%AF%E6%95%99%E5%89%8D/"/>
    <url>/2024/09/19/%E5%B9%B8%E8%BF%90%E7%9A%84%E4%BF%9D%E7%A0%94%E4%B8%8E%E6%94%AF%E6%95%99%E5%89%8D/</url>
    
    <content type="html"><![CDATA[<p>很久没写杂感了，暑假前期天天打游戏爽玩，后期在学校带军训，都没写成。可见太闲或者太忙都让人丧失写日记的欲望。正经人谁写日记啊。</p><span id="more"></span><p>先贴两张公示的图片，存档。</p><p>第一张是支教的名单公示，取前19名。 <img src="/2024/09/19/%E5%B9%B8%E8%BF%90%E7%9A%84%E4%BF%9D%E7%A0%94%E4%B8%8E%E6%94%AF%E6%95%99%E5%89%8D/8ca97d6316c9044aa5d1c2a038b3fe1.png"></p><p>第二张是预推免名单公示。 <img src="/2024/09/19/%E5%B9%B8%E8%BF%90%E7%9A%84%E4%BF%9D%E7%A0%94%E4%B8%8E%E6%94%AF%E6%95%99%E5%89%8D/9421c342e2a156cd693c418a8a6239e.png"></p><p>在军训后期，我也拿到了安泰量化的offer。</p><p>这样的话，保研就算是尘埃落定了。父母悬着的心也放下了，我也感觉如释重负。总结来看，我的整个保研过程就如同蜻蜓飞在水面上，每次快要落水的时候就点一下水救起，最终飞上了岸。</p><p>纵观这半年，不可不谓幸运。从最开始安泰春令营找老师写推荐信，在下午第六节课上课前偶遇唐宗明老师，请她帮我写，我感觉能入春令营大概率离不开她的这封推荐信。后来在星巴克我和同学讨论大创，唐老师直接和我说入营了，让我好好准备，当时刚好放清明节还是五一节。不过我似乎也没有准备很充分，就参营去了。结果不出所料，计量被笔试和面试疯狂拷打。当时我是觉得寄了，不过柳暗花明又一村，后来我打电话给招生办老师，她说我的位次是候补第一位。一方面我担心她是在忽悠我，让我不要去别的学校，因为同时她也在反复问我还有没有报别的学校的夏令营。另一方面我还是心存侥幸，因为毕竟这意味着获得offer的概率还挺大的。</p><p>然后就是预推免名额。准备下学期的期末考试，期间其实还去了复旦管院的夏令营，结果直接笔试被刷。哼哼，管院学费26.8w，让我去我都没钱去，还是安泰好啊。虽然说要准备保研，排名很重要，但是我这一学期还是选了额外的专业课，结果最后分数果然不尽如人意，尤其是商业银行经营管理这门课。排名也只有54/144，大概是前40%左右。只能说在推免的线附近。</p><p>后来了解到支教保研这个选择。我想了想，支教保研也挺好。保研是次要的，能去支教也很符合我的个性，这个方案是两全其美。所以我和思政老师说明了意愿，思政老师也很关心我，让我早点准备材料，也安排我去带一次军训锻炼下自我。可惜军训期间也发生了一些事情，让他痛斥我“一手好牌打烂了”。学院的老师帮我改申请书和材料啥的，然后就是准备答辩ppt。当时军训真的很累，我晚上回到宿舍之后基本都没有力气动脑想ppt，只想睡觉。后来临近答辩，我还没做好。不过运气真的不错，答辩不需要ppt，只需要一个一分钟的自我介绍。于是我在回家的地铁上把自我介绍写了，省了不少时间。</p><p>军训结束后两天就是支教答辩。答辩是7—8人一组，先轮流自我介绍，然后所有评委随机点人提问。我是最后一个介绍的。一进教室，我看见军训团的政委赵昕老师坐在所有老师正中间的位置，心想有个熟悉的老师，还不错。谁料我介绍完后，他立马开始对我发难，直接问：“我们经管学院的学生，你入党申请书交没交呀？”虽然前一天我和老师们准备答辩的时候也考虑了我不是党员的问题，对于入党申请书是先说交了，回头再补。但是在答辩现场，我还是没敢说假话。我想如果赵老师直接一个电话打给我们学院的书记，或者问一些入党申请书的细节，我答不上来，这不就完了，还不如如实回答，所以就说没交。然后他追问为啥没交，我就说第一不是党员也能为人民服务，第二我准备磨练自己后面再交。看着他复杂的神情，我想这下怕是凉凉了。</p><p>说回到思政老师。苗老师对我真的挺好的，但是他和我说话有时也口径不一，虽然我知道这也不是他的问题，而是他收到的信息就是这样。大三下学期最开始，我有些焦虑研究生的事，找他聊了聊，他说我这个排名没问题。后来临近期末，他说有点悬，让我努把力。报名支教的时候，他又说有点危险，让我好好准备支教，走支教的路线，这样最好的情况还能为学院节省下名额。同时，他还强调支教竞争非常激烈，问我的经历能不能行。后来确认我支教的意向的时候，他说今年支教竞争不激烈，好像挺容易的，说我的成绩有优势。军训后期，临近研究生推免的时候，我和他聊天，他最后说今年名额多，我这个成绩应该可以上。结果就是我的成绩应该确实可以上，但是我还是选择了支教，给学院节省名额。</p><p>答辩后我立马给思政老师，还有军训时的指导员张老师打电话，说我支教怕是黄了。他们对我实话实说入党申请书没交的表现深表无语，并安慰我说没关系重在参与。我自己也觉得没了，一天都在想怎么答辩的，这个问题怎样才能回答得更好。不过我对赵昕老师很有好感，因为我记得他曾经说过他喜欢有个性的干部。</p><p>又过了一天，我正常在家里的打金铲铲，运营了半天准备直奔老八了。结果有一个已经在支教的学姐给我发微信，说恭喜我进了。我很是惊讶，看着她给我发的名单找了半天。结果在最后找到了我的名字。一共选19人，我排并列第17，真的是差点名落孙山啊。看到名单上还有一些熟悉的名字，我感觉自己真的太幸运了。然后我就和父亲说，有一个好消息和一个坏消息，把我保研和支教的事情和父母说了一遍。因为我之前一直都是对外宣称考研的，怕期望越大失望越大。现在研究生终于八九不离十了，我也终于可以和父母说了。说说笑笑差不多后，我回到pad旁边一看金铲铲，果然老八离场了。现在谁还有心思玩，肯定是先把喜讯和老师朋友们分享一下。</p><p>昨天预推免名单出来，我还在和申兄在外面吃齐齐哈尔烤肉，那个冻梨真的太好吃了，不知道是怎么做出来的。后来对了下名单，发现大部分人我都有微信好友，看来大学期间也算是结交了很多厉害的同学。学院理论上有95个名额，但是实际上只用了89个，还剩下了几个，想必是没有确定接收方。后来我意识到，如果没有支教，我的排名和offer也能支持我保研安泰。有了支教，我似乎都不需要根据排名的预推免名额和夏令营的offer，这俩似乎都是学校和学院分配的。真是哭笑不得。但我这样，确实给学院节省出了一个预推免名额，也给安泰金专节省了一个offer的名额，相当于候补的顺位又可以往后顺延一位了。量化方向顺延的那个同学刚好和我认识，他也在微信上问我支教的事，真是有缘啊。</p><p>总体来说，保研还是很幸运的。我也和硕神说了，他说不能这么想。我觉得想想应该也没问题，但是也要看到其中的必然性。明天上午要去闵行的五院做研支团的体检，希望后面能够一切顺利吧。大四要先修一些研一的课，不然要累死。等后面做一个规划吧。</p>]]></content>
    
    
    <categories>
      
      <category>日记、杂感与自我批判</category>
      
    </categories>
    
    
    <tags>
      
      <tag>碎碎念</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2024.06.24 简记</title>
    <link href="/2024/06/23/%E7%AE%80%E8%AE%B0/"/>
    <url>/2024/06/23/%E7%AE%80%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>今天晚上有点难受。赌球输了5u，买的捷克赢格鲁吉亚，结果平了。辛辛苦苦做的图数据库大作业，结果无济于事，分数还是一样，感觉白做了。唉，在现在的竞争背景下，去功利化真的好难。一看商业银行，辛辛苦苦熬夜搞，写了7w字100多页，结果分数才80出头。唉，真是服了。今晚真的很frustrating。</p>]]></content>
    
    
    <categories>
      
      <category>日记、杂感与自我批判</category>
      
    </categories>
    
    
    <tags>
      
      <tag>碎碎念</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2024.06.15 一个哀伤的晚上</title>
    <link href="/2024/06/15/%E4%B8%80%E4%B8%AA%E5%93%80%E4%BC%A4%E7%9A%84%E6%99%9A%E4%B8%8A/"/>
    <url>/2024/06/15/%E4%B8%80%E4%B8%AA%E5%93%80%E4%BC%A4%E7%9A%84%E6%99%9A%E4%B8%8A/</url>
    
    <content type="html"><![CDATA[<p>我不知道为啥要写这篇文章，是为了陈述苦难，还是为了写出一个乞丐的尊严，还是为了写出一些哀伤，一些不平，一些无味的批判？正如我不知道为啥安泰要在恢复建院40周年的时候大举庆祝，不知道安泰的生日究竟是从哪天算，不知道我是否能共情安泰的恢复建院。我讨厌无病呻吟，但至少我知道写这篇文章是为了记录一个有意思的事件，正如我知道今天安泰的人们心情都还不错。</p><span id="more"></span><p>今天在图书馆复习金融工程期末。晚上8点半打铃，催人清场，我正好在看期权的上下限范围确定，真是头皮发麻。从地铁下面回宿舍，刚进徐家汇站3号口，碰到一位盲人老奶奶。</p><p><img src="/2024/06/15/%E4%B8%80%E4%B8%AA%E5%93%80%E4%BC%A4%E7%9A%84%E6%99%9A%E4%B8%8A/0eb4c5ab4672d6b5889dab5b57ef287.jpg"></p><p>我看到她的背影，拿着一根金属的盲杖，走在盲道上，一点点试探，然后往前。教科书般的流程让我有些诧异。我心想还真有人这么标准地使用盲杖和盲道？于是快步从后面赶上去，走到她身侧的时候我就在心里骂自己，因为我发现她真的是个盲人。</p><p>3号口下面是楼梯，我站在楼梯上往回看，老奶奶似乎是要下楼梯。我象征性地犹豫了一秒，果断走了回去。我想着要不要扶她一把，一边观察一边在心里打架。是不管，还是静观其变，还是主动出手？不管首先被淘汰，在静观其变和主动出手之间反复纠结。从图书馆出来的人很多，旁边走过来一些人，像看见外星人一样也诧异地看，然后小心地离开。有一个女生，穿着蓝黑色的高中校服，站在原地看着她。或者也有可能在看着我，我也站在原地看着她俩，形成一个怪异的局势。老奶奶不知道这些，她一步一步往前走，已经探到楼梯了，然后熟练地往墙壁处摸索，想找扶手。我心里比她还急。终于她摸到扶手了，伸出去的脚悬在空中，我绷不住了，果断出手用力握住她的手臂，扶起了她。</p><p>“谢谢你啊，小帅哥。”老奶奶连声道谢，但我却思绪万千。那个高中女生在眼角的余光中走了，像一弯浅浅的海峡。我想她愣在原地的时候，心里活动一定不比我弱，因为她还要观察我的反应。其实我也考虑到她，我身为一个大学生，眼睁睁地看着她提供帮助，而我袖手旁观，岂不是太羞愧了。现在我已出手，不知道她作何感想。我又想到之前写作文的时候都是胡扯，哪有人能够看到需要帮助的人，直接二话不说提供帮助？纠结才真是真实现象。总算是体会到所谓矛盾纠结犹豫的心理了，果然写作文不能无病呻吟。但是又转念一想，要是以前小时候的我，出手的速度或许比现在更快。</p><p>我用力抓着她的手臂，有点凉凉的。“老奶奶，您要到哪里去？”我小声问她，注意到她手上拿着一个不锈钢碗，胸前挂着微信收款码，是要饭的。“我好饿，”她的声调有点尖，吐字有些模糊，“我去要饭，两天没吃饭了，没人给我钱，要不到。”</p><p>我看着她碗里的令人难绷的两个钢镚，苦涩地想这上哪要饭去。现在人都不带零钱了，而且地铁里大家行色匆匆哪有人施舍。下到楼梯底端，她又说“谢谢你呀，小帅哥。”把头扭向我的方向。我有点怀疑她怎么知道我是男的？然后我突然想到妈妈以前说的话。她说每次她碰到要饭的，不给现金，而是去买点吃的，比如馒头什么的送给乞丐。虽然不知道她从哪学到的这招，但我确实认为这是一个好的做法。我记得初中的时候我就这么做过，在小区楼下买过一个馒头和一个茶叶蛋给一个乞丐。于是我抬起头，突然发现这是上海，这是上海徐家汇，这是晚上9点的上海徐家汇。路边也没有包子店，让人哭笑不得。</p><p>好在立马就想到了外卖。我拉住老奶奶，和她说：“我给您买吃的吧。”她高兴地笑了：“好，好，谢谢小帅哥。我想吃饭。我有高血糖，不吃太甜的。酸的和辣的都行。”我去，这还挑起来了？我又感觉了一丝奇怪。“就送到这个地铁站吧，我们上去拿。”说着，她又往回走，想重新走上楼梯。</p><p>我有点沉默，但是还是扶着她慢慢走，心想她是骗子的可能性多大。“平常您怎么吃饭？”我问道。“就要饭，要得到就吃，要不到就饿着。一天都要不到饭，就一直饿。两天没吃了。”她回答说，语气中还有一丝幽怨。我有些好奇，又问：“那您晚上睡哪？”她说：“睡8号口那边。这边老是有人赶我，8号口也得等地铁关门后才可以，那边安稳一点，下雨天也淋不到雨。”</p><p>有些可怜，我掏出了手机。“谢谢你啊，小帅哥。”走上楼梯后，她席地而坐，再次和我道谢。我想外卖肯定是要点的，手指慌乱地在屏幕上划来划去，不知道应该给她买什么。“我给您点外卖，但是您要吃什么，能不能具体一点？”“我想吃饭，不要太甜的，我有高血糖。酸的和辣的都可以。谢谢。”“吃什么肉？”“都吃，蔬菜也吃。”我想这问也没问出什么名堂来，还在迟疑什么，干脆一点，于是看到有一个券，就随便选了一家，忘记店名了，然后点了一些肉和蔬菜，还有蛋。一份27元。地址填在徐家汇地铁站3号口。</p><p>手机号怎么填？我试探性地问了下她。她还真给我报出了她的手机号。我去，居然还有手机？我又看到她脖子上挂的收款码，心里的疑云越来越重。她让我打一下她的手机，看看通不通。我打了，听铃声是按键手机。“您的手机有电吗？”我问。“有，”她说，“8号口有一个小美女，帮我在她的店里给手机充电。”彳亍，脑子里昏昏的，我就把她的手机号填了上去，付款下单。其实应该填我自己的。</p><p>她坐在地上，从不知道哪里掏出一个矿泉水瓶，里面大概还有一口水，20ml左右吧，然后拧开瓶盖大口喝了一口。结果一口估计就喝了5ml。我心里酸酸的。她说：“小帅哥能不能顺便再买点水来，没水喝了。”我看着支付成功的界面，心想坏了，怎么忘记买水了。</p><p>“我从我杯子里给您倒点水吧。”说着我从我包里摸索着水杯，再拧开她的矿泉水瓶盖。没想到她却说不要不要。“在外面要注意卫生……”她絮絮叨叨解释道。我去，我都没嫌弃你，你倒是嫌弃起我来了。彳亍，我觉得她说的也有道理，而且这也不是长久之计，便收起了水杯。刻板印象中，乞丐们如果能喝到水，肯定是不顾一切地去索取的，我想这个刻板印象是不是有点问题，对她的看法更加复杂起来。</p><p>“行，那我给您买水吧。”我又打开美团。“不要买甜的水，买那个苦的水，那个对高血糖管用。好像叫乌龙茶还是什么，”她的话再一次惊到了我，“之前有个小伙子给我买过，管用。”我没想到水还有讲究，况且矿泉水不是什么添加剂都没有，这不比乌龙茶有用多了。乌龙茶还能管高血糖？便和她说。她又说了一堆，我想她应该是不懂的，但是没说出来，只是默默地在手机上买了两瓶1.5L的矿泉水。</p><p>外卖有最低起送额，两瓶水还不够。于是我问她还有什么要买的，一起买了。她说纸巾，于是我选了一包抽纸和一包手帕纸。她又说要牙刷和牙膏。</p><p>我对她顿时肃然起敬，重新打量起她来。虽然她是乞丐，但是衣服裤子却并没有很脏，身上也没有异味，和刻板印象差别还是挺大的。这可能也是刚开始让我怀疑她的身份的原因之一，毕竟她和通常见到的乞丐相比实在太干净了。她慢慢说她在地铁里还是厕所里，找地方洗漱，牙刷都刷烂了。</p><p>“地铁里的人经常赶我，不让我呆着，还有城管。”她看着我的方向和我说着，语气平静，“我就在1号口和8号口之间来回。”我挑了优惠的牙膏牙刷，下了单。突然她又说有没有肥皂，洗头每次洗不干净。我去，真会抓timing，没办法，送佛送到西吧，便重新打开了购物界面。“还有啥要买的吗，您再想想。”“没了，吃的，洗的，都有了，没别的了，谢谢小帅哥啊。”她想了想说，又喝起了她矿泉水瓶里少的可怜的水。我挑了一个肥皂，结果外卖还是差点钱起送。行吧，那就给你买乌龙茶，想着又挑了一瓶1.5L的乌龙茶。</p><p>付完钱，我想着应该和她聊些什么。于是，我问起了她的过去。她是贵州人，十六岁和表姐一起来到上海打拼，今年已经五十多了。我想知道她是什么时候来到徐家汇地铁站的，以前又是怎么生活的。她说她也不记得什么时候来的，就记得是疫情之前，在这边遇到了一个小伙子，人很好，一直帮助她。居然还知道疫情，说不出来的感觉在我心中闪现。</p><p>说着说着，她不知从哪摸出来一张二十元的纸币，问我这是多少钱。我如实说了，她面带笑容说：“明天就用这个钱买饭吃了。”看来这就是她最近的收获。可是如此窘迫，这几年她到底是如何撑过来的？她说起了那个善良的小伙子。</p><p>“他是大学生，之前在这边遇到我，就一直帮我，给我饭吃。”我想这附近的大学不会也是交大的吧，她接着说：“在这边的时候，他在上学时就一直帮我。后来他毕业工作了，是在广告公司。去了外地，北京，找了一个小美女帮我，经常给我送钱，送吃的，还给我买药——我有高血糖、高血压。后来，有一天，小美女给我送了一堆东西，还有钱，然后和我说她不再继续来看我了。我不会去打听这些年轻人的事，什么女朋友啊什么的，我不打听这些……”疫情几年，三个人重叠的人生，就这样从她的话语简短地重演，仿佛一盒蒙了灰的录像带，丰富而平淡。“这个收款码也是那个小帅哥给我做的。”她补充道。</p><p>说到收款码，我连忙像抓住了什么，赶紧问她平常怎么付钱，如果要给她钱，是现金还是扫码。她说都可以。我摸了摸包，好像没有现金，随后让她把手机拿出来给我看看。我猜测她用的是按键手机，那怎么可能能用微信收款码呢？这个问题不解决，就没法打消我对她的不信任。她见状连忙说：“小帅哥我和你说实话，我没法扫码，是让别人帮我……”交流了半天，我大概理解了整个逻辑：这个收款码似乎是之前那个小伙子的。通过把钱转给小伙子，小伙子打电话给老奶奶确认，然后把钱转给老奶奶身边有现金的人兑换成现金给她用。行，这样的话那我就给您转一点吧，我拿出手机扫了付款码。</p><p>电子支付有一个弊端，就是对钱没有什么概念。我面对着转账界面，不知道应该转多少好。本来想转个88元，但是一想这个寓意对盲人来说是不是有点不合适，就换一个。但是脑子里不是66元就是88元，一想算了，就100元吧，就转了100元。</p><p><img src="/2024/06/15/%E4%B8%80%E4%B8%AA%E5%93%80%E4%BC%A4%E7%9A%84%E6%99%9A%E4%B8%8A/679701c81f12d835ccee8854bd23f81.jpg"></p><p>“转完了。”我看着她仍举着收款码的手，提醒道。“转了多少钱啊？”“100元，”我说，不知道这些对她而言是否够。“噢，好，谢谢小帅哥。”她和我道谢，语气中似乎有一丝悲伤。“我还是学生，没什么钱。”明知道她不会和我索求，我还是尴尬地补充道。相对她而言，其实我有钱，但我却没有给她更多，看着转账界面和数字键盘，我感觉这就像是张大嘴巴的恶魔等待我的投喂，而我也不知道应该喂出多少。其实我也没道理给她很多钱，我也没有很多钱，这也不是长久之计。但是我不知道。电子支付究竟是让人对钱更敏感了，还是更不敏感了呢？</p><p>她来电话了，是卖肥皂的超市，说这个品种的肥皂没了，能不能换一个更好的品种。我让她把电话给我，说：“好的，谢谢。”</p><p>又问起她的眼睛，她说她一点也看不见，就靠摸索，已经摸清了徐家汇地铁站1号口到8号口的话环境了，再往前就不知道，会迷路。我确认了这点，因为在她讲话的时候我故意偷偷静步走到另一个方向去，但是她头的朝向却没有改变。问起她为什么会失明，她说受了伤，似乎被人拿刀砍了，嘟嘟囔囔说了一堆，我也没听大懂。问失明的时间，二十七岁，记得很清楚，回答得很坚决。</p><p>我心里一算，二十多年失明了，不知道是否应该感叹她生命的顽强。她说以前在上海大学那边，后来才过来。可是就像这么要饭，靠这几个钢镚是怎么熬过二十多载的春夏秋冬的？她给出的答案是靠好心人帮助。一路上，不断有好心人给她买吃的，还带她看病，买药……我说这也不是个办法，问她有没有去找过社会上帮助的机构——救济站这个词，不知当时怎么了，我就是没说出口。她说找过了，没用。地铁站的人，警察，城管，带她去过好几次救济站。结果他们不收，因为眼睛看不见，怕出事情担责任。</p><p>“您呢，您自己想去救济站吗？”我问道。她似乎没有料到我会问这个问题，略显慌乱地回答着。“他们不收啊，我看不见。其实即使进去了，也会被其他人欺负，日子也不好过。在外面自由些。”</p><p>我又问后面有什么打算，经济来源是啥。她说就要饭，过一天是一天呗。“像我们这样的，最后哪一天就饿死了。眼睛看不见，找工作也没有人要。”她的声音中带有一丝苦涩。我想到电视里一般搞着搞着，就回老家找亲人解决问题了，就问起这个。她说老家在贵州，那里更穷，不会有人像上海的好心人一样帮助她，给她吃的。以前她还有男朋友，可是看不见之后，她自己主动离开了对方。“我看不见了，他虽然不说什么，心里肯定没法接受，我就自己离开了。”我又问她的妹妹呢，她说：“表姐？去年死了。”</p><p>外卖的饭来了，我帮她拆开，把筷子递到她的手上。她仍然是不住地道谢，一口一口吃起饭来，吃相并不难看。吃完，她找纸巾擦嘴，我给了她。又擦起地板来，说些“不能让他们知道我在这里吃饭”，“打扫卫生的人”什么的。擦了一遍，她问我：“小帅哥，你看我这地板擦干净了没？”我看着掉在地上的一团鸡蛋，哭笑不得，帮她擦了，扔在垃圾袋里。</p><p><img src="/2024/06/15/%E4%B8%80%E4%B8%AA%E5%93%80%E4%BC%A4%E7%9A%84%E6%99%9A%E4%B8%8A/5c392b771b7bbfd1a634c343a3460ee%201.jpg"></p><p>继续聊到经济来源，我不死心，接着问她工作的事。她说，之前年轻的时候她也上班，后来眼睛看不见了，就没人要了。地铁站地面上的环卫工，和她岁数一样，和她聊天的时候说，今年10月份就要被辞退了。去做推拿，年轻的盲女一大堆，人家都要小姑娘，也没人要自己。别的地方，也没人要盲人。</p><p>说着，她居然自己把垃圾都整理在了塑料袋里，还顺手打了一个结，似乎想要我帮忙把垃圾带出去。我还在用昏沉的脑袋想盲人能够做的职业有哪些，想来想去除了推拿也没想出来。唉，这个时候怎么想不出什么好点子了呢。</p><p>买的生活用品也到了。我拿着她的手，一一过了一遍，她很高兴。但是当我给她展示了三瓶1.5L的水后，她脸上浮现了愁容。“这么重，不好背，也不好拿。晚上还要小心同行。”第一次见到同行一词放在这个语境下的。“晚上睡觉都用手压着我的东西，就怕被别人拿走。”我心里酸酸的，有点想逃离。</p><p>于是，我背上包，准备离开。她似乎不好意思麻烦我处理垃圾，就默默自己在整理东西，摸索着新获得的物资，说等下自己把垃圾丢了。我和她说再见，她也对我说再见，“谢谢你呀，小帅哥。”这已经不知道是我今晚第几次听到她这句话了，尽管我并不是个小帅哥。</p><p>走在回宿舍的路上，我想到她在得知我也是大三的大学生后，劝我读硕士再读博士，想到她提到买一次药大概要260元，她舍不得花钱吃饭，要存钱买药，想到她让人买饭买生活用品的轻车熟路和良好的卫生习惯。她是一个坦然却不失尊严的盲人乞丐，我这么评价她。</p><p>夏夜的风是凉爽的，我感到些许的哀伤。这个盲人乞丐的命运，她失明前与失明后的生活；这个社会对残障群体的包容与忽视，经济与就业；我的犹豫与挣扎的内心，给她提供的有限的帮助……这些就像柠檬水里的酸柠，让人提神，让人在细细品味之后尝出点点苦涩。无力和空虚，我只是一个穷学生，学的还是金融，究竟怎样才能帮助到更多的人们，真正好地解决他们遇到的问题？</p><p>只能先蹲下来，平视地给老奶奶拍个照片，顺便悼念一下即将死去的看涨期权。</p><p><img src="/2024/06/15/%E4%B8%80%E4%B8%AA%E5%93%80%E4%BC%A4%E7%9A%84%E6%99%9A%E4%B8%8A/a39750e9a3c238d97a50f53584a34df.jpg"></p>]]></content>
    
    
    <categories>
      
      <category>日记、杂感与自我批判</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Mind-streaming</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2024.06.01 写在大三的儿童节</title>
    <link href="/2024/06/01/%E5%86%99%E5%9C%A8%E5%A4%A7%E4%B8%89%E7%9A%84%E5%84%BF%E7%AB%A5%E8%8A%82/"/>
    <url>/2024/06/01/%E5%86%99%E5%9C%A8%E5%A4%A7%E4%B8%89%E7%9A%84%E5%84%BF%E7%AB%A5%E8%8A%82/</url>
    
    <content type="html"><![CDATA[<p>再自称儿童似乎有些过于可笑了，我也从不如此。但是，如果年岁的增长意味着逐渐丧失尽孩童般的纯真，那我不如立刻死亡。</p><span id="more"></span><p><img src="/2024/06/01/%E5%86%99%E5%9C%A8%E5%A4%A7%E4%B8%89%E7%9A%84%E5%84%BF%E7%AB%A5%E8%8A%82/20240601贺图.png"></p><p>其实我也不知道为啥要写这篇文章。我几乎从来不过儿童节，但是今年在朋友圈里看到大家纷纷在相祝儿童节快乐，就也简单写两句，顺便当作近期的杂感记录。</p><p>昨天星期五，我结束了在积优的实习，时长总共六个月。不知道五月份的工资什么时候发，但我实习的目的从来绝对不是为了钱，尽管每天300元的薪酬确实很诱人也很有竞争力。记得最初选择实习的时候，我想着什么时候学不到东西了，我就结束实习。但是这周和大家说起结束实习的原因，我给出的答案却是临近期末，事情比较多，暑假要准备研究生，诸如此类的客观原因。</p><p>但是并不矛盾，不是么。从客观上来讲，确实事情很多，明天周日要准备两场答辩，周二还有计量小测和图数据论文汇报，周三还有预测分析的小组汇报，还有图数据的大作业。研究生的事情也没有着落，但我该报名的都报名了，就等着暑假呗。从主观上来说，确实感觉最近的学习内容有限了。因为我每周只去两天，导致潘老师没法给我开始新的大任务，只能小修小补一下之前的内容，以及干一些杂活。再继续呆下去的话，直到暑假之前应该都是这样，所以干脆退了吧，暑假我想了解一下投行这个行业，当然是后话了。</p><p>总结一下我的实习，感觉是有收获的，确实学到了许多东西，也做出了一些成果。这让我十分满意，也没有违背之前的初衷。以前和其他人打趣，总是说“来这别的没学会，学会了打羽毛球和掼蛋”，其实并非如此。最主要的肯定是那个高频回测框架了，三个引擎、数据流动、撮合逻辑，这些现在问我，都能娓娓道来，但是之前肯定是不知道的。还有各种细节，之前不知道的有关高频和市场的常识，都是课本上没有的。除此之外，还有一些软的知识，比如基金公司、产品与客户、生活与人际交往等，所以真是收获颇丰。当然也有羽毛球和掼蛋。这么一想，我做的其实还不错，从一切可能的地方，找一切可能的机会学习，还挺满意的。</p><p>都听说“世界是一个巨大的草台班子”，确实是这样。但是还是要肯定人的作用。来公司之后遇到了很多有意思的人，感激不尽。除了潘老师，还有涛哥、何老师、陈老师、峥姐、包姐等，还有最新一批次的在我之后进公司的实习生们。他们性格都更活泼一些，相处起来就很愉快。</p><p>后面的实习怎么安排呢？其实已经基本很模糊地确定了，就是投行，但是具体什么工作我也不知道，还不清楚。之前和陈硕说，“量化除了赚钱一点用都没有”，可能有些极端（笑）不过我确实更想具体地帮助到人，最好是具体地人，或许目前这样让我能有成就感吧。志愿者就是一个很好的例子，只可惜这学期我已经一次志愿者都没有当过了。如果投行如我想象中那样，投资项目，帮助实现项目落地，且工作很具体，能让我解决实际的问题，那我应该也能收获很多。如果不是这样，那我确实还要重新思考一下我的规划了。</p><p>还记得理想是什么吗？最近，一直有些感觉这个理想太空了，甚至开始觉得难以实现，但是还是不要有退缩或者放弃的想法。先把这学期熬过去吧，9月份一过，一切都会好起来的不是么？到时候，我要继续充实我的理想，并且真努力向理想迈进了，因为我认为当前的动摇是客观学业压力和作息不规律导致的结果。</p><p>既然聊到这了，那干脆直接畅想未来吧，这样总是让人心情舒畅。进入大四，首先我是没什么课程的。如果有实习，我就去实习；没有实习我就做项目，和老师做研究，到处做志愿者，去广西看看，去全国各地看看，和陈硕去玩，如果有女朋友的话也可以发展一下关系。多看书，多思考，多锻炼，多睡觉，把哲学补一补，自由地学习想学的东西，没有压力。哦对了，我还要回去看望一下老师，以及完成一些未完成的约定和计划。啊，这样的生活针不戳（大笑）</p><p>本科阶段其实是不打算谈恋爱的，因为不成熟，也有些回避。舍友前几天刚分手，刚刚又沐浴更衣，身上的香水味刺鼻但好闻，不知道干嘛去了。这样的爱情是我不喜欢的，其实我一直就觉得有些人的人品有点问题，当然可能只是不符合我的三观，况且形象是靠塑造的，我也根本无权对他人评头论足。说回恋爱这方面，如果大四解放了学业压力，那我可能会尝试找女朋友，不过可能会出现在我喜欢的和喜欢我的之间做选择的情况了，其实也不一定会有人喜欢我（雾）我觉得三观、性格、外表，这些都挺重要的。其实外表一般来说我都可以接受，真的让我很喜欢的颜值也很难出现；性格的话外向开朗一点就挺好，好相处，是个有趣的人最好；三观是最难的，也是最重要的，因为目前我认为我会为了实现理想而奋斗的，因此另一半能够和我有相近的理想抱负，我们才能一直走下去，并且生活的很好很充实。哇，这样的人好像有点难找，什么时候轮到哥们挑来挑去，搁着指指点点了，也不看看自己是什么货色。那只能等，所谓缘分咯。</p><p>今年和女生的接触和交流明显变多了，也不知道是主观的感觉还是客观的事实。反正就这样呗，坚守本心比较重要。学习，充实自己才是硬道理。</p><p>孩童时期总是无忧无虑的，可能是过的太舒服了，也没遇到什么困难和挑战，资源也很丰富。现在长大了才知道事情也并不总如人意，人与人不能一概而论，失败总是贯穿人生始终，想法和行动也很难达成一致。但我自认为还是幸运的，我遇到了很多好人，也有很多好人帮助我。所以就这样继续前行吧，或许人生确实真的很短暂，或许人确实真的很渺小呢。</p>]]></content>
    
    
    <categories>
      
      <category>日记、杂感与自我批判</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Mind-streaming</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Arboricity and Subgraph Listing Algorithms</title>
    <link href="/2024/04/29/%E5%AF%BB%E6%89%BE%E5%9B%BE%E4%B8%ADclique%E7%9A%84%E7%AE%97%E6%B3%95/"/>
    <url>/2024/04/29/%E5%AF%BB%E6%89%BE%E5%9B%BE%E4%B8%ADclique%E7%9A%84%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>Arboricity and Subgraph Listing Algorithms (Norishige Chiba and TakaoNishizeki, 1985)</p><span id="more"></span><p>![[Arboricity and Subgraph ListingAlgorithms/Chiba-1985-arboricity.pdf]]</p><h2 id="abstract">Abstract</h2><p>In this paper we introduce a new simple strategy into edge-searchingof a graph, which is useful to the various subgraph listing problems.Applying the strategy, we obtain the following four algorithms. - Thefirst one lists all the triangles in a graph <span class="math inline">\(G\)</span> in <span class="math inline">\(O(a(G)m)\)</span> time, where <span class="math inline">\(m\)</span> is the number of edges of <span class="math inline">\(G\)</span> and <span class="math inline">\(a(\textG)\)</span> the arboricity of <span class="math inline">\(G\)</span>. -The second finds all the quadrangles in <span class="math inline">\(O(a(G)m)\)</span> time. Since <span class="math inline">\(a(G)\)</span> is at most three for a planar graph<span class="math inline">\(G\)</span>, both run in linear time for aplanar graph. - The third lists all the complete subgraphs <span class="math inline">\(K_l\)</span> of order <span class="math inline">\(l\)</span> in <span class="math inline">\(O(la(G)^{l-2}m)\)</span> time. - The fourth listsall the cliques in <span class="math inline">\(O(a(G)m)\)</span> timeper clique. All the algorithms require linear space. We also establishan upper bound on <span class="math inline">\(a(G)\)</span> for a graph<span class="math inline">\(G\)</span>: <span class="math inline">\(a(G)\leq [(2m+n)^{1/2}/2]\)</span>, where <span class="math inline">\(n\)</span> is the number of vertices in <span class="math inline">\(G\)</span>.</p><p>总结四个算法： - 找三角形 - 找四点形 - 找l阶完全子图 -找所有clique</p><h2 id="main">Main</h2><h3 id="introduction">1. Introduction</h3><p>主要策略：在图中找点，然后在这个点诱导子图中找符合要求的包含该点的东西。具体而言，根据点的非增的度数找（从最大度数往最小度数点找），找过了就删，避免重复。</p><p>参数解释：<span class="math inline">\(a(G)\)</span>是指图的荫度</p><blockquote><p>The <strong>arboricity</strong> of an undirected graph is the minimumnumber of forests into which its edges can be partitioned. Equivalentlyit is the minimum number of spanning forest needed to cover all theedges of the graph. The <a href="https://en.wikipedia.org/wiki/Nash-Williams_theorem" title="Nash-Williams theorem">Nash-Williams theorem</a> providesnecessary and sufficient conditions for when a graphis <em>k</em>-arboric.</p></blockquote><p>其余参数都是正常参数。</p><p>复杂度估计：略</p><h3 id="preliminaries">2. Preliminaries</h3><p>一些计算，略</p><h3 id="algorithm-for-listing-triangles">3. Algorithm for listingtriangles</h3><p>代码见附录</p><h3 id="algorithm-for-listing-quadrangles">4. Algorithm for listingquadrangles</h3><p>代码见附录</p><h3 id="algorithm-for-listing-complete-subgraphs">5. Algorithm forlisting complete subgraphs</h3><p>代码见附录</p><h2 id="appendix">Appendix</h2><p>![[寻找图中clique的算法/chiba.py]]</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> time  <br>  <br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np  <br><span class="hljs-keyword">from</span> sortedcontainers <span class="hljs-keyword">import</span> SortedList  <br>  <br>  <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">UndirectedGraph</span>(<span class="hljs-title class_ inherited__">object</span>):  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):  <br>        self.vertex_to_id_dict: <span class="hljs-built_in">dict</span> = &#123;&#125;  <br>        self.id_to_vertex_dict: <span class="hljs-built_in">dict</span> = &#123;&#125;  <br>        self.vertex_count: <span class="hljs-built_in">int</span> = <span class="hljs-number">0</span>  <br>        self.id_list: SortedList = SortedList()  <br>        self.adj_list: <span class="hljs-built_in">list</span> = []  <br>        self.deg_list: <span class="hljs-built_in">list</span> = []  <br>  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">load_from_txt</span>(<span class="hljs-params">self, file: <span class="hljs-built_in">str</span></span>):  <br>        edge_list = np.loadtxt(file, dtype=<span class="hljs-built_in">int</span>)  <br>        <span class="hljs-keyword">for</span> src, dst <span class="hljs-keyword">in</span> edge_list:  <br>            self.add_edge(src, dst)  <br>  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_edge</span>(<span class="hljs-params">self, vertex1, vertex2</span>):  <br>        <span class="hljs-keyword">if</span> vertex1 <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self.vertex_to_id_dict:  <br>            self.add_vertex(vertex1)  <br>        <span class="hljs-keyword">if</span> vertex2 <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> self.vertex_to_id_dict:  <br>            self.add_vertex(vertex2)  <br>        self.adj_list[self.vertex_to_id_dict[vertex1]].add(self.vertex_to_id_dict[vertex2])  <br>        self.adj_list[self.vertex_to_id_dict[vertex2]].add(self.vertex_to_id_dict[vertex1])  <br>  <br>        self.deg_list[self.vertex_to_id_dict[vertex1]] += <span class="hljs-number">1</span>  <br>        self.deg_list[self.vertex_to_id_dict[vertex2]] += <span class="hljs-number">1</span>  <br>  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_vertex</span>(<span class="hljs-params">self, vertex</span>):  <br>        v_id = self.vertex_count  <br>        self.vertex_to_id_dict[vertex] = v_id  <br>        self.id_to_vertex_dict[v_id] = vertex  <br>        self.vertex_count += <span class="hljs-number">1</span>  <br>        self.id_list.add(v_id)  <br>        self.adj_list.append(SortedList())  <br>        self.deg_list.append(<span class="hljs-number">0</span>)  <br>  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">del_vertex</span>(<span class="hljs-params">self, vertex, inplace=<span class="hljs-literal">False</span></span>):  <br>        v_id = self.vertex_to_id_dict[vertex]  <br>        v_adj = self.adj_list[v_id]  <br>        <span class="hljs-keyword">if</span> v_id <span class="hljs-keyword">in</span> self.id_list:  <br>            <span class="hljs-keyword">if</span> inplace:  <br>                <span class="hljs-keyword">for</span> u_id <span class="hljs-keyword">in</span> v_adj:  <br>                    self.deg_list[u_id] -= <span class="hljs-number">1</span>  <br>                    self.adj_list[u_id].remove(v_id)  <br>                self.deg_list[v_id] = -<span class="hljs-number">1</span>  <br>                self.id_list.remove(v_id)  <br>                self.adj_list[v_id] = SortedList()  <br>            <span class="hljs-keyword">else</span>:  <br>                new_g = self  <br>                <span class="hljs-keyword">for</span> u_id <span class="hljs-keyword">in</span> v_adj:  <br>                    new_g.deg_list[u_id] -= <span class="hljs-number">1</span>  <br>                    new_g.adj_list[u_id].remove(v_id)  <br>                new_g.deg_list[v_id] = -<span class="hljs-number">1</span>  <br>                new_g.id_list.remove(v_id)  <br>                new_g.adj_list[v_id] = SortedList()  <br>  <br>                <span class="hljs-keyword">return</span> new_g  <br>        <span class="hljs-keyword">else</span>:  <br>            <span class="hljs-keyword">pass</span>  <br>  <br>  <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">K3</span>(<span class="hljs-title class_ inherited__">object</span>):  <br>    <span class="hljs-string">&quot;&quot;&quot;  </span><br><span class="hljs-string">    Print all triangles.    &quot;&quot;&quot;</span>  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, g: UndirectedGraph</span>):  <br>        self.graph = g  <br>        self.process()  <br>  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">sort_by_deg</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">list</span>:  <br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sorted</span>(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(self.graph.deg_list)), key=<span class="hljs-keyword">lambda</span> x: self.graph.deg_list[x], reverse=<span class="hljs-literal">True</span>)  <br>  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">process</span>(<span class="hljs-params">self</span>):  <br>        sorted_vertex_list = self.sort_by_deg()[:<span class="hljs-built_in">len</span>(self.graph.id_list)]  <br>        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> sorted_vertex_list[:-<span class="hljs-number">2</span>]:  <br>            v_adj = self.graph.adj_list[v]  <br>            mark = <span class="hljs-built_in">set</span>(v_adj)  <br>            <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> v_adj:  <br>                u_adj = self.graph.adj_list[u]  <br>                <span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> u_adj:  <br>                    <span class="hljs-keyword">if</span> w <span class="hljs-keyword">in</span> mark:  <br>                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;(<span class="hljs-subst">&#123;self.graph.id_to_vertex_dict[v]&#125;</span>,&quot;</span>  <br>                              <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;self.graph.id_to_vertex_dict[u]&#125;</span>,&quot;</span>  <br>                              <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;self.graph.id_to_vertex_dict[w]&#125;</span>)&quot;</span>)  <br>                mark.remove(u)  <br>            self.graph.del_vertex(self.graph.id_to_vertex_dict[v], <span class="hljs-literal">True</span>)  <br>  <br>  <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C4</span>(<span class="hljs-title class_ inherited__">object</span>):  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, g: UndirectedGraph</span>):  <br>        self.graph = g  <br>        self.U = [<span class="hljs-built_in">set</span>() <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> self.graph.deg_list]  <br>        self.process()  <br>  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">sort_by_deg</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">list</span>:  <br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sorted</span>(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(self.graph.deg_list)), key=<span class="hljs-keyword">lambda</span> x: self.graph.deg_list[x], reverse=<span class="hljs-literal">True</span>)  <br>  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_id_to_vertex</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">set</span></span>):  <br>        <span class="hljs-keyword">return</span> &#123;self.graph.id_to_vertex_dict[i] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> s&#125;  <br>  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">process</span>(<span class="hljs-params">self</span>):  <br>        sorted_vertex_list = self.sort_by_deg()[:<span class="hljs-built_in">len</span>(self.graph.id_list)]  <br>        <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> sorted_vertex_list:  <br>            <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> self.graph.adj_list[v]:  <br>                <span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> self.graph.adj_list[u]:  <br>                    <span class="hljs-keyword">if</span> w != v:  <br>                        self.U[w] = self.U[w] | &#123;u&#125;  <br>            <span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(self.graph.deg_list)):  <br>                <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(self.U[w]) &gt;= <span class="hljs-number">2</span>:  <br>                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;(<span class="hljs-subst">&#123;self.graph.id_to_vertex_dict[v]&#125;</span>,<span class="hljs-subst">&#123;self.graph.id_to_vertex_dict[w]&#125;</span>,&quot;</span>  <br>                          <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;self.set_id_to_vertex(self.U[w])&#125;</span>)&quot;</span>)  <br>            <span class="hljs-keyword">for</span> w <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(self.graph.deg_list)):  <br>                <span class="hljs-keyword">if</span> self.U[w]:  <br>                    self.U[w] = <span class="hljs-built_in">set</span>()  <br>            self.graph.del_vertex(self.graph.id_to_vertex_dict[v], <span class="hljs-literal">True</span>)  <br>  <br>  <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">COMPLETE</span>(<span class="hljs-title class_ inherited__">object</span>):  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, order: <span class="hljs-built_in">int</span>, g: UndirectedGraph</span>):  <br>        self.order = order  <br>        self.graph = g  <br>        self.C = []  <br>  <br>        self.f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;ans1.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>)  <br>        self.K(self.order, self.graph)  <br>        self.f.close()  <br>  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">K</span>(<span class="hljs-params">self, k: <span class="hljs-built_in">int</span>, gk: UndirectedGraph</span>):  <br>        <span class="hljs-keyword">if</span> k == <span class="hljs-number">2</span>:  <br>            <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> gk.id_list:  <br>                res = [&#123;gk.id_to_vertex_dict[x], gk.id_to_vertex_dict[y]&#125; | <span class="hljs-built_in">set</span>(self.C)  <br>                       <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> gk.adj_list[x] <span class="hljs-keyword">if</span> x &lt; y]  <br>                _ = &#123;<span class="hljs-built_in">print</span>(i, file=self.f) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> res&#125;  <br>  <br>        <span class="hljs-keyword">else</span>:  <br>            length = <span class="hljs-built_in">len</span>(gk.id_list)  <br>            <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(length):  <br>                v = gk.id_list[<span class="hljs-number">0</span>]  <br>                gk_1 = graph_induced_by_vertex_neighbor(gk, gk.id_to_vertex_dict[v])  <br>                self.C.append(gk.id_to_vertex_dict[v])  <br>                self.K(k - <span class="hljs-number">1</span>, gk_1)  <br>                self.C.pop()  <br>                gk.del_vertex(gk.id_to_vertex_dict[v], <span class="hljs-literal">True</span>)  <br>  <br>  <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NEW_COMPLETE</span>(<span class="hljs-title class_ inherited__">object</span>):  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, order: <span class="hljs-built_in">int</span>, g: UndirectedGraph</span>):  <br>        self.order = order  <br>        self.graph = g  <br>        self.C = []  <br>        self.graph_label = [order] * <span class="hljs-built_in">len</span>(g.id_list)  <br>        self.adj_list = [<span class="hljs-built_in">list</span>(g.adj_list[i]) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(g.adj_list))]  <br>  <br>        name_list = [self.graph.id_to_vertex_dict[v_id] <span class="hljs-keyword">for</span> v_id <span class="hljs-keyword">in</span> self.graph.id_list]  <br>  <br>        self.f = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;ans2.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>)  <br>        self.K(self.order, name_list, self.graph.deg_list)  <br>        self.f.close()  <br>  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">K</span>(<span class="hljs-params">self, k: <span class="hljs-built_in">int</span>, u_name_list: <span class="hljs-built_in">list</span>, k_deg_list: <span class="hljs-built_in">list</span></span>):  <br>        <span class="hljs-keyword">if</span> k == <span class="hljs-number">2</span>:  <br>            sub_g = graph_induced_by_vertices(self.graph, u_name_list)  <br>            <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> sub_g.id_list:  <br>                res = [&#123;sub_g.id_to_vertex_dict[x], sub_g.id_to_vertex_dict[y]&#125; | <span class="hljs-built_in">set</span>(self.C)  <br>                       <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> sub_g.adj_list[x] <span class="hljs-keyword">if</span> x &lt; y]  <br>                _ = &#123;<span class="hljs-built_in">print</span>(i, file=self.f) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> res&#125;  <br>        <span class="hljs-keyword">else</span>:  <br>            name_to_id_dict = <span class="hljs-built_in">dict</span>(<span class="hljs-built_in">zip</span>(u_name_list, <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(u_name_list))))  <br>            <span class="hljs-comment"># id_to_name_dict = dict(zip(range(len(u_name_list)), u_name_list))  </span><br>  <br>            sorted_list = <span class="hljs-built_in">sorted</span>(u_name_list, key=<span class="hljs-keyword">lambda</span> y: k_deg_list[name_to_id_dict[y]], reverse=<span class="hljs-literal">True</span>)  <br>  <br>            <span class="hljs-keyword">for</span> vi_name <span class="hljs-keyword">in</span> sorted_list:  <br>                u1_list = [self.graph.id_to_vertex_dict[v] <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> self.adj_list[self.graph.vertex_to_id_dict[vi_name]]  <br>                           <span class="hljs-keyword">if</span> self.graph_label[v] == k]  <br>  <br>                <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> u1_list:  <br>                    self.graph_label[self.graph.vertex_to_id_dict[u]] = k - <span class="hljs-number">1</span>  <br>  <br>                k1_deg_list = []  <br>  <br>                <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> u1_list:  <br>                    d = <span class="hljs-number">0</span>  <br>                    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> self.adj_list[self.graph.vertex_to_id_dict[u]]:  <br>                        <span class="hljs-keyword">if</span> self.graph.id_to_vertex_dict[i] <span class="hljs-keyword">in</span> u1_list:  <br>                            self.adj_list[self.graph.vertex_to_id_dict[u]].remove(i)  <br>                            self.adj_list[self.graph.vertex_to_id_dict[u]].append(i)  <br>                            d += <span class="hljs-number">1</span>  <br>                    k1_deg_list.append(d)  <br>  <br>                self.C.append(vi_name)  <br>  <br>                self.K(k-<span class="hljs-number">1</span>, u1_list, k1_deg_list)  <br>  <br>                self.C.pop()  <br>  <br>                <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> u1_list:  <br>                    self.graph_label[self.graph.vertex_to_id_dict[u]] = k  <br>  <br>                self.graph_label[self.graph.vertex_to_id_dict[vi_name]] = k + <span class="hljs-number">1</span>  <br>  <br>                <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> u1_list:  <br>                    pos = <span class="hljs-number">0</span>  <br>                    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(self.adj_list[self.graph.vertex_to_id_dict[v]])):  <br>                        <span class="hljs-keyword">if</span> self.graph_label[self.adj_list[self.graph.vertex_to_id_dict[v]][i]] == k:  <br>                            pos = i  <br>                            <span class="hljs-keyword">break</span>  <br>  <br>                    self.adj_list[self.graph.vertex_to_id_dict[v]].remove(self.graph.vertex_to_id_dict[vi_name])  <br>                    self.adj_list[self.graph.vertex_to_id_dict[v]].insert(pos, self.graph.vertex_to_id_dict[vi_name])  <br>  <br>  <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">graph_induced_by_vertex_neighbor</span>(<span class="hljs-params">g: UndirectedGraph, v</span>) -&gt; UndirectedGraph:  <br>    g_ind_v = UndirectedGraph()  <br>  <br>    neighbor_vertex_list = <span class="hljs-built_in">set</span>(g.adj_list[g.vertex_to_id_dict[v]])  <br>    <span class="hljs-comment"># neighbor_vertex_list.add(g.vertex_to_id_dict[v])  </span><br>  <br>    <span class="hljs-keyword">for</span> v_id <span class="hljs-keyword">in</span> neighbor_vertex_list:  <br>        _ = &#123;g_ind_v.add_edge(g.id_to_vertex_dict[v_id], g.id_to_vertex_dict[u])  <br>             <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> g.adj_list[v_id] <span class="hljs-keyword">if</span> u <span class="hljs-keyword">in</span> neighbor_vertex_list <span class="hljs-keyword">and</span> v_id &lt; u&#125;  <br>  <br>    <span class="hljs-keyword">return</span> g_ind_v  <br>  <br>  <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">graph_induced_by_vertices</span>(<span class="hljs-params">g: UndirectedGraph, v_name_list</span>) -&gt; UndirectedGraph:  <br>    g_ind_v = UndirectedGraph()  <br>    v_id_list = [g.vertex_to_id_dict[v] <span class="hljs-keyword">for</span> v <span class="hljs-keyword">in</span> v_name_list]  <br>  <br>    <span class="hljs-keyword">for</span> v_id <span class="hljs-keyword">in</span> v_id_list:  <br>        _ = &#123;g_ind_v.add_edge(g.id_to_vertex_dict[v_id], g.id_to_vertex_dict[u])  <br>             <span class="hljs-keyword">for</span> u <span class="hljs-keyword">in</span> g.adj_list[v_id] <span class="hljs-keyword">if</span> u <span class="hljs-keyword">in</span> v_id_list <span class="hljs-keyword">and</span> v_id &lt; u&#125;  <br>  <br>    <span class="hljs-keyword">return</span> g_ind_v  <br>  <br>  <br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:  <br>    G = UndirectedGraph()  <br>    G.load_from_txt(<span class="hljs-string">&#x27;example.txt&#x27;</span>)  <br>    <span class="hljs-comment"># K3 = K3(G)  </span><br>    <span class="hljs-comment"># C4 = C4(G)  </span><br>    time1 = time.time()  <br>    <span class="hljs-comment"># C = COMPLETE(6, G)  </span><br>    C = NEW_COMPLETE(<span class="hljs-number">6</span>, G)  <br>    time2 = time.time()  <br>  <br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Process time: <span class="hljs-subst">&#123;time2-time1&#125;</span>s&quot;</span>)<br></code></pre></td></tr></table></figure><h2 id="问题">问题</h2><p>我的优化的算法比老算法还慢。感觉问题可能出现在inlist的搜索上。或许用dict+SortedList更快。</p>]]></content>
    
    
    <categories>
      
      <category>2024S</category>
      
    </categories>
    
    
    <tags>
      
      <tag>图数据库</tag>
      
      <tag>文献研究</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2024.04.23 写在安泰春令营之后</title>
    <link href="/2024/04/23/%E5%86%99%E5%9C%A8%E5%AE%89%E6%B3%B0%E6%98%A5%E4%BB%A4%E8%90%A5%E4%B9%8B%E5%90%8E/"/>
    <url>/2024/04/23/%E5%86%99%E5%9C%A8%E5%AE%89%E6%B3%B0%E6%98%A5%E4%BB%A4%E8%90%A5%E4%B9%8B%E5%90%8E/</url>
    
    <content type="html"><![CDATA[<p>标题本来想起成“写在保研失败之后”的，犹豫了一会，还是改成了写在安泰春令营之后。</p><p>今天晚上，安泰发了MF春令营offer。目前我还没有收到邮件，99%的可能是寄了。现在就是waiting和rejected的抉择了。因为根据bys的非官方统计，量化已经有4个offer，目前总共14个offer。offer应该不会分批发，没道理的，而且量化赛道的名额按比例也差不多满了。所以我大抵的确是寄了。</p><p>一个小时前刚收到通知的时候，我的心率绝对能飙到150+（也不一定，没什么概念），心脏在胸口扑通扑通狂跳，真担心自己突然嘎了。还好人还在。现在对入营的幻想也基本结束了，就等一封邮件和网站更新，像是犯人在死缓和死刑之间等判决。</p><p>我不知道自己这样的反应是不是正常。其实很像一场赌博，我压了几乎全部身家（这一个月的时间精力），最后却还是输了。其实输赢和我压了多少没有关系。其实我应该知道这一点的。</p><p>这次春令营失败，可以找很多理由。我得把它们写下来，因为我很有这么做的理由。春令营前我还在问老师有没有保研失败的人来给我们分享经验，结果现在我自己倒是可以给后人分享经验了，还有些好笑。1.自我感觉，最关键的一点是准备不足。唐老师在清明前就告诉我入营了，但我却没有好好准备，现在想来也可以说是罪有应得吧。清明节放三天，两天在高速上，什么也没看。后面的上课的日子，也没复习，课也没好好听，找学长学姐问经验倒是不少，但是tech和行为也都没怎么准备。笔试前一天还在疯狂复习线代，计划笔试完之后复习概统。结果笔试概统，全崩了。写到这里我感觉安泰今年还蛮看重笔试的？之前听说的笔试不重要，也纯属误导之言。面试也准备得不充分，自我介绍都说不流利。2.自制力太差了，太差了，太差了。计划制定得很丰满，全是自己唬自己，没有实际作用。老是不落实，这次失败就是后果。唉，这个问题影响我真的太久了！3.思想绝对出了问题。这里绝对有问题，上次去做生涯测试，老师无意的一句“你这种特质的人，抗压能力上面可能会有点弱”之类的话，让我一直记到现在，绝对有问题。我肯定是在不停地给自己心理暗示，没法做到不卑不亢了，心态真出问题了。现在在这里说不要紧，这个怎么解决，还得靠自己想。</p><p>感觉要出自我保护机制了，在这之前我得把和sjx的聊天记录放出来，这是之前回忆面试过程的珍贵记录，不能忽视。（虽然现在看有些小丑，真没有太重视啊，唉）</p><p>附聊天记录</p><pre><code class="hljs">Hiryan:张麒 覃筱 吴冲锋 刁训娣 （疑似）许源Hiryan:昨天面我的五个老师Hiryan:然而当时一个都不认识，也没上过任何课Hiryan:Turbulent:吴冲锋Turbulent:金工老登Turbulent:[笑]Turbulent:他们问点什么问题啊Turbulent:量化我还真不太知道Hiryan:金工我上的是宋颖达的Hiryan:吴冲锋先让我自我介绍Hiryan:2minHiryan:然后我有点超时Hiryan:他说婷婷Hiryan:我说让我说完最后两句话Hiryan:然后我高呼Hiryan:重铸安泰荣光，我辈义不容辞！Hiryan:说实话比较紧张，有点语无伦次Hiryan:然后覃筱率先发难Turbulent:[笑]Hiryan:说我高数还行，怎么概统也不行，商统也不行，计量也不行Hiryan:我的计量能力到底行不行Hiryan:我说行Turbulent:典Hiryan:她说那我考考你Hiryan:金融数据有哪些特征Hiryan:我刚开始有点楞，然后口胡Hiryan:说大数据下正态，小数据有可能偏态Hiryan:然后危急关头我突然想到这学期冯芸教的金融计量Hiryan:说应该是尖峰肥尾Hiryan:这个应该答到点子上了Hiryan:然后她问我那统计的时候要注意什么Hiryan:我说正态总体假设的检验不能用了，要改方法Turbulent:什么统计学家Hiryan:然后她让我举个例子，就好了Hiryan:然后刁训娣紧随其后Hiryan:问了我将实习经历归类，怎样锻炼出我适合量化的能力Hiryan:然后我语无伦次地开扯Hiryan:扯了一会，她绷不住了Hiryan:然后说，看我学了固收，考考我固收的问题啊Hiryan:然后问我债券风险和定价Hiryan:定价我说核心是现金流折现Hiryan:风险我刚开始说的是看收益率，然后又想起来说久期和凸性Hiryan:然后她顺便问了我久期和凸性区别是啥Hiryan:然后她问含权债券怎么定价Hiryan:我说利率树Turbulent:习老师可能就会点固收Hiryan:然后她问我怎么构造Turbulent:她可能也不会啥了Hiryan:我说二叉树，利率看成一个分布Hiryan:有二分之一概率往上，二分之一往下Hiryan:然后她问一定是二分之一吗Hiryan:这里我懵了一下Hiryan:然后她就过了Hiryan:然后是那个不认识的老师，也有可能是业界的Hiryan:问我实习Hiryan:一些程序设计上的问题Hiryan:然后是张麒Hiryan:英文问我实习Hiryan:md这个老师套路我Hiryan:先问公司开了多久Hiryan:然后问公司做期货占比多少Turbulent:[Sticker]Hiryan:最后问，高频回测框架这么重要的东西，公司以前为啥没有，为啥让我一个实习生第一次开发Turbulent:[笑]Turbulent:汗流浃背了Hiryan:我回答了两点Hiryan:第一是回测相比实盘而言，也没那么重要Hiryan:第二是，如果我能做好，那为啥不让我做Hiryan:把他整乐了Hiryan:我也不知道我怎么就这么回答了，还是用的英文Hiryan:最后就是吴冲锋，看到我的大创，顺口问了一句结论和数据Hiryan:然后就结束了</code></pre><p>坏了，刚看了一下量化的又破防了。怎么将近一半的人都拿了offer？？？草！不是哥们，录了7个人，一天上午下午面试这么多，我连前50%都进不去吗？</p><p>感觉是笔试问题很大，25分证明题爆零，前面还错一堆。</p><p>现在最重要的是，考虑接下来应该怎么做： 1.心态方面：首先这次春令营相当于白给的一次机会，所以挂了就挂了，问题不大。不能影响到后面的心态，当然也不能无所谓。这是一次很好的经验。福祸相依这个基本准则还是没变，塞翁失马焉知非福。当然也不能过于乐观和自大。2.行为方面：五一前的一个东西就是金融计量作业，这个我今晚也在做。还有图数据库。后天管院的MFE是另一个机会，要好好把握。1. 今晚等下出去散散步吧 2.明天一天是复习MFE笔试，真得好好规划好好看，还有机会，管院不是比安泰更好么？3.笔试完后两天，是期中周结束，五一前的日子。要总结一下半学期的学习生活。狠狠补随机过程了，也要狠狠补学校课程了，题目也得刷起来了。（感觉这些也是半个学期前我想的，然而。。。）4. 能不能把b站禁了，球球了TAT 3. 保研方面： 1. MFE 2. 安泰北京营？ 3.安泰上海营？</p><p>全部整理了一下，现在至少心率下来了。感觉还是有很多对不起的地方，对不起爸妈，对不起同学们，也对不起信任我的老师。或许真的是笔试拉了坨大的，这样就真纯是我自己的问题了。唉唉，现在后悔也没用，还得看行动。只要我真的努力了，而不是假努力，结果希望不会太差。</p>]]></content>
    
    
    <categories>
      
      <category>日记、杂感与自我批判</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Mind-streaming</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>关于股指期货对冲的思考</title>
    <link href="/2024/03/31/%E5%85%B3%E4%BA%8E%E8%82%A1%E6%8C%87%E6%9C%9F%E8%B4%A7%E5%AF%B9%E5%86%B2%E7%9A%84%E6%80%9D%E8%80%83/"/>
    <url>/2024/03/31/%E5%85%B3%E4%BA%8E%E8%82%A1%E6%8C%87%E6%9C%9F%E8%B4%A7%E5%AF%B9%E5%86%B2%E7%9A%84%E6%80%9D%E8%80%83/</url>
    
    <content type="html"><![CDATA[<p>股指期货对冲是为了降低风险。具体来说，是为了降低未来操作（出售资产）时有效价格的不确定性，即有效价格的方差。接下来均以一个单位股权资产为例，假设用<span class="math inline">\(h\)</span>单位股指期货做空对冲</p><p>不同时期的价格如下：</p><table><thead><tr class="header"><th>不对冲</th><th><span class="math inline">\(T_1\)</span></th><th><span class="math inline">\(T_2\)</span></th></tr></thead><tbody><tr class="odd"><td><span class="math inline">\(1\)</span> Portfolio</td><td><span class="math inline">\(S\)</span></td><td><span class="math inline">\(S(1+R_P)\)</span></td></tr></tbody></table><table><thead><tr class="header"><th>对冲</th><th><span class="math inline">\(T_1\)</span></th><th><span class="math inline">\(T_2\)</span></th></tr></thead><tbody><tr class="odd"><td><span class="math inline">\(1\)</span> Portfolio</td><td><span class="math inline">\(S\)</span></td><td><span class="math inline">\(S(1+R_P)\)</span></td></tr><tr class="even"><td><span class="math inline">\(h\)</span> Index future</td><td><span class="math inline">\(F\)</span></td><td><span class="math inline">\(F(1+R_M)\)</span></td></tr></tbody></table><p>采取对冲，有效价格为 <span class="math display">\[E=S(1+R_P)+hF-hF(1+R_M)\tag{1}\]</span></p><p>最小化其方差 <span class="math display">\[\begin{align}\min\text{Var}(E)&amp;=\text{Var}(S+SR_P-hFR_M)\\&amp;=S^2\text{Var}(R_P)+h^2F^2\text{Var}(R_M)-2hSF\text{Cov}(R_P,R_M)\\\end{align}\]</span></p><p><span class="math inline">\(R_P\)</span>和<span class="math inline">\(R_M\)</span>是随机变量，根据CAPM模型（或单因子模型）<span class="math display">\[R_P=r_f+\beta(R_M-r_f)+\varepsilon\]</span>这样，随机变量变成了<span class="math inline">\(R_M\)</span>和<span class="math inline">\(\varepsilon\)</span>。继续最小化方差 <span class="math display">\[\begin{align}\min\text{Var}(E)&amp;=S^2\beta^2\text{Var}(R_M)+S^2\text{Var}(\varepsilon)+h^2F^2\text{Var}(R_M)-2hSF\beta\text{Var}(R_M)\\&amp;=F^2\text{Var}(R_M)(h^2-\cfrac{2hSF\beta\text{Var}(R_M)}{F^2\text{Var}(R_M)})+S^2\beta^2\text{Var}(R_M)+S^2\text{Var}(\varepsilon)\\&amp;=F^2\text{Var}(R_M)(h-\beta\cfrac{S}{F})^2-\beta^2S^2\text{Var}(R_M)+S^2\beta^2\text{Var}(R_M)+S^2\text{Var}(\varepsilon)\\\min\rightarrow\text{Var}(E)&amp;=F^2\text{Var}(R_M)(h-\beta\cfrac{S}{F})^2+S^2\text{Var}(\varepsilon)\tag{2}\end{align}\]</span></p><p>所以 <span class="math display">\[h^*=\beta\cfrac{S}{F}\tag{3}\]</span></p><table style="width:6%;"><thead><tr class="header"><th>考虑有效价格的具体值，由(1)得 <span class="math display">\[\begin{align}E&amp;=S(1+R_P)+hF-hF(1+R_M)\\&amp;=S+SR_P-hFR_M\\&amp;=S+S(r_f+\beta(R_M-r_f+\varepsilon))-hFR_M\\&amp;=S(1+r_f)-S\beta r_f+(S\beta-hF)R_M+S\beta\varepsilon\tag{4}\end{align}\]</span></th></tr></thead><tbody><tr class="odd"><td>最后爆算一下Sharpe ratio： %% <span class="math display">\[\max S =\sqrt{\cfrac{\text{Var}(R_M)(1+r_f-\beta r_f)^2+\textE^2(R_M)\text{Var}(\varepsilon)}{2\text{Var}(R_M)\text{Var}(\varepsilon)}}\tag{8}\]</span>%% 此时， <span class="math display">\[h=\cfrac{S}{F}\left(\beta-\cfrac{\text{Var}(\varepsilon)\textE(R_M)}{(1+r_f-\beta r_f)\text{Var}(R_M)}\right)\tag{9}\]</span>在没算错的情况下，<span class="math inline">\(h\)</span>似乎始终大于<span class="math inline">\(h^*\)</span>，即完全对冲并不是最好的选择。</td></tr></tbody></table><p>总结两个结论： 1. 由(5)可得，在完全对冲情况下，<span class="math inline">\(\beta\)</span>较高的股票最终的有效价格反而越低 2.由(9)可得，考虑Sharpe Ratio，则完全对冲始终不是最好的选择。</p>]]></content>
    
    
    <categories>
      
      <category>2024S</category>
      
    </categories>
    
    
    <tags>
      
      <tag>金融工程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2024.03.18 近日杂思</title>
    <link href="/2024/03/18/%E6%9D%82%E6%80%9D/"/>
    <url>/2024/03/18/%E6%9D%82%E6%80%9D/</url>
    
    <content type="html"><![CDATA[<p>好久没有写日记类的文章了，主要是因为又忙又懒。今天依然很忙，但是不能懒了，写点什么记录一下。</p><p>上周，包括这周，都是一堆事。正大杯、大创、盛宣怀杯、就像三座大山压着，还有一个石峰资产杯，也是一座小山。另外，课内的作业和知识也需要复习，随机过程的网课还需要回看。除此之外，还有研究生的事情需要花时间考虑。真可谓亚历山大，唉！</p><p>所以来随意谈论下抗压。人生任何时候都在抗压，没有压力就没有动力，这都是些老生常谈的话了，也是显然的。明日方舟仙术杯里也有抗压位，星际争霸2里也有抗压。抗压意味着高要求和高难度。仙术杯一共六个抗压位，似乎只有半数完成了三四连打的结局，获得了1.5倍加分。这些队伍显然也成为了赛事积分榜的前三名。SC2里抗压打多线，操作别人是顶尖选手的必备技能（lpn大招野人一拳除外）所以抗压确实难，但是一旦成功便可以很不错。</p><p>所以理念一定要对。抗压是一定要抗的，逃避是不行的。而且最好是化为日常，不要搞得很有仪式感，熬个大夜，一点屁用没有，纯弱智。规律作息，相信自己，慢慢来，思想要对。</p><p>前天和绿格的朋友们聚了聚，和同龄人在一起的感觉真的好极了。虽然还是去LaBamba，虽然还是长桌子有点尴尬，但是聊的还是很开心。感觉小团体还是有些排他性，但是真无所谓，大家爱交什么朋友就交什么朋友嘛，这也是很合理的。我还是尽量雨露均沾，毕竟被孤立或者说受冷漠的感觉挺不好的，还是尽量温暖他人。</p><p>晚上和图图姐一起打车回徐汇——我极少叫别人昵称，但是这里为了保护隐私还是说昵称吧，没错我指的是阿尔图罗——结果大概率把伞落在网约车上了。唉！我几乎每次离开某个地方都会回头检查有没有落下什么东西，顺便问一句“东西是不是都带了”，结果就这一次忘了检查，结果就把伞搞丢了。唉！这把伞还是母亲给我买的，几乎是全新的，平常我都没怎么用过，还是天堂伞的牌子，结果就弄丢了。我还没敢和父母讲，怕让他们伤心，唉！这次怎么就没有回头检查呢？这就是心乱了的结果，离谱。</p><p>先写到这吧，希望我能补好作业，并且做到规律作息。天无绝人之路，加油吧~</p><p>P.S. 最近在听Yoasobi的歌，疯狂听，很喜欢，感觉好好听啊！</p><p>P.S. 坚持做长期正确的事，这句话还蛮好的。</p>]]></content>
    
    
    <categories>
      
      <category>日记、杂感与自我批判</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Mind-streaming</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>复权详解</title>
    <link href="/2024/03/06/%E5%A4%8D%E6%9D%83%E8%AF%A6%E8%A7%A3/"/>
    <url>/2024/03/06/%E5%A4%8D%E6%9D%83%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>股票的除权与复权几乎是最基础的数据处理方法。但是考虑到分红、配股、送股、拆细等行为，计算有一定的复杂性。遂写此文，以明晰之。</p><h2 id="csmar数据库分配文件">CSMAR数据库—分配文件</h2><p><a href="https://data.csmar.com/lib/pdfjs/web/viewer.html?file=group1%2FM00%2FAA%2F99%2FCuIKV2XAnKiABeLbAB4nDGC5Ano840.pdf&amp;fname=%E8%82%A1%E7%A5%A8%E5%B8%82%E5%9C%BA%E4%BA%A4%E6%98%93%20%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%B4%E6%98%8E%E4%B9%A6">股票市场交易数据库说明书 (csmar.com)</a></p><h3 id="基础介绍">基础介绍</h3><p>本数据库配股率、送股率、送红利和拆细率计算，举例说明如下： -配股率：若股东每100股可获配30股，此配股率为0.3 -送股率：若股东每100股可获得20股的送股，此送股率为0.2 -红利率：若股东每一股获送0.5元，此红利率为0.5 -拆细率：若股票每一股被拆成100股，则拆细率为100 -股权分置率：若股票每10股送2股，则股权分置率为0.2；若股票每10股缩为8股，则股权分置率为-0.2。</p><ul><li>分配比率为正值代表送股，为负值代表缩股。<ul><li>股权分置公式为：10*（1+分配比率）=分配结果。</li><li>对有送红股同时又有转增股票的，统一为送股类型，即实际送股率为送股率与转增率之和。如股东每100股可获得20股的送股，同时股东每100股获转增30股则在本数据库内送股率为0.5。</li></ul></li></ul><h3 id="符号说明">符号说明</h3><p>CA=现金红利，SD=送红股，RO=配股，DS=拆细，GQ=股权分置，SN=公开增发。</p><h2 id="一些常识">一些常识</h2><ul><li>除权日那天开盘时，股价已经除权了。</li><li>分红是给已有的股东权益，因此先分红，然后再其它操作。</li></ul><h2 id="后复权">后复权</h2><h3 id="原理">原理</h3><p>以除权前的价格为基准，修改除权后的价格。</p><h3 id="目的">目的</h3><p>看在历史某个时刻投入的资金，到今天能够有多少收益。</p><h3 id="核心思想">核心思想</h3><p>交易所展示的价格是每<strong>一股</strong>的价格。</p><h3 id="一个例子">一个例子</h3><p>假设A公司股票将在<span class="math inline">\(T\)</span>日进行分配操作。每一股分红<span class="math inline">\(D\)</span>；每一股送红股<span class="math inline">\(S\)</span>；每一股以<span class="math inline">\(P_R\)</span>价格进行配<span class="math inline">\(R\)</span>股；以<span class="math inline">\(P_O\)</span>价格共公开增发<span class="math inline">\(O\)</span>股；每一股拆细为<span class="math inline">\(K\)</span>股。（不考虑股权分置）</p><p>假设原来的总股本为<span class="math inline">\(N\)</span>，<span class="math inline">\(P^*_T\)</span>为后复权价，<span class="math inline">\(P_T\)</span>为除权价。 <span class="math display">\[\begin{align}&amp;P^*_T\times N - D\times N + P_R\times R+P_O\times O= P_T\times(N(K+S+R)+O)\\&amp;\Rightarrow P_T^*=\cfrac{P_T(N(K+S+R)+O)+DN-P_RR-P_OO}{N}\\&amp;\LeftrightarrowP_T^*=P_T(K+S+R+\cfrac{O}{N})+D-\cfrac{P_RR}{N}-\cfrac{P_OO}{N}\\&amp;\LeftrightarrowP_T^*=P_T(K+S+R+\cfrac{O}{N})+D-P_R\cfrac{R}{N}-P_O\cfrac{O}{N}\end{align}\]</span></p><p>假设原来的股东持有<span class="math inline">\(n\)</span>股，分红用来再投资，但不进行额外投资（配股、增发）<span class="math display">\[n^*=n\times(K+S)+\cfrac{nD}{P_T}\]</span></p><h3 id="细节">细节</h3><p>算收益率的时候，要考虑分红是否再投资，如果再投资，除权后的“一股”价格可能就不是除权前“持有的一股”，因此要进行修正。</p>]]></content>
    
    
    <categories>
      
      <category>2024S</category>
      
    </categories>
    
    
    <tags>
      
      <tag>专题整理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>期权交易常见对冲策略</title>
    <link href="/2024/02/26/%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E5%B8%B8%E8%A7%81%E5%AF%B9%E5%86%B2%E7%AD%96%E7%95%A5/"/>
    <url>/2024/02/26/%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E5%B8%B8%E8%A7%81%E5%AF%B9%E5%86%B2%E7%AD%96%E7%95%A5/</url>
    
    <content type="html"><![CDATA[<p>简介期权交易常见对冲策略，如菜谱。</p><span id="more"></span><h2 id="裸期权的情况">裸期权的情况</h2><p><img src="/2024/02/26/%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E5%B8%B8%E8%A7%81%E5%AF%B9%E5%86%B2%E7%AD%96%E7%95%A5/58113043dd54082b6d63b9e5db2a701.png"></p><h2 id="思考">思考</h2><ul><li>期权对冲的核心是降低风险而非获得收益，这个好像比较关键<ul><li>如何看待套利？</li></ul></li></ul><h3 id="参数表">参数表</h3><table><thead><tr class="header"><th>符号</th><th>说明</th></tr></thead><tbody><tr class="odd"><td><span class="math inline">\(S\)</span></td><td>单位标的物价值</td></tr><tr class="even"><td><span class="math inline">\(K\)</span></td><td>行权价</td></tr><tr class="odd"><td><span class="math inline">\(C\)</span></td><td>看涨期权价格</td></tr><tr class="even"><td><span class="math inline">\(P\)</span></td><td>看跌期权价格</td></tr></tbody></table><h2 id="protective-put-保护看跌期权">Protective Put 保护看跌期权</h2><p>多标的、多认沽期权</p><h3 id="原理">原理</h3><p>为了防止标的物价格下行，<strong>做多</strong>看跌期权进行保护。主C是标的物，标的物越涨，收益越高，无上限。</p><h3 id="一图流">一图流</h3><p><img src="/2024/02/26/%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E5%B8%B8%E8%A7%81%E5%AF%B9%E5%86%B2%E7%AD%96%E7%95%A5/b9fd4d7bee874f87013e00b2323303c.png"></p><h2 id="covered-call-备兑保看涨期权">Covered Call备兑（保）看涨期权</h2><p>多标的、空认购期权</p><h3 id="原理-1">原理</h3><p>为了防止标的物价格下行，<strong>做空</strong>看涨期权进行保护。主T是标的物，标的物越跌，收益越低，有下限。</p><h3 id="一图流-1">一图流</h3><p><img src="/2024/02/26/%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E5%B8%B8%E8%A7%81%E5%AF%B9%E5%86%B2%E7%AD%96%E7%95%A5/c7da281c275ba7f3d9c90e3dadeb463.png"></p><h2 id="bull-call-spread-牛市看涨期权差价">Bull Call Spread牛市看涨期权差价</h2><p>多行权价低的认购期权、空行权价高的认购期权</p><h3 id="原理-2">原理</h3><p>仍然是希望标的上行逻辑，但是不用实际交易标的，且收益有界。主C是两个合约的行权价差。价差越大，<strong>牛市</strong>赚得越多。</p><h4 id="收益表">收益表</h4><p><span class="math display">\[K_1&lt;K_2\RightarrowC_1&gt;C_2\]</span></p><table><thead><tr class="header"><th>S</th><th>Long call</th><th>Short call</th><th>Total Payoff</th></tr></thead><tbody><tr class="odd"><td><span class="math inline">\(S_T \leq K_1\)</span></td><td><span class="math inline">\(-C_1\)</span></td><td><span class="math inline">\(C_2\)</span></td><td><span class="math inline">\(-(C_1-C_2)\)</span></td></tr><tr class="even"><td><span class="math inline">\(K_1&lt;S_T&lt;K_2\)</span></td><td><span class="math inline">\(S_T-K_1-C_1\)</span></td><td><span class="math inline">\(C_2\)</span></td><td><span class="math inline">\(S_T-K_1-(C_1-C_2)\)</span></td></tr><tr class="odd"><td><span class="math inline">\(K_2\leq S_T\)</span></td><td><span class="math inline">\(S_T-K_1-C_1\)</span></td><td><span class="math inline">\(-(S_T-K_2)+C_2\)</span></td><td><span class="math inline">\(K_2-K_1-(C_1-C_2)\)</span></td></tr></tbody></table><h3 id="一图流-2">一图流</h3><p><img src="/2024/02/26/%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E5%B8%B8%E8%A7%81%E5%AF%B9%E5%86%B2%E7%AD%96%E7%95%A5/b8ea203ebfe7a50e61b55182ca6f3ca.png"></p><h2 id="bull-put-spread-牛市看跌期权差价">Bull Put Spread牛市看跌期权差价</h2><p>多行权价低的认沽期权、空行权价高的认沽期权</p><h3 id="原理-3">原理</h3><p>和上面类似。希望标的上行，不用实际交易标的，且收益有界。主T是两个合约的行权价差。价差越大，<strong>熊市</strong>亏得越多。收益确定。</p><h4 id="收益表-1">收益表</h4><p><span class="math display">\[K_1&lt;K_2\RightarrowP_1&lt;P_2\]</span></p><table><thead><tr class="header"><th>S</th><th>Long put</th><th>Short put</th><th>Total Payoff</th></tr></thead><tbody><tr class="odd"><td><span class="math inline">\(S_T \leq K_1\)</span></td><td><span class="math inline">\(K_1-S_T-P_1\)</span></td><td><span class="math inline">\(-(K_2-S_T)+P_2\)</span></td><td><span class="math inline">\(K_1-K_2+P_2-P_1\)</span></td></tr><tr class="even"><td><span class="math inline">\(K_1&lt;S_T&lt;K_2\)</span></td><td><span class="math inline">\(-P_1\)</span></td><td><span class="math inline">\(-(K_2-S_T)+P_2\)</span></td><td><span class="math inline">\(S_T-K_2+P_2-P_1\)</span></td></tr><tr class="odd"><td><span class="math inline">\(K_2\leq S_T\)</span></td><td><span class="math inline">\(-P_1\)</span></td><td><span class="math inline">\(P_2\)</span></td><td><span class="math inline">\(P_2-P_1\)</span></td></tr></tbody></table><h3 id="一图流-3">一图流</h3><p><img src="/2024/02/26/%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E5%B8%B8%E8%A7%81%E5%AF%B9%E5%86%B2%E7%AD%96%E7%95%A5/3c4f4cce0cd6d31b80e8b1f577d9db8.png"></p><h2 id="bear-call-spread-熊市看涨期权差价">Bear Call Spread熊市看涨期权差价</h2><p>多行权价高的认购期权、空行权价低的认购期权</p><h3 id="原理-4">原理</h3><p>和上面类似，但是希望标的下行。主T是两个合约的行权价差。价差越大，<strong>牛市</strong>亏得越多。收益确定。</p><h4 id="收益表-2">收益表</h4><p><span class="math display">\[K_1&lt;K_2\RightarrowC_1&gt;C_2\]</span></p><table><thead><tr class="header"><th>S</th><th>Short call</th><th>Long call</th><th>Total Payoff</th></tr></thead><tbody><tr class="odd"><td><span class="math inline">\(S_T \leq K_1\)</span></td><td><span class="math inline">\(C_1\)</span></td><td><span class="math inline">\(-C_2\)</span></td><td><span class="math inline">\(C_1-C_2\)</span></td></tr><tr class="even"><td><span class="math inline">\(K_1&lt;S_T&lt;K_2\)</span></td><td><span class="math inline">\(C_1-(S_T-K_1)\)</span></td><td><span class="math inline">\(-C_2\)</span></td><td><span class="math inline">\(K_1-S_T+C_1-C_2\)</span></td></tr><tr class="odd"><td><span class="math inline">\(K_2\leq S_T\)</span></td><td><span class="math inline">\(C_1-(S_T-K_1)\)</span></td><td><span class="math inline">\(-C_2+(S_T-K_2)\)</span></td><td><span class="math inline">\(K_1-K_2+C_1-C_2\)</span></td></tr></tbody></table><h3 id="一图流-4">一图流</h3><p><img src="/2024/02/26/%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E5%B8%B8%E8%A7%81%E5%AF%B9%E5%86%B2%E7%AD%96%E7%95%A5/793686c00b06100d7750fa3f77a4f80.png"></p><h2 id="bear-put-spread-熊市看跌期权差价">Bear Put Spread熊市看跌期权差价</h2><p>多行权价高的认沽期权、空行权价低的认沽期权</p><h3 id="原理-5">原理</h3><p>和上面类似，但是希望标的下行。主C是两个合约的行权价差。价差越大，<strong>熊市</strong>赚得越多。</p><h4 id="收益表-3">收益表</h4><p><span class="math display">\[K_1&lt;K_2\RightarrowP_1&lt;P_2\]</span></p><table><thead><tr class="header"><th>S</th><th>Short put</th><th>Long put</th><th>Total Payoff</th></tr></thead><tbody><tr class="odd"><td><span class="math inline">\(S_T \leq K_1\)</span></td><td><span class="math inline">\(P_1-(K_1-S_T)\)</span></td><td><span class="math inline">\(K_2-S_T-P_2\)</span></td><td><span class="math inline">\(K_2-K_1-(P_2-P_1)\)</span></td></tr><tr class="even"><td><span class="math inline">\(K_1&lt;S_T&lt;K_2\)</span></td><td><span class="math inline">\(P_1\)</span></td><td><span class="math inline">\(K_2-S_T-P_2\)</span></td><td><span class="math inline">\(K_2-S_T-(P_2-P_1)\)</span></td></tr><tr class="odd"><td><span class="math inline">\(K_2\leq S_T\)</span></td><td><span class="math inline">\(P_1\)</span></td><td><span class="math inline">\(-P_2\)</span></td><td><span class="math inline">\(-(P_2-P_1)\)</span></td></tr></tbody></table><h3 id="一图流-5">一图流</h3><p><img src="/2024/02/26/%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E5%B8%B8%E8%A7%81%E5%AF%B9%E5%86%B2%E7%AD%96%E7%95%A5/1cb1052d14f9e4b37bc628b8439ed19.png"></p><h2 id="butterfly-spread-蝶式差价put">Butterfly Spread蝶式差价（Put）</h2><p>（以认沽期权为例，认购期权也是一样，从图片上看左右颠倒一下）多两头认沽期权，空两份中间认沽期权</p><h3 id="原理-6">原理</h3><p>希望标的物价格保持在中间行权价附近，从而获利。亏损有限。两头行权价差越大，<strong>中间行权价</strong>时赚得越多。</p><h4 id="收益表-4">收益表</h4><p><span class="math display">\[K_1&lt;K_2=\cfrac{K_1+K_3}{2}&lt;K_3\RightarrowP_1&lt;P_2&lt;P_3\]</span></p><table><thead><tr class="header"><th>S</th><th>1 Long put</th><th>2 Short put</th><th>1 Long put</th><th>Total Payoff</th></tr></thead><tbody><tr class="odd"><td><span class="math inline">\(S_T\leq K_1\)</span></td><td><span class="math inline">\(K_1-S_T-P_1\)</span></td><td><span class="math inline">\(2(P_2-(K_2-S_T))\)</span></td><td><span class="math inline">\(K_3-S_T-P_3\)</span></td><td><span class="math inline">\(2P_2-P_1-P_3\)</span></td></tr><tr class="even"><td><span class="math inline">\(K_1&lt;S_T&lt;K_2\)</span></td><td><span class="math inline">\(-P_1\)</span></td><td><span class="math inline">\(2(P_2-(K_2-S_T))\)</span></td><td><span class="math inline">\(K_3-S_T-P_3\)</span></td><td><span class="math inline">\(-(K_1-S_T)+(2P_2-P_1-P_3)\)</span></td></tr><tr class="odd"><td><span class="math inline">\(S_T=K_2\)</span></td><td><span class="math inline">\(-P_1\)</span></td><td><span class="math inline">\(2P_2\)</span></td><td><span class="math inline">\(K_3-S_T-P_3\)</span></td><td><span class="math inline">\(\cfrac{K_3-K_1}{2}+(2P_2-P_1-P_3)\)</span></td></tr><tr class="even"><td><span class="math inline">\(K_2&lt;S_T&lt;K_3\)</span></td><td><span class="math inline">\(-P_1\)</span></td><td><span class="math inline">\(2P_2\)</span></td><td><span class="math inline">\(K_3-S_T-P_3\)</span></td><td><span class="math inline">\((K_3-S_T)+(2P_2-P_1-P_3)\)</span></td></tr><tr class="odd"><td><span class="math inline">\(K_3\leq S_T\)</span></td><td><span class="math inline">\(-P_1\)</span></td><td><span class="math inline">\(2P_2\)</span></td><td><span class="math inline">\(-P_3\)</span></td><td><span class="math inline">\(2P_2-P_1-P_3\)</span></td></tr></tbody></table><h3 id="一图流-6">一图流</h3><p>图片上书写错误，应该不是Call而是Put <img src="/2024/02/26/%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E5%B8%B8%E8%A7%81%E5%AF%B9%E5%86%B2%E7%AD%96%E7%95%A5/215ce70717bddeda1379f850349339c.png"></p><h2 id="calendar-spread-日历差价call">Calendar Spread日历差价（Call）</h2><p>多长期限认购期权、空短期限相同参数认购期权</p><h3 id="原理-7">原理</h3><p>靠时间价值赚钱。期权价格=内在价值+时间价值，内在价值相互对冲抵消，时间价值产生利润。</p><h3 id="一图流-7">一图流</h3><p><img src="/2024/02/26/%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E5%B8%B8%E8%A7%81%E5%AF%B9%E5%86%B2%E7%AD%96%E7%95%A5/eb4626dd3e9369bdf3c09d05bad82d7.png"></p><h2 id="calendar-spread-日历差价put">Calendar Spread日历差价（Put）</h2><p>多长期限认沽期权、空短期限相同参数认沽期权</p><h3 id="一图流-8">一图流</h3><p><img src="/2024/02/26/%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E5%B8%B8%E8%A7%81%E5%AF%B9%E5%86%B2%E7%AD%96%E7%95%A5/d140f53270326d027134de169fe483c.png"></p><h2 id="straddle-跨式组合相对strangle">Straddle跨式组合（相对Strangle）</h2><p>购买相同参数的认购、认沽期权组合</p><h3 id="原理-8">原理</h3><p>操作有点抽象，但是就是赚价格偏离行权价太多的时候的期权费。</p><h3 id="一图流-9">一图流</h3><p><img src="/2024/02/26/%E6%9C%9F%E6%9D%83%E4%BA%A4%E6%98%93%E5%B8%B8%E8%A7%81%E5%AF%B9%E5%86%B2%E7%AD%96%E7%95%A5/408cc5a38e1cadbb807b23b87d6f1e1.png"></p><h2 id="参考资料">参考资料</h2><ul><li>ECON3509-01金融工程学课程讲义，授课人是宋颖达老师</li><li>互联网上相关大佬资料，恕不一一致谢</li></ul>]]></content>
    
    
    <categories>
      
      <category>2024S</category>
      
    </categories>
    
    
    <tags>
      
      <tag>专题整理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>天道酬勤</title>
    <link href="/2023/12/02/%E5%A4%A9%E9%81%93%E9%85%AC%E5%8B%A4/"/>
    <url>/2023/12/02/%E5%A4%A9%E9%81%93%E9%85%AC%E5%8B%A4/</url>
    
    <content type="html"><![CDATA[<p>李培楠夺冠的故事将永远激励着我。0.37%的夺冠概率，赛前仅80分的评分，没有什么是不可能的。</p><span id="more"></span><p><img src="/2023/12/02/%E5%A4%A9%E9%81%93%E9%85%AC%E5%8B%A4/98c30ec0e96367a21b6e5d59e8962d2.png"></p><blockquote><p>I want to say English to everyone like, even you still are normalpeople, you still can work the world champion and no one trust you!</p></blockquote><blockquote><p>“你看我都夺冠了，真的没有什么事情是不可能的。”</p></blockquote><div class="bilibili"><iframe src="//player.bilibili.com/player.html?aid=394348911&amp;bvid=BV1Ro4y1v7up&amp;cid=1005469189&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe></div><p>附NGA老哥听译夺冠采访全文（改）：</p><p>Smix: You said this felt like a dream, but you are not waking upbecause I have to tell you something, you are the Intel Extreme Master’sworld champion!</p><p>Oliviera: I mean, like so many people sometime tell me like, youshould finish your Starcraft2, you should retire and maybe like youshould give up. But look at me know. (laugh)</p><p>Smix: Truly such an inspiration. You have fought so hard. This is thebest run that we have ever seen. You were 2 and 3 in the group stage.You said to yourself you did not expect to even make it out of groups.And then you went on to make the playoffs for the very first time. Youhad to take down Reynor. And then you had to take down herO. And now youjust took down a five time GSL champion to become the world champion!What does this mean for you?</p><p>Oliviera: I mean, I just want to tell us like you don’t need a GSLchampion, you don’t need like, ESL champion. I think I’m just like anormal man. Yeah I mean, I just practice very hard. Just time. Everydaylike twelve hours, fifteen hours, so much time. And you know I playedStarcraft pro game already 8 years right? I think so. And I neverthought I can be a world champion. Even now, I’m afraid maybe tomorrow Iwake up, it’s like a dream. (laugh) (applause cheers)</p><p>Smix: I think we can all agree this is why we love esports and thisis why we love Starcraft2. I’m gonna ask one quick question about thegames because, when I talked you about Maru, and you said, yeah I doplay and practice with him a lot and I lose a lot, but I also lost a lotagainst hero in practice and look what I did? Maybe a miracle canhappen. How did you prepare against Maru especially considering youpracticed against him so much. Is there something specific you plan forevery map?</p><p>Oliviera: Like I mean when start the grand final, I just tell myselfit doesn’t matter. Like you are world champion or maybe not worldchampion. I just love Starcraft2. And I enjoy this game. (cheers) Andyeah I'm enjoying on stage, playing Starcraft2. I love esport. And thankyou everyone to coming for watch. Who knows, I can be the worldchampion. I mean, I don’t know how to say, I’m so happy.(Cheers)</p><p>Smix: Time, I want to give you one last opportunity to say anythingyou want to your family, your friends, your fans watching online, thefans here in Poland. Anything you want to say?</p><p>Oliviera: So I want to, em, thank you for everyone, like you guysshow me that Starcraft2 is not deadgame. (Laugh) There are so manypeople! So many people to watch. And I complete my dream, I mean, evenit still feels not truth. But I want to say my family, use English anduse Chinese. And I want to use English first. I want to thank my dad.Like last time, I lose ESL Atlanta, like 0-3, um like 0-6, like no onegame won. And my father just tell me don’t give up. You are always thebest player in my heart. (Cheers) I want to say you guys thank you somuch for watching. My English is not very well but thank you so much!(Cheers) And I want to say some Chinese to my Chinese fans because nowso many Chinese people are still watching, it's already 5 a.m. I thinkso.我想对现在还在看直播的观众朋友们说，其实没有什么事情是不可能的，我都拿到世界冠军了，真的没有什么事情是不可能的。（哭腔）我觉得，我等到这个世界冠军太久了。我去年，去年真的很难，我上一次0-6输的时候我觉得星际争霸对我来说已经结束了，但是从上一次我一直告诉我自己，我可以再多练习，我可以再多练习，如果有一天真的拿到世界冠军了，或许可以证明，证明给大家。Inow want to say English to everyone like, even you still are normalpeople, you still can work the world champion and no one trust you.(哭腔)(欢呼)</p><p>Smix: Katowice give it up one last time for your Intel ExtremeMasters world champion, he is Oilviera! (Cheers) (全场高呼Oliviera)(李培楠捧杯)</p><p>李培楠夺冠的时候，应该是今年的2月初，上学期刚开始。当时，我也开始运营我的这个博客，直到现在。当时最初的几个月，我还经常用他激励自己，想着一定要把这件事情整理进网站，不过一直在拖延。这似乎也是我整个2023的缩影，一会打鸡血，一会又疯狂拖延，导致很多事情都没有做，整个大二的成绩也不是很理想。今天是2023年12月3日刚过0点，离期末考试又只有一个月了，这学期还是保研的关键学期，成绩非常重要。而最近我似乎又出现了怠惰的迹象。</p><p>希望李少的事迹能够一直激励我！关键还是要磨练出自己的心智，一定要坚持、努力，天道酬勤！</p><p><img src="/2023/12/02/%E5%A4%A9%E9%81%93%E9%85%AC%E5%8B%A4/fb289fd95e4c6391305ce580323b00f.png"></p>]]></content>
    
    
    <categories>
      
      <category>日记、杂感与自我批判</category>
      
    </categories>
    
    
    <tags>
      
      <tag>碎碎念</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2023.10.22 一道二叉查找树编程题</title>
    <link href="/2023/10/21/%E4%B8%80%E9%81%93%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E7%BC%96%E7%A8%8B%E9%A2%98/"/>
    <url>/2023/10/21/%E4%B8%80%E9%81%93%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E7%BC%96%E7%A8%8B%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>我花了7个小时，做了一道不是作业题的编程题</p><span id="more"></span><p>今天下午4点半，我在图书馆开始看同学给的一道编程题。题目不难，补全二叉查找树的代码，思路也早就有，我想着5点前应该能差不多写完，再去吃晚饭，晚上再写公司金融的作业，美滋滋。</p><p>花了十几分钟写完代码，我发现问题没那么简单。老师给的案例是假的，根本不用排序。直接生成的二叉树就符合题意，真的是阴险。python程序代码老是报错，我开始高强度查网络资料。调代码，越调越精神。时间早过了5点了，要不就晚点吃饭，一鼓作气把这个代码写完再说。</p><p>大概调了一个小时，我发现不对劲了，这python的形参不能像cpp一样传给实参，真的逆天。<img src="/2023/10/21/%E4%B8%80%E9%81%93%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E7%BC%96%E7%A8%8B%E9%A2%98/23f66d62809fae1ba6f052ad034fbef.png" alt="我向最好的硕神求助，他很猛，而且有求必应"></p><p>补充一下我需要解决的问题。我需要写一个insert函数，把值添加进二叉树里。但是二叉树在函数外面，不能直接通过函数修改。</p><p>然后我狂上网搜怎么传递参数，大概半个小时后，决定换一个方法，看看python有没有什么类似指针的东西。但是还是无功而返。又过了半个小时，我有点绷不住了，想看看网上人家怎么写二叉树的，怎么解决这个问题的。但是人家的思路和架构和老师给的完全不一样，我大脑高速运转，根本看不进去，而且也没有什么可以借鉴的东西，最后还是决定自己写吧。</p><p>大概晚上7点半，我想了半天，还是想看看python有没有指针啥的，不然太逆天了。半个小时后，我得出结论，cpp才是世界上最好的编程语言。还得出结论，思考问题而不愿意吃饭是完全可能的。</p><p>又过了半个小时，我转变了思路，想在函数外设置一个定位的变量，然后通过这个变量同步函数和树的处理位置，达到函数修改树的目的。于是我开始搜索学习命名空间的知识。</p><p>这个问题实际上我完全可以不去做。本身这只是同学问我的题目，而且我也没有这门课。但不知怎么的，我偏偏要和它死磕到底，强烈心理暗示：如果不做出来这题，我会没有心思做其它的任何事情。</p><p>搞了半个小时没搞出来，而图书馆9点钟关门，开始催人清场了。这几个小时，我一直在不停研究python里的函数形参和实参，处理的又是自定义的Node数据结构，甚至还研究了内存位置，想看看到底怎么把它们搞出来，晚饭一直都没有吃。</p><p>整理书包走回宿舍的过程中，我还在思考locals()和globals()命名空间的东西。但是确实有点饿。本来打算回宿舍再点外卖，但是这样耽误了来回拿外卖的时间。刚好回去路上路过一家罗森，我就决定买了一盒盒饭（但实际上是小龙虾味拌面），17元，带回宿舍吃，很方便。罗森9点关门，我刚好8点55买的饭，运气真的很不错。</p><p>罗森到宿舍还有一段距离，我端着温热的没开封的拌面在寒冷的天气里一路走，边走边整理了目前问题的几种思路、可能的解决方案和可能遇到的困难。到宿舍之后，我饿极了，直接开吃，并打开b站刷起了视频。</p><p>刷了大概一个小时，晚上10点了。我下定决心，今天怎么说也得把它做出来。然后我顺着前面整理的思路，又搜了搜资料。这下运气太好了，我找到了exec()和eval()函数。这两个函数有戏，我花了大概一个小时学习它们，又花了一个小时调试我的代码。终于在12点不到把这题解决了，无敌。</p><p>程序正确输出的时候，我激动得大喊大叫，还好宿舍里只有另一位舍友。虽然这个程序的意义没有上次那个脚本那么大，但我还是很高兴。我连忙把问题发给了硕神，因为知道他肯定会秒，所以特地留在我写出来之后问他。我又把结果发给了问我问题的那个同学。我说我做了7个小时，啥也没干就硬刚这道题。他说：“你那是自己有兴趣才写的。”</p><p>有兴趣吗？其实也不一定算得上。我只是很想做这道题，很想把它做出来。在4点半的时候，我就知道我一定能写出来的。7点的时候，我想如果没把这道题写出来，我今天晚上做什么事都没法好好做，虽然反复提醒自己沉没成本不是成本。10点的时候，我说如果我能做出来这道题，我就能克服很多看似难以克服的困难。12点，我终于把它做出来了。</p><p>回顾今天，我花了7个小时做一道简单的编程题。这个题非常基础，基本上计算机系的同学都会做，而且很快。但我却花了7个小时。实际上，我这么固执，也是想证明给自己看，我真的不是一个功利的人，我能够努力和专注到什么程度。这真的很重要。我把这段经历记录下来，希望未来自己也能有花7小时做一道无关紧要的简单题目的勇气和决心。</p><p>以下是珍贵作战记录： <img src="/2023/10/21/%E4%B8%80%E9%81%93%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E7%BC%96%E7%A8%8B%E9%A2%98/42c6a565e3fd674623f620884536a03.png"> <img src="/2023/10/21/%E4%B8%80%E9%81%93%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E7%BC%96%E7%A8%8B%E9%A2%98/8ef9c055bc5d7b01b43b371615df7a8.png"> <img src="/2023/10/21/%E4%B8%80%E9%81%93%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E7%BC%96%E7%A8%8B%E9%A2%98/d6c3fca55e06da2a95f2ef37a0b32a1.png"><img src="/2023/10/21/%E4%B8%80%E9%81%93%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91%E7%BC%96%E7%A8%8B%E9%A2%98/1093e47edf25831a8e16f82cf962565.png"></p>]]></content>
    
    
    <categories>
      
      <category>日记、杂感与自我批判</category>
      
    </categories>
    
    
    <tags>
      
      <tag>碎碎念</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>几道简单逻辑题</title>
    <link href="/2023/10/13/%E5%87%A0%E9%81%93%E7%AE%80%E5%8D%95%E9%80%BB%E8%BE%91%E9%A2%98/"/>
    <url>/2023/10/13/%E5%87%A0%E9%81%93%E7%AE%80%E5%8D%95%E9%80%BB%E8%BE%91%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>In (1-5), which inferences are correct? Give a proof (using inferencerules of PL and FOL) for each correct inference. <span id="more"></span></p><h2 id="section">1</h2><p><span class="math inline">\(A\rightarrow C\Rightarrow A\rightarrowB\rightarrow C\)</span></p><p>正确：因为<span class="math inline">\(A\rightarrowC\)</span>为T，右边恒为T</p><h2 id="section-1">2</h2><p><span class="math inline">\(\lnot(P\land\lnot Q),\lnot Q \lorR\Rightarrow P\lor R\)</span> <span class="math inline">\(\Leftrightarrow P\rightarrow Q,Q\rightarrowR\Rightarrow P\lor R\)</span></p><p>错误：若R为F，则Q为F，P为F，左边为T，右边为F，<span class="math inline">\(T\Rightarrow F\)</span>错误</p><h2 id="section-2">3</h2><p><span class="math inline">\(\forall x(Ax\rightarrow B),\lnot\forallx(Ax\rightarrow\lnot Cx)\Rightarrow B\)</span></p><p><span class="math display">\[\begin{align}&amp;(1)(UD)\ \ \ \ \forall x(Ax\rightarrow B)\Rightarrow \forallxAx\rightarrow B\\&amp;(2)(UD)\ \ \ \ \lnot\forall x(Ax\rightarrow\lnot Cx)\Rightarrow\lnot(\forall x Ax\rightarrow\forall x \lnot Cx)\\&amp;(3)(MI)\ \ \ \ \Leftrightarrow\lnot(\lnot\forall xAx\lor\forallx\lnot Cx)\\&amp;(4)(DMD)\ \ \ \ \Leftrightarrow\forall xAx\land\lnot\forall x\lnotCx\\&amp;(5)(DMU)\ \ \ \ \Leftrightarrow\forall xAx\land\exists xCx\\&amp;因为(5)为T，所以\forall xAx为T，所以原命题\Leftrightarrow\\&amp;(6)(MP)\forall xAx\rightarrow B, \forall xAx\Rightarrow B,成立\end{align}\]</span></p><h2 id="section-3">4</h2><p><span class="math inline">\(A,\lnot\exists x(Bx\land\lnotCx),\lnot\exists x(A\land \lnot Bx)\Rightarrow\exists xCx\)</span></p><p><span class="math display">\[\begin{align}&amp;(1)(DME)\ \ \ \ \lnot\exists x(Bx\land\lnotCx)\Leftrightarrow\forall x(\lnot Bx\lor Cx)\\&amp;(2)(MI)\ \ \ \ \Leftrightarrow\forall x(Bx\rightarrow Cx)\\&amp;(3)(UD)\ \ \ \ \Rightarrow\forall xBx\rightarrow\forall xCx\\&amp;(4)类似(2)(3)\ \ \ \ \lnot\exists x(A\land\lnot Bx)\LeftrightarrowA\rightarrow\forall xBx\\&amp;(5)(MP)\ \ \ \ A,A\rightarrow\forall xBx,\forallxBx\rightarrow\forall xCx\Rightarrow\forall xCx\\&amp;(6)(S3T3)\Rightarrow\exists xCx,成立\end{align}\]</span></p><h2 id="section-4">5</h2><p><span class="math inline">\(\forall xAx,\lnot\exists x(\lnot Ax\landBx),Bt\Rightarrow C\)</span></p><p><span class="math display">\[\begin{align}&amp;(DME)\ \ \ \ \lnot\exists x(\lnot Ax\land Bx)\Leftrightarrow\forallx(Bx\rightarrow Ax)\\&amp;所以左式\Leftrightarrow\forall xAx, \forall x(Bx\rightarrowAx),Bt\\&amp;取x=t,左式为T,而C可能为F,所以T\Rightarrow F不成立\\&amp;若C恒为T，则无论左式是T还是F，命题必然恒成立\end{align}\]</span></p><h2 id="补充">补充</h2><p>Material Implication (MI): <span class="math inline">\(P\rightarrowQ\Leftrightarrow \lnot P\lor Q\)</span></p><table><thead><tr class="header"><th>P</th><th>Q</th><th><span class="math inline">\(P\rightarrow Q\)</span></th></tr></thead><tbody><tr class="odd"><td>T</td><td>T</td><td>T</td></tr><tr class="even"><td>T</td><td>F</td><td>F</td></tr><tr class="odd"><td>F</td><td>T</td><td>T</td></tr><tr class="even"><td>F</td><td>F</td><td>T</td></tr></tbody></table><p><span class="math display">\[\begin{align}\forall x(Ax\lor\lnot Bx)\\\Leftrightarrow \forall x(\lnot Ax\rightarrow \lnot Bx)\\\textcolor{red}{\Rightarrow} \forall x\lnot Ax\rightarrow\forall x\lnotBx\\\Leftrightarrow\exists xBx\rightarrow\exists xAx\ \ \ \ (*)\\\\\forall x(\lnot Bx\lor Ax)\\\Leftrightarrow\forall x(Bx\rightarrow Ax)\\\textcolor{red}{\Rightarrow}\forall xBx\rightarrow\forall xAx\\\Leftrightarrow\lnot\forall xAx\rightarrow\lnot\forall xBx\\\Leftrightarrow\forall xBx\rightarrow\forall xAx\ \ \ \ (**)\end{align}\]</span></p>]]></content>
    
    
    <categories>
      
      <category>哲学</category>
      
    </categories>
    
    
    <tags>
      
      <tag>逻辑学</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Loyal to the beat</title>
    <link href="/2023/09/27/Loyal%20to%20the%20beat/"/>
    <url>/2023/09/27/Loyal%20to%20the%20beat/</url>
    
    <content type="html"><![CDATA[<blockquote><p>他就是规则，他就是常识。</p><p>他不是先锋，他已是顶峰。</p><p>王座上的灵魂，时代的象征。</p><p>《Loyal to the beat》，凯旋如约而至，请做好觉悟，高举金话筒——</p></blockquote><span id="more"></span><p><a href="https://monster-siren.hypergryph.com/music/048746">塞壬唱片- A WORLD FAMILIARLY UNKNOWN (hypergryph.com)</a></p><p>Yeah, It's the Emperor y'all, uh 大帝降临</p><p>Don't start with me I'll bring an end to all 莫搞事情 全场镇静</p><p>Uh, Uh-huh, Uh, yeah, listen 乖乖听令</p><p>You better kneel to the Boss 天下归心</p><p>(Uh-hmm)</p><p>I ain't come to play, I just come to slay 我从不花拳绣腿我必将横扫全场</p><p>Best believe today's your lucky day, once I touch the stage (uh-hmm)待我登台 请尽情享受我的光芒</p><p>Top spot forever, bruh that number never fluctuates 遥遥领先 兄弟数字从不撒谎</p><p>Hottest thing alive when I shine I set the sun ablaze 炙手可热烈日也要稍稍靠旁</p><p>Make the Winter season feel like Summer days 冰冷季节我会让你心中发烫</p><p>Forward 'cause there ain't no other way, no matter what awaits(uh-hmm) 莫问前路 只因无人能够阻挡</p><p>I am unafraid, I'll never runaway 我向来无惧 从不逃避</p><p>Best to do it, done it, did it, flipped it 'bout a hundred ways千百种方式 我不挑剔</p><p>I'm just saying... 无心之言 这就是大帝</p><p>Right?! I'm a winner bruh, you never equipped to win the fight我从无败绩 你毫无取胜之机</p><p>Against the Emperor, listen up are you men or mice? 想抵抗大帝还不快快掂量自己</p><p>I'm the pinnacle, quite formidable. Never seen the likes 无可匹敌巅峰的感觉多么孤寂</p><p>Of originals, making miracles, Y'all don't see the light?! 诞生自奇迹光芒不容置疑</p><p>Y'all got your eyes closed. Off into my zone 现在闭上双眼欢迎来到我的世界</p><p>Fly like a meteor, I'm in the media, they want to be up in my throne闪耀的流星 头条的宠儿 我的地位他们想要改写</p><p>Ride in the whip, yall gotta quit, got all of this on my own 迅猛出击统统出局 我掌握一切</p><p>Tryin' to hit me up on my phone, all that they get is the dial tone与我联系 明知结局 话筒忙音不灭</p><p>Take it all til there's nothing's left, that's just how you get itright 妄图追赶 还是徒劳无功</p><p>Yeah, they dying to be me, it's no wonder that they can't get a life挖空心思 自己的人生却未完工</p><p>Every time that they see me trying to eat off me like parasites如影随形 他们就像那寄生虫</p><p>No surprise. Only room at the top for one so step aside 意料之中王者只有一位 他们无此殊荣</p><p>This is Big E, get me, these posers are merely lowercase 大帝在此听我说 这些就是小打小闹 装腔作势</p><p>Out of this world, at a loss for words, you don't clearly know yourplace 语无伦次 搞不清主次 请认清你的位置</p><p>I put it down plain, I'm in the fast lane moving at a tortoise pace开诚布公 快车道上就我最巴适</p><p>So unbothered I got a permanent poker face, enjoy the race (Yeah)波澜不惊 摆上臭脸 开始享受赛事</p><p>I ain't come to play, I just come to slay 我从不花拳绣腿我必将横扫全场</p><p>Best believe today's your lucky day, once I touch the stage (uh-hmm)待我登台 请尽情享受我的光芒</p><p>Still number one, bruh these numbers never fluctuate 仍居榜首 兄弟数字从不撒谎</p><p>Put your drive to the test, see me, better pump your breaks 别说张狂试试你的加速度 怕你油门踩断也跟不上</p><p>Crew got more runners than the Summer games 参赛者众更胜那夏季至尊赛场</p><p>Forward 'cause there ain't no other way, no matter what it takes(uh-hmm) 莫问前路 只因无人能够阻挡</p><p>I am unafraid, I'll never runaway 我向来无惧 从不逃避</p><p>Best to do it, done it, did it, flipped it 'bout a hundred ways千百种方式 我不挑剔</p><p>I'm just saying… 无心之言 这就是大帝</p><p>Though! Yo! You dealing with a pro! (Oh) 尽管如此 记住你面前站着的是专业人士</p><p>Had to let'em know (Oh) They get ate like Ocho (uh hmm) 弱肉强食他们要认清现实</p><p>Don't make me embarrass you, keep that on the low low 低调做事给自己留点面子</p><p>P.L. crew up in this piece and your crew is a no show 企鹅物流到达你们已成为过去式</p><p>Loco, testing me and li'l homie solo 我与我的兄弟 随疯子你测试</p><p>Legend in the streets, on the mic a virtuoso 我是街头的传奇麦克风上的大师</p><p>They say that they're ready, for their sake, I really hope so对手说准备就绪 只能说希望如此</p><p>Out here making history you better snap a photo 记得按下快门见证历史</p><p>Fakers out here hating on me they don't want this work 黑子们咬牙切齿想要让我无法继续</p><p>Trying to knock me off the throne but your boy been known to swerve艳羡我的宝座 却不见自己大势已去</p><p>Wanna off me just get on but these peons are absurd 蠢蠢欲动在我眼里却是不可理喻</p><p>Ambitions of ascension but I keep their dreams deferred 野心勃勃梦想却只成为一场闹剧</p><p>Wanna knock me off the top but I'm laughing while they're reaching谋取我的宝座？笑看他们出师不利</p><p>I will never stop shining down on them like beacons 我如灯塔光芒普照四周</p><p>Grinding thru the weekend and I don't need a reason 不断磨练我不需要理由</p><p>Full throttle is my motto 'til I'm riding off the deep end 全速前进贯彻到底 直至坠入深沟</p><p>Doubt you want a problem, but keep on talking then it's bout to be你的自我诘问 是庸人自扰</p><p>They said the sky's the limit but they lied 'cause ain't no toppingme 他们说天是极限 但我说胡说八道</p><p>(Yeah) You ain't as live as me. How can there be a rivalry?你想与我比肩 这毫无可行性</p><p>Loneliest at the top you see I'm enjoying my privacy 高处不胜寒让我享受片刻清净</p><p>I am feeling so fresh (Yeah!) worked to be the best (Yeah!) 感觉良好我必全力以赴</p><p>Workin hard and playing hard and I don't need no rest (Yeah!)劳逸结合 从未停下脚步</p><p>Livin' like a King nothing but winners on my team (Yeah!) 我是国王胜者都将臣服于我朝堂</p><p>Going hard I know the cost, just blowing off some steam (Woo!)真刀真枪 我甚至都还没崭露锋芒</p><p>This is how I get it done just trying to have a little fun 找点乐子这是我的行事方式</p><p>I walk through fire, make rivers run, I been the one, not two (Ooh!)赴汤蹈火 天选之人在所不辞</p><p>So listen up, my dude, (Yeah) every member of my crew 所以听好了伙计们 我团队里每位同行人</p><p>Since little ones, weren't putting up with simpletons or fools从小到大 我便不能忍受蠢人</p><p>No giving up can't lose (Yeah!) won't take what I can't use (Yeah!)未尝败绩 这次我也将大获全胜</p><p>Spread my wing and stretching out cuz I'm about to get loose. (Yeah!)展翅飞翔 舒展全身</p><p>The Emperor will get on with anyone you choose (Yeah!)大帝能跟任何人相处得当 无论出身</p><p>Let'em tell it on the news. (Yeah!) When it's said and done I'mthrough! (ooh!) 新闻滚动 终成定局 目的地我早已直奔</p><p>It's the Emperor y'all 大帝降临</p><p>You better kneel to the Boss! 天下归心</p><p>(uh hmm)</p>]]></content>
    
    
    <categories>
      
      <category>明日方舟</category>
      
    </categories>
    
    
    <tags>
      
      <tag>明日方舟</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2023.09.23 一盒红柚</title>
    <link href="/2023/09/23/%E4%B8%80%E7%9B%92%E7%BA%A2%E6%9F%9A/"/>
    <url>/2023/09/23/%E4%B8%80%E7%9B%92%E7%BA%A2%E6%9F%9A/</url>
    
    <content type="html"><![CDATA[<p>前天星期四晚上，我在校外跑步，给自己买了一盒红柚，15元。柚子很好吃，我感到很幸福。</p><span id="more"></span><figure><img src="/2023/09/23/%E4%B8%80%E7%9B%92%E7%BA%A2%E6%9F%9A/686f2cc93d200e008ff1daf2b34f4d4.jpg" alt="当时拍给爸妈看的照片"><figcaption aria-hidden="true">当时拍给爸妈看的照片</figcaption></figure><p>水果店在复兴中路上。当时我刚好跑完2km，想找辆自行车骑回去。沿着人行道随便乱走，路过这家水果店。有一个先生站在门口，边抽烟边隔着门帘和店主聊天。我低着头从他身边走过，一眼就看到了门口摆着的塑料盒子装的柚子。柚子都是剥好的，看着很诱人。要是是完整的，或许也不会激起我的冲动，但是剥好的柚子就不一样了，让人不禁想象下一刻就能放进嘴里品尝，老板真的很会做生意。</p><p>通常情况下，我是不会停下我的脚步的。这次也是如此，匆匆走了过去。但是走了几步路，我就在想为什么不买一盒尝尝呢？好久没有吃水果了，我也好想吃水果啊。对于吃，我向来是没有太多欲望的。这几天牙又疼，张大嘴巴都有些难受，本也想一如既往压制住自己的馋意，但是我想起了之前和jljj的聊天。她是一个非常好的人，认为活着的意义在于吃好吃的，我感觉她的观点也有一定道理，吃好吃的确实能让人感到愉悦。我又想柚子是水果，可以补充维生素，是有利健康的，所以完全没理由不买。于是我又往回走去。<img src="/2023/09/23/%E4%B8%80%E7%9B%92%E7%BA%A2%E6%9F%9A/58c5ecbd846e1e14952c33111bdf70c.png" alt="她说活着就是为了吃两口好的，我给她推荐了阿城的《棋王》——我最爱的书之一"></p><p>我放慢了脚步。抽烟的人仍然在和店主对话，店主手里正在用刀削一个石榴。我看到门口写着“白柚10元/盒”“红柚15元/盒”，犹豫了，继续往前走去。拿出手机，我给爸妈发了个信息。一方面，我想告知他们准备买一盒柚子；另一方面，我生怕买的质量不好，想问问他们现在是不是柚子上市的日子。<img src="/2023/09/23/%E4%B8%80%E7%9B%92%E7%BA%A2%E6%9F%9A/b754ee82ce60c850240233fb03266bd.png"></p><p>踯躅不前了一会，我看到那个抽烟的先生发现了我，估计是感觉我鬼鬼祟祟的，有些莫名。我问自己在纠结什么，下定决心直接走上前去，莽进了水果店的门，和店主说我想要买一盒柚子。吸烟者中断了和店主的交谈，水果店里顿时安静。“红的十五，白的十块。”我付了钱，说：“拿红的吧。”店主走到门口说：“好嘞，自己挑。”我也判断不出好坏多少，就直接拿了最顺手的一盒。刚准备走，他叫住我，帮我把柚子装进一个塑料袋里。</p><p>我拎着袋子离开了，世界又热闹了起来。走在路上，看着粉里透红的柚子，我很开心，因为这好像是第一次因为自己想吃而给自己买了水果，勤快一点，多吃点水果也挺好。我感觉自己成长了，因为这是第一次因为自己想吃而给自己买了水果。<img src="/2023/09/23/%E4%B8%80%E7%9B%92%E7%BA%A2%E6%9F%9A/565b6d6669690056b3c5dae39a0245b.png"></p><p>买完柚子后也不早了，共享单车稀少，一时半会找不到。我端着盒子走在人行道上，很想吃一口柚子，于是就吃了一口。非常好吃，又想把柚子带回宿舍吃，但是就一点点柚子，带回去似乎不方便也没必要。而且我如果带回了宿舍，必然会选择分给三位舍友，但只买了少数，4个人分略显寒碜，不大好看。</p><p>所以我干脆边走边吃柚子，边找共享单车。途中经过别的水果店，也看到有卖柚子的，红柚20元一包，但是很多，大概有4-5瓣的样子。我不知道自己究竟是赚了还是亏了。手机里爸妈还在给我提供解决牙疼的方法，让我买点罐头梨吃，说是去火的，我说回头再买吧，其实是我懒了。</p><p>总之，在那一刻的柚子真的很好吃，虽然它还是正常的味道，并没有形成什么美味。今天我的牙也好的差不多了，虽然它还是有点疼，得去治疗。我感到很幸福。</p><p>11.5 updated 一整个柚子就20元左右</p><p>橘子2-3元一斤，柚子3-4元一斤</p>]]></content>
    
    
    <categories>
      
      <category>日记、杂感与自我批判</category>
      
    </categories>
    
    
    <tags>
      
      <tag>碎碎念</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>红龙的誓言</title>
    <link href="/2023/09/19/%E7%BA%A2%E9%BE%99%E7%9A%84%E8%AA%93%E8%A8%80/"/>
    <url>/2023/09/19/%E7%BA%A2%E9%BE%99%E7%9A%84%E8%AA%93%E8%A8%80/</url>
    
    <content type="html"><![CDATA[<div class="bilibili"><iframe src="//player.bilibili.com/player.html?aid=689459258&amp;bvid=BV1Hm4y1F7oo&amp;cid=870277763&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe></div><p>This is a story of Victoria, a tale from the distant past. </p><p>这是很久很久以前的，维多利亚的故事</p><p>An era when Spring remained, an age before stone castles.</p><p>那时春天还没有离开大地，石头还没有垒成城堡</p><p>A time when a girl made friends with two crimson dragons.</p><p>小小的女孩与两条红龙成了朋友</p><p>One of them was greedy, but the other was true and brave.</p><p>一条红龙贪婪，另一条勇猛</p><p>Both swore for eternity to protect her beauty and grace.</p><p>他们都发誓，会永远守护在她身边</p><p>Everywhere they went, the girl would find and take</p><p>每当他们走到了新的一处，</p><p>the most beautiful flower growing in that place.</p><p>女孩就会去摘下那里最漂亮的花朵</p><p><br></p><p>Then one day came when the greedy one exclaimed,</p><p>直到有一天，贪婪的红龙向女孩开口：</p><p>"Grant me a gift, should you call yourself my friend."</p><p>“作为朋友，你为什么不送我一件礼物？”</p><p>With honeyed tongue it begged the girl to braid a wreath</p><p>他用花言巧语，想要换取一顶花环</p><p>with the flowers she had gathered, and the girl gladly agreed.  </p><p>他要将女孩一路上采下的花都编进其中，其中女孩则欣然答应</p><p>With deft hands she wove a beauteous floral garland,</p><p>女孩用她的巧手编好了美丽的花环，</p><p>and placed it around the head of the greedy red dragon.</p><p>为贪婪的红龙戴在了头顶。</p><p><br></p><p>Yet the dragon of courage said,</p><p>勇猛的红龙则说：</p><p>"No boon for me, no gift do I need,</p><p>“我要的不是礼物。</p><p>our journey is incomplete, and there's much for us to see."</p><p>我们的旅途还没有结束，前方还有许多风景。”</p><p>And thus, it departed alone and flew to the mountains beyond,</p><p>于是他独自离开，飞过了远方的群山。</p><p>where it created Tara, a kingdom to call its own.</p><p>在山的另一边，他建起了名为塔拉的王国。</p><p>The flowers that thrive here grow in no other land.</p><p>这里盛开的花，与其他任何地方都不同。</p><p>The domain was deemed perfect to adorn the girl's fine hand.</p><p>红龙想，自己会将独一无二的美景送到女孩的手中。</p><p><br></p><p>The wind told the greedy one of its kin's great findings.</p><p>风把这个消息带给了贪婪的红龙。</p><p>Speedily it flew towards Tara with the girl upon its wings.</p><p>他带着女孩，振翼飞向塔拉</p><p>And the greedy drake was awed, dazzled by the native bloom.</p><p>花朵的美艳摄人心魄，令他不住称赞</p><p>"Resplendent shall be our crown when we take that flower fromyou."</p><p>“只要有你这一朵花作为点缀，我的花冠就会熠熠生辉”</p><p>The good drake was speechless as greed pressed the demand.</p><p>面对这样贪婪的索求，勇猛的红龙无法答应。</p><p>There was nothing left of spring, but the blossom of its ownland.</p><p>对方已经将整个春天据为己有，而自己只有送给女孩的这一朵花了。</p><p><br></p><p>Long battled the dragons, a feud of naught but woe.</p><p>为此他们争执了很久，那场闹剧无比可悲</p><p>But greed emerged triumphant, the flower was then bestowed.</p><p>直到贪婪者得到了胜利，塔拉的花朵也被编进花环</p><p>Though the blossom suffered wounds and several petals were shed,</p><p>花朵已经残缺，几片花瓣被打落。</p><p>it became the brightest jewel upon the greedy dragon's head.</p><p>但在红龙的花冠上，它仍然是最夺目的明珠。</p><p>The girl secretly wept watching her friends fight and bleed.</p><p>女孩为自己朋友之间的争斗难过，却只能偷偷哭泣。</p><p>Then a lion snuck to her giving whispers that soothed her grief.</p><p>这时，一只狮子悄悄来到她身边，轻声细语让她不要担忧</p><p>And the lion told the girl that it had a very large pride,</p><p>狮子告诉女孩，他还有许多同族，</p><p>who would swear to protect her and vowed to stay by her side.</p><p>他们也会起誓保护她，陪伴在她身边。</p><p><br></p><p>So the girl forgot her sorrows and played with new-found friends,</p><p>与狮群作伴，让女孩忘记了伤心的事。</p><p>and no longer yearned for the drake who dwelt in distant lands.</p><p>生活在远方土地上的那条红龙，也不再令她挂念。</p><p>But the draken war barely ended when the lion pushed its claim.</p><p>但趁着两条红龙结束争执，狮子立刻露出獠牙</p><p>It seized the girl and roared, "Put the crown upon my mane!"</p><p>他挟持了女孩，高声咆哮着：“为我戴上那顶花冠！”</p><p>The good drake had not healed, but valiantly it challenged thethreat.</p><p>勇敢的红龙伤口还没有愈合，却依然挺身去对抗狮群的威胁</p><p>Not for the crown it fought and killed but the oath it swore tokept.</p><p>他不是为争夺花环而厮杀，只是不曾忘记自己最初立下的誓言。</p><p>But the pride was ready for war and spilled the dragon's blood.</p><p>他的鲜血流过的战场就是证词。</p><p>It drenched the fertile earth and turned it to barren mud.</p><p>塔拉原本丰饶的土地因此变得荒芜</p><p><br></p><p>The people grew cold and starved, now that winter has arrived.</p><p>现在冬天已经来临，这片土地上的人们忍受着饥饿与寒冷。</p><p>They remain cowed and silent, though a question lingered in mind.</p><p>他们不敢开口，却有一个问题始终萦绕在心间。</p><p>"Is it gone, our crimson dragon who lives beyond the peaks?</p><p>“我们的红龙是否还在？”</p><p>Is it gone, our virtuous guardian, the one with no greed?"</p><p>“那曾经君临顶点而无所贪图，誓守德行的红龙啊，它是否还在？”</p><p>Are you listening, Loughshinny?</p><p>拉芙希妮，你在听吗？</p><p>Can you...... and will you answer that question for us?</p><p>你们能够……你们会去回答那个问题吗？</p>]]></content>
    
    
    <categories>
      
      <category>明日方舟</category>
      
    </categories>
    
    
    <tags>
      
      <tag>明日方舟</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PostgreSQL从删库到跑路</title>
    <link href="/2023/09/17/PostgreSQL%20cookbook/"/>
    <url>/2023/09/17/PostgreSQL%20cookbook/</url>
    
    <content type="html"><![CDATA[<p>参考了可亲的助教milk的教程和网络上的相关资料。</p><span id="more"></span><p>神中神网站：<a href="https://www.sjkjc.com/postgresql">PostgreSQL(sjkjc.com)</a></p><p><code>$</code>表示在命令行中输入代码。 pgSQL中大小写无所谓，随便用。分句用逗号<span class="math inline">\(,\)</span>结尾，整句用分号<span class="math inline">\(;\)</span>结尾</p><h1 id="intro">Intro</h1><h2 id="准备工作">0、准备工作</h2><h3 id="启动">（）（），启动！</h3><p>以管理员身份运行命令行 <figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># 启动</span><br><span class="hljs-comment"># net start postgresql-x64-&lt;version&gt;</span><br><span class="hljs-variable">$</span> net <span class="hljs-built_in">start</span> postgresql<span class="hljs-literal">-x64-15</span><br><span class="hljs-comment"># 关闭</span><br><span class="hljs-comment"># net stop postgresql-x64-&lt;version&gt;</span><br></code></pre></td></tr></table></figure></p><h3 id="君权神授">君权神授</h3><ol type="1"><li>使⽤<code>psql</code>命令连接到PostgreSQL作为超级⽤户（通常是postgres）：<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>psql -U postgres<br></code></pre></td></tr></table></figure></li><li>现在您应该在psql命令⾏⼯具中。在这⾥，您可以使⽤以下SQL命令来创建⼀个新的⻆⾊：<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"># <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ROLE</span> %<span class="hljs-type">name</span> <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">LOGIN</span> <span class="hljs-keyword">PASSWORD</span> <span class="hljs-string">&#x27;%password&#x27;</span> <span class="hljs-keyword">CREATEDB</span>;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">ROLE</span> hsb <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">LOGIN</span> <span class="hljs-keyword">PASSWORD</span> <span class="hljs-string">&#x27;feelansb&#x27;</span> <span class="hljs-keyword">CREATEDB</span>; <br></code></pre></td></tr></table></figure></li></ol><h3 id="一键输入密码懒狗专用">一键输入密码，懒狗专用</h3><p><a href="https://www.cnblogs.com/litmmp/p/5122534.html">PostgreSQL自动输入密码 - Litmmp - 博客园 (cnblogs.com)</a></p><ol type="1"><li>在C:\..\%APPDATA%路径下新建文件夹postgresql，再在这个文件夹中新建文件pgpass.conf</li><li>pgpass.conf的内容改为： <figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-comment">#hostname:port:database:username:password</span><br><span class="hljs-symbol">localhost:</span><span class="hljs-number">5432</span><span class="hljs-symbol">:*</span><span class="hljs-symbol">:*</span><span class="hljs-symbol">:*</span><br></code></pre></td></tr></table></figure>前四个字段可以是确定的字面值，也可以使用通配符 *匹配所有。如果记录信息中包含 : 或 这两个符号，需要对其进行转义，就是在字符前面加转义符号  。</li><li>在环境变量-系统变量中新增一个变量，名为PGPASSFILE，值为pgpass.conf的路径</li></ol><h2 id="建库">1、建库！</h2><p>先启动！</p><h3 id="新建某数据库">新建某数据库</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-comment"># createdb %name_of_db</span><br><span class="hljs-variable">$ </span>createdb mydb<br></code></pre></td></tr></table></figure><h3 id="检查有什么数据库">检查有什么数据库</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>psql -l<br></code></pre></td></tr></table></figure><h3 id="进入某数据库">进入某数据库</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crystal"><span class="hljs-variable">$ </span>psql mydb<br></code></pre></td></tr></table></figure><p>结果： <figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf">psql (<span class="hljs-number">15.4</span>)<br>输入 <span class="hljs-string">&quot;help&quot;</span> 来获取帮助信息.<br><br><span class="hljs-attribute">mydb</span><span class="hljs-operator">=</span>&gt;<br></code></pre></td></tr></table></figure></p><h3 id="从某数据库退出">从某数据库退出</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">mydb</span><span class="hljs-operator">=</span>&gt; \q<br></code></pre></td></tr></table></figure><h2 id="开导">2、开导！</h2><p>先建库 <figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cos"># psql -U <span class="hljs-built_in">%name</span> -<span class="hljs-keyword">d</span> <span class="hljs-built_in">%name</span>_of_db -f <span class="hljs-string">&quot;%dir&quot;</span><br>$ psql -U hsb -<span class="hljs-keyword">d</span> mydb -f <span class="hljs-string">&quot;\..\mydb.sql&quot;</span><br></code></pre></td></tr></table></figure> 结果： <figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">CREATE</span> TABLE<br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">CREATE</span> TABLE<br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">CREATE</span> TABLE<br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">CREATE</span> TABLE<br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br><span class="hljs-attribute">INSERT</span> <span class="hljs-number">0</span> <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure></p><h3 id="如果不想看运行过程">如果不想看运行过程</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> psql mydb <span class="hljs-operator">-f</span> <span class="hljs-string">&quot;\..\mydb.sql&quot;</span> <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span> | grep ERROR<br></code></pre></td></tr></table></figure><h2 id="检视数据库">3、检视数据库</h2><p>先导一下 <figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">mydb</span><span class="hljs-operator">=</span>&gt; \d<br></code></pre></td></tr></table></figure> 结果： <figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">                 关联列表<br> 架构模式 |<span class="hljs-string">   名称    </span>|<span class="hljs-string">  类型  </span>|<span class="hljs-string">  拥有者</span><br><span class="hljs-string">----------+-----------+--------+-----------</span><br><span class="hljs-string"> public   </span>|<span class="hljs-string"> courses   </span>|<span class="hljs-string"> 数据表 </span>|<span class="hljs-string"> hsb</span><br><span class="hljs-string"> public   </span>|<span class="hljs-string"> enrolment </span>|<span class="hljs-string"> 数据表 </span>|<span class="hljs-string"> hsb</span><br><span class="hljs-string"> public   </span>|<span class="hljs-string"> staff     </span>|<span class="hljs-string"> 数据表 </span>|<span class="hljs-string"> hsb</span><br><span class="hljs-string"> public   </span>|<span class="hljs-string"> students  </span>|<span class="hljs-string"> 数据表 </span>|<span class="hljs-string"> hsb</span><br><span class="hljs-string">(4 行记录)</span><br></code></pre></td></tr></table></figure></p><h3 id="检视子数据表">检视子数据表</h3><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL">mydb=&gt; \d staff<br></code></pre></td></tr></table></figure><p>结果： <figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs gherkin">数据表 <span class="hljs-string">&quot;public.staff&quot;</span><br>   栏位   |<span class="hljs-string">         类型          </span>|<span class="hljs-string"> 校对规则 </span>|<span class="hljs-string">  可空的  </span>|<span class="hljs-string"> 预设</span><br><span class="hljs-string">----------+-----------------------+----------+----------+------</span><br><span class="hljs-string"> userid   </span>|<span class="hljs-string"> character varying(10) </span>|<span class="hljs-string">          </span>|<span class="hljs-string"> not null </span>|<br> name     |<span class="hljs-string"> character varying(30) </span>|<span class="hljs-string">          </span>|<span class="hljs-string">          </span>|<br> position |<span class="hljs-string"> character varying(20) </span>|<span class="hljs-string">          </span>|<span class="hljs-string">          </span>|<br> phone    |<span class="hljs-string"> integer               </span>|<span class="hljs-string">          </span>|<span class="hljs-string">          </span>|<br>索引：<br>    <span class="hljs-string">&quot;staff_pkey&quot;</span> PRIMARY KEY, btree (userid)<br>由引用：<br>    TABLE <span class="hljs-string">&quot;courses&quot;</span> CONSTRAINT <span class="hljs-string">&quot;courses_lecturer_fkey&quot;</span> FOREIGN KEY (lecturer) REFERENCES staff(userid)<br><br></code></pre></td></tr></table></figure></p><h3 id="展示子数据表">展示子数据表</h3><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">mydb</span><span class="hljs-operator">=</span>&gt; select * from staff<span class="hljs-comment">;</span><br></code></pre></td></tr></table></figure><p>结果： <figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs coq">  userid  |     <span class="hljs-type">name</span>      |    <span class="hljs-type">position</span>     | <span class="hljs-type">phone</span><br>----------+---------------+-----------------+-------<br> jingling | <span class="hljs-type">Jingling</span> Xue  | <span class="hljs-type">Professor</span>       | <span class="hljs-type">54889</span><br> jas      | <span class="hljs-type">John</span> Shepherd | <span class="hljs-type">Senior</span> Lecturer | <span class="hljs-type">56494</span><br> andrewt  | <span class="hljs-type">Andrew</span> Taylor | <span class="hljs-type">Senior</span> Lecturer | <span class="hljs-type">55525</span><br>(<span class="hljs-number">3</span> 行记录)<br></code></pre></td></tr></table></figure></p><h1 id="language">Language</h1><h2 id="select-statement">SELECT statement</h2><p><strong>SELECT</strong> &lt;attribute and function list&gt;<strong>FROM</strong> &lt;table list&gt; [<strong>WHERE</strong>&lt;condition&gt;] [<strong>GROUP BY</strong> &lt;groupingattribute(s)&gt;] [<strong>HAVING</strong> &lt;group condition&gt;][<strong>ORDER BY</strong> &lt;attribute list&gt;]</p><p>[]里面的不是必须</p><h3 id="select">SELECT</h3><p>就是正常的选择，相当于关系代数里的<strong>不去重的projection（纵切片）</strong></p><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> attr1<br></code></pre></td></tr></table></figure><ul><li>选择attr1列</li></ul><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> attr1, attr2<br></code></pre></td></tr></table></figure><ul><li>选择attr1和attr2两列</li></ul><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> *<br></code></pre></td></tr></table></figure><ul><li>选择所有列</li></ul><h4 id="distinct">DISTINCT</h4><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> attr1<br></code></pre></td></tr></table></figure><ul><li>不重复元素地选择attr1列</li><li><span class="math inline">\(\pi_{attr1}\)</span></li></ul><h4 id="as">AS</h4><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> attr1 <span class="hljs-keyword">AS</span> sb1, attr2 <span class="hljs-keyword">AS</span> sb2<br></code></pre></td></tr></table></figure><ul><li>选择attr1列作为sb1，选择attr2列作为sb2</li><li><span class="math inline">\(\rho_{\{sb1,sb2\}}()\)</span></li><li>只是显示的名字从attr1变成了sb1，原来table中的名字还是attr1不变，attr2同理</li></ul><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> attr1+<span class="hljs-number">100</span> <span class="hljs-keyword">AS</span> sb<br></code></pre></td></tr></table></figure><ul><li>选择attr1列+100作为sb，也可以用运算</li></ul><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> attr1, <span class="hljs-string">&#x27;like sb&#x27;</span> <span class="hljs-keyword">AS</span> sb<br></code></pre></td></tr></table></figure><p>结果</p><table><thead><tr class="header"><th>attr1</th><th>sb</th></tr></thead><tbody><tr class="odd"><td></td><td>like sb</td></tr><tr class="even"><td></td><td>like sb</td></tr><tr class="odd"><td><span class="math inline">\(\cdots\)</span></td><td><span class="math inline">\(\cdots\)</span></td></tr></tbody></table><ul><li>填充自定义内容作为新的一列，不改变原来的表格，掩耳盗铃</li></ul><h4 id="用aggregate-functions">用Aggregate Functions</h4><p>可以在SELECT里面用Aggregate函数</p><ul><li>SUM()</li><li>AVG()</li><li>MIN()</li><li>MAX()</li><li>COUNT()<ul><li>注意COUNT默认COUNT(ALL)，可以用COUNT(DISTINCT)</li><li>注意COUNT默认不计NULL，但是COUNT(*)计入NULL</li></ul></li></ul><h4 id="into">INTO</h4><p>表示从选择的结果中创建一个（临时的）新表 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">SELECT</span> *<br><span class="hljs-keyword">INTO</span> [<span class="hljs-keyword">TEMP</span>] film_copy<br><span class="hljs-keyword">FROM</span> film<br></code></pre></td></tr></table></figure></p><h3 id="from">FROM</h3><p>表示从什么表格里select，相当于关系代数里的 <strong>()</strong><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">FROM</span> R1<br></code></pre></td></tr></table></figure></p><ul><li>从R1中（选择）</li></ul><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">FROM</span> R1,R2<br></code></pre></td></tr></table></figure><ul><li>从R1<span class="math inline">\(\times\)</span>R2中（选择），做CartesianProduct</li></ul><p>表现关系代数里<strong>join</strong>的功能 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">FROM</span> R1 <br><span class="hljs-keyword">NATURAL</span> <span class="hljs-keyword">JOIN</span> R2<br></code></pre></td></tr></table></figure></p><ul><li>R1和R2做自然连接，再从中进行选择</li></ul><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">FROM</span> R1 <br><span class="hljs-keyword">JOIN</span> R2 <br><span class="hljs-keyword">ON</span> R1.attr1=R2.attr1<br></code></pre></td></tr></table></figure><ul><li>R1和R2根据attr1做equi-join，再从中进行选择</li></ul><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> b1.attr1, b2.attr1<br><span class="hljs-keyword">FROM</span> R1 b1, R2 b2<br></code></pre></td></tr></table></figure><ul><li><p>记R1为b1，R2为b2</p></li><li><p>自定义表格的记号，防止出现重复和方便书写 ### WHERE相当于关系代数里的<strong>selection</strong>，给选择加上限制条件<strong>（横切片）</strong> <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">WHERE</span> <span class="hljs-type">name</span>=<span class="hljs-string">&#x27;hsb&#x27;</span><br></code></pre></td></tr></table></figure></p></li><li><p>选择name=hsb的tuple</p></li><li><p><span class="math inline">\(\sigma_{(name=&#39;hsb&#39;)}\)</span></p></li></ul><p>相当于关系代数里的<strong>join</strong>，连接符合条件的表格<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> <span class="hljs-type">name</span>, course_id<br><span class="hljs-keyword">FROM</span> instructor, teaches<br><span class="hljs-keyword">WHERE</span> instructor.ID=teaches.ID <span class="hljs-keyword">AND</span> year=<span class="hljs-number">2010</span><br></code></pre></td></tr></table></figure></p><ul><li>对instructor和teaches表格做equi-join，并选择year=2010的tuples</li></ul><h4 id="subqueries">Subqueries</h4><h5 id="单结果">单结果</h5><p>若subquery返回只有一个tuple，可以把结果当作constantvalue，在WHERE语句中使用。 例子： Sells <img src="/2023/09/17/PostgreSQL%20cookbook/3a81dbaecb9b26325c8177cdbebcfa0.png"><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> bar<br><span class="hljs-keyword">FROM</span> Sells<br><span class="hljs-keyword">WHERE</span> beer=<span class="hljs-string">&#x27;New&#x27;</span> <span class="hljs-keyword">AND</span> price=(<br><span class="hljs-keyword">SELECT</span> price<br><span class="hljs-keyword">FROM</span> Sells<br><span class="hljs-keyword">WHERE</span> bar=<span class="hljs-string">&#x27;Coogee Bay Hotel&#x27;</span><br><span class="hljs-keyword">AND</span> beer=<span class="hljs-string">&#x27;Victoria Bitter&#x27;</span><br>)<br></code></pre></td></tr></table></figure> 这等价于 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> b2.bar<br><span class="hljs-keyword">FROM</span> Sells b1, Sells b2<br><span class="hljs-keyword">WHERE</span> b1.beer=<span class="hljs-string">&#x27;Victoria Bitter&#x27;</span> <span class="hljs-keyword">AND</span><br>  b1.bar=<span class="hljs-string">&#x27;Coogee Bay Hotel&#x27;</span> <span class="hljs-keyword">AND</span><br>  b1.price=b2.price <span class="hljs-keyword">AND</span><br>  b2.beer=<span class="hljs-string">&#x27;New&#x27;</span><br></code></pre></td></tr></table></figure></p><h5 id="多结果-in">多结果 IN</h5><p>若subquery返回多个结果，在WHERE中用IN表示 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> Students <br><span class="hljs-keyword">WHERE</span> grade <span class="hljs-keyword">IN</span> (<span class="hljs-string">&#x27;HD&#x27;</span>,<span class="hljs-string">&#x27;D&#x27;</span>)<br></code></pre></td></tr></table></figure></p><ul><li><p>在grade的值为HD或D中选择 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> *<br><span class="hljs-keyword">FROM</span> Beers<br><span class="hljs-keyword">WHERE</span> <span class="hljs-type">name</span> <span class="hljs-keyword">IN</span> (<br><span class="hljs-keyword">SELECT</span> beer<br><span class="hljs-keyword">FROM</span> Likes<br><span class="hljs-keyword">WHERE</span> drinker=<span class="hljs-string">&#x27;John&#x27;</span><br>)<br></code></pre></td></tr></table></figure></p></li><li><p>在drinker的值为John中选择</p></li></ul><h5 id="exists">EXISTS</h5><p>存在，如果满足条件的tuple非空，则返回true</p><p>例子：Find the beers uniquely made by their manufacturer.<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> <span class="hljs-type">name</span><br><span class="hljs-keyword">FROM</span> Beers b1<br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> (<br><span class="hljs-keyword">SELECT</span> *<br><span class="hljs-keyword">FROM</span> Beers<br><span class="hljs-keyword">WHERE</span> manf=b1.manf <span class="hljs-keyword">AND</span> <span class="hljs-type">name</span>!=b1.name<br>)<br></code></pre></td></tr></table></figure></p><ul><li>用NOT EXISTS找出不唯一生产某一种酒的制造商</li></ul><h5 id="allanysome">ALL/ANY（SOME）</h5><p>找全部符合条件的tuple，则返回True找存在某一个符合条件的tuple，则返回True</p><p>例子：Find the names of all instructors whose salary is greater thanthe salary of all instructors in the Physics department.<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> <span class="hljs-type">name</span><br><span class="hljs-keyword">FROM</span> instructor<br><span class="hljs-keyword">WHERE</span> salary &gt; <span class="hljs-keyword">ALL</span>(<br><span class="hljs-keyword">SELECT</span> salary<br><span class="hljs-keyword">FROM</span> instructor<br><span class="hljs-keyword">WHERE</span> dept <span class="hljs-type">name</span>=<span class="hljs-string">&#x27;Physics&#x27;</span><br>)<br></code></pre></td></tr></table></figure></p><ul><li>=ANY等价于IN</li><li>&lt;&gt;ALL等价于NOT IN</li></ul><h3 id="group-by">GROUP BY</h3><p>分组，分别应用aggregate function，相当于关系代数中的<span class="math inline">\(\gamma_{\{attr,agg\_func\}}\)</span>的第一个参数</p><p>例子： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> drinker,AVG(price)<br><span class="hljs-keyword">FROM</span> Frequents, Sells<br><span class="hljs-keyword">WHERE</span> beer=<span class="hljs-string">&#x27;New&#x27;</span> <span class="hljs-keyword">AND</span> Frequents.bar=Sell.bar<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> drinker<br></code></pre></td></tr></table></figure> 结果：</p><table><thead><tr class="header"><th>Drinker</th><th>AVG(price)</th></tr></thead><tbody><tr class="odd"><td>Adam</td><td>2.25</td></tr><tr class="even"><td>John</td><td>2.25</td></tr><tr class="odd"><td>Justin</td><td>2.5</td></tr></tbody></table><ul><li>要求：SELECT后面跟的Attribute必须要么在Aggregatefunction里出现，要么在GROUP BY语句里出现</li></ul><h3 id="having">HAVING</h3><p>在GROUP BY后面用，限制<strong>分组的条件</strong></p><p>例子： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> bar, MIN(price)<br><span class="hljs-keyword">FROM</span> Sells<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> Bar<br><span class="hljs-keyword">HAVING</span> MIN(price)&gt;<span class="hljs-number">2.3</span><br></code></pre></td></tr></table></figure> 结果：</p><table><thead><tr class="header"><th>Bar</th><th>MIN(price)</th></tr></thead><tbody><tr class="odd"><td>Australia Hotel</td><td>3.5</td></tr><tr class="even"><td>Coogee Bay Hotel</td><td>2.25</td></tr><tr class="odd"><td>Lord Nelson</td><td>3.75</td></tr><tr class="even"><td>Marble Bar</td><td>2.8</td></tr><tr class="odd"><td>Royal Hotel</td><td>2.3</td></tr><tr class="even"><td><span class="math inline">\(\cdots\)</span></td><td><span class="math inline">\(\cdots\)</span></td></tr></tbody></table><h3 id="order-by">ORDER BY</h3><p>对最后结果的表格排序，升序ASC(ascend)、降序DESC(descend)<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span> column1, column2,...<br><span class="hljs-keyword">FROM</span> <span class="hljs-built_in">table_name</span><br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> column1, column2,... <span class="hljs-keyword">ASC</span>|<span class="hljs-keyword">DESC</span><br></code></pre></td></tr></table></figure></p><h2 id="functions">Functions</h2><p>可以以多种形式调用 - 在SELECT语句中调用 -<code>SELECT myFunction(arg1, arg2);</code> -<code>SELECT * FROM myTableFunction(arg1, arg2)</code> -直接使用，或在另一个PLpgSQL函数中调用 -<code>PERFORM myVoidFunction(arg1, arg2);</code> -<code>result:=myOtherFunction(arg1);</code> - 在Trigger中自动使用</p><h3 id="基本语法">基本语法</h3><h4 id="sql">SQL</h4><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR REPLACE</span> <span class="hljs-keyword">FUNCTION</span><br>funcName(arg1type, arg2type, ...)<br><span class="hljs-keyword">RETURNS</span> rettype<br><span class="hljs-keyword">AS</span> $$<span class="language-pgsql"></span><br><span class="language-pgsql"><span class="hljs-keyword">SQL</span> statements</span><br><span class="language-pgsql">$$</span> <span class="hljs-keyword">LANGUAGE</span> <span class="hljs-keyword">sql</span>;<br></code></pre></td></tr></table></figure><ul><li>RETURNS返回的是<strong>最后</strong>一个SQL语句</li><li>rettype可以是一个table: RETURNS set of<ul><li>但是好像只是用这个table的schema，因此要求列数匹配</li></ul></li></ul><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-comment">-- set of Bars from specified suburb</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR REPLACE</span> <span class="hljs-keyword">FUNCTION</span><br>hotelsIN(<span class="hljs-type">TEXT</span>) <span class="hljs-keyword">RETURNS</span> <span class="hljs-keyword">set</span> <span class="hljs-keyword">of</span> Bars<br><span class="hljs-keyword">AS</span> $$<span class="language-pgsql"></span><br><span class="language-pgsql"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> Bars <span class="hljs-keyword">WHERE</span> addr=<span class="hljs-meta">$1</span>;</span><br><span class="language-pgsql">$$</span> <span class="hljs-keyword">LANGUAGE</span> <span class="hljs-keyword">sql</span>;<br><br><span class="hljs-comment">-- usage examples</span><br><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> hotelsIn(<span class="hljs-string">&#x27;The Rocks&#x27;</span>);<br></code></pre></td></tr></table></figure><p>结果： <figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-section">name            | addr      | license</span><br><span class="hljs-section">----------------+-----------+---------</span><br>Australia Hotel | The Rocks | 123456<br>Lord Nelson     | The Rocks | 123888<br></code></pre></td></tr></table></figure></p><h4 id="plpgsql-function">PL/pgSQL Function</h4><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR REPLACE</span> <span class="hljs-keyword">FUNCTION</span><br>funcName(param1, param2, ...)<br><span class="hljs-keyword">RETURNS</span> rettype<br><span class="hljs-keyword">AS</span> $$<span class="language-pgsql"></span><br><span class="language-pgsql"><span class="hljs-keyword">DECLARE</span></span><br><span class="language-pgsql">varibale declarations</span><br><span class="language-pgsql"><span class="hljs-keyword">BEGIN</span></span><br><span class="language-pgsql">code <span class="hljs-keyword">for</span> <span class="hljs-keyword">function</span></span><br><span class="language-pgsql"><span class="hljs-keyword">END</span>;</span><br><span class="language-pgsql">$$</span> <span class="hljs-keyword">LANGUAGE</span> plpgsql;<br></code></pre></td></tr></table></figure><ul><li>参数用位置来引用$1, $2</li><li>或者用别名alias<ul><li>在函数header中用(e.g. f(a int, b int))</li><li>在declaration中用(e.g. a alias for $1; b alias for $2)</li></ul></li></ul><p>例子1（船新写法）： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR REPLACE</span> <span class="hljs-keyword">FUNCTION</span><br><span class="hljs-keyword">add</span>(x <span class="hljs-type">TEXT</span>, y <span class="hljs-type">TEXT</span>) <span class="hljs-keyword">RETURNS</span> <span class="hljs-type">TEXT</span><br><span class="hljs-keyword">AS</span> $$<span class="language-pgsql"></span><br><span class="language-pgsql"><span class="hljs-keyword">DECLARE</span></span><br><span class="language-pgsql">result <span class="hljs-type">TEXT</span>; <span class="hljs-comment">--local variable</span></span><br><span class="language-pgsql"><span class="hljs-keyword">BEGIN</span></span><br><span class="language-pgsql">result := x||&quot;&quot;||y;</span><br><span class="language-pgsql"><span class="hljs-keyword">RETURN</span> result;</span><br><span class="language-pgsql"><span class="hljs-keyword">END</span>;</span><br><span class="language-pgsql">$$</span> <span class="hljs-keyword">LANGUAGE</span> plpgsql;<br></code></pre></td></tr></table></figure></p><p>例子2（都什么年代，还在用传统写法）： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR REPLACE</span> <span class="hljs-keyword">FUNCTION</span><br>cat(<span class="hljs-type">TEXT</span>, <span class="hljs-type">TEXT</span>) <span class="hljs-keyword">RETURNS</span> <span class="hljs-type">TEXT</span><br><span class="hljs-keyword">AS</span> $$<span class="language-pgsql"></span><br><span class="language-pgsql"><span class="hljs-keyword">DECLARE</span></span><br><span class="language-pgsql">x <span class="hljs-keyword">ALIAS</span> <span class="hljs-keyword">FOR</span> <span class="hljs-meta">$1</span>; <span class="hljs-comment">--alias for parameter</span></span><br><span class="language-pgsql">y <span class="hljs-keyword">ALIAS</span> <span class="hljs-keyword">FOR</span> <span class="hljs-meta">$2</span>; <span class="hljs-comment">--alias for parameter</span></span><br><span class="language-pgsql">result <span class="hljs-type">TEXT</span>; <span class="hljs-comment">--local variable</span></span><br><span class="language-pgsql"><span class="hljs-keyword">BEGIN</span></span><br><span class="language-pgsql">result := x||&quot;&quot;&quot;&quot;||y;</span><br><span class="language-pgsql"><span class="hljs-keyword">RETURN</span> result;</span><br><span class="language-pgsql"><span class="hljs-keyword">END</span>;</span><br><span class="language-pgsql">$$</span> <span class="hljs-keyword">LANGUAGE</span> plpgsql;<br></code></pre></td></tr></table></figure></p><p>PLpgSQL允许函数重载<strong>function overloading</strong> (i.e. samename, different arg types) - 就是说，可以同一个函数名，不同的参数 -但是不能同一个函数名，相同的参数，不同的返回值 -这条是对应CREATE的，一般还是建议写CREATE OR REPLACE</p><h3 id="声明data-types">声明Data Types</h3><ul><li>正常声明<ul><li><code>quantity INTEGER</code></li></ul></li><li>声明为和某个变量一样<ul><li><code>start_quantity quantity%TYPE</code></li></ul></li><li>声明为和某个表（包含其中所有列）一样<ul><li><code>employee Employees%ROWTYPE</code></li></ul></li><li>声明为和某个表中的某个列一样<ul><li><code>name Employees.name%TYPE</code></li></ul></li></ul><p>用%声明像引用一样，好就好在修改的时候可以自动保持更新</p><h3 id="return">RETURN</h3><ul><li>An atomic data type (e.g. integer, text, ...)<ul><li><code>RETURNS INTEGER</code></li></ul></li><li>A tuple (e.g. table record type or tuple type)<ul><li><code>RETURNS Employee</code></li></ul></li><li>A set of atomic values (like a table column)<ul><li><code>RETURNS SETOF FLOAT</code></li></ul></li><li>A set of tuples (i.e. a table)<ul><li><code>RETURNS SETOF Employee</code></li><li>Similar to a view</li></ul></li><li><strong><em>void</em></strong> (i.e. no return value)</li></ul><h3 id="控制结构">控制结构</h3><h4 id="条件判断">条件判断</h4><ul><li>IF ... THEN</li><li>IF ... THEN ... ELSE</li><li>IF ... THEN ... ELSIF ... THEN ... ELSE</li></ul><p>例子： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">IF</span> v_user_id&gt;<span class="hljs-number">0</span> <span class="hljs-keyword">THEN</span><br><span class="hljs-keyword">UPDATE</span> users <span class="hljs-keyword">SET</span> email = v_email <span class="hljs-keyword">WHERE</span> user_id = v_user_id;<br><span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;<br></code></pre></td></tr></table></figure></p><h4 id="迭代循环">迭代（循环）</h4><p>平平无奇的LOOP <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">LOOP</span><br><span class="hljs-keyword">Statement</span><br><span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;<br></code></pre></td></tr></table></figure></p><p>例子： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">LOOP</span><br><span class="hljs-comment">-- some computations</span><br><span class="hljs-keyword">EXIT</span> <span class="hljs-keyword">WHEN</span> count&gt;<span class="hljs-number">0</span><br><span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;<br></code></pre></td></tr></table></figure></p><p>带FOR循环的LOOP <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">FOR</span> int_var <span class="hljs-keyword">IN</span> low .. high <span class="hljs-keyword">LOOP</span><br><span class="hljs-keyword">Statement</span><br><span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;<br></code></pre></td></tr></table></figure></p><p>例子： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">FOR</span> i <span class="hljs-keyword">IN</span> <span class="hljs-number">1.</span><span class="hljs-number">.10</span> <span class="hljs-keyword">LOOP</span><br><span class="hljs-comment">-- Statement</span><br><span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;<br></code></pre></td></tr></table></figure></p><h2 id="其它运算">其它运算</h2><h3 id="set-operations">Set Operations</h3><p>下面的运算均为集合运算，去重了。如果不要去重，在后面加ALL，比如UNIONALL #### UNION Find courses that ran in Fall 2009 <strong>or</strong> inSpring 2010 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL">(<span class="hljs-keyword">SELECT</span> course_id <br><span class="hljs-keyword">FROM</span> section <br><span class="hljs-keyword">WHERE</span><br>sem = <span class="hljs-string">&#x27;Fall&#x27;</span> <span class="hljs-keyword">AND</span> year = <span class="hljs-number">2009</span>) <br><br><span class="hljs-keyword">UNION</span><br><br>(<span class="hljs-keyword">SELECT</span> course_id <br><span class="hljs-keyword">FROM</span> section <br><span class="hljs-keyword">WHERE</span> sem = <span class="hljs-string">&#x27;Spring&#x27;</span> <span class="hljs-keyword">AND</span> year = <span class="hljs-number">2010</span>)<br></code></pre></td></tr></table></figure></p><h4 id="intersect">INTERSECT</h4><p>Find courses that ran in Fall 2009 <strong>and</strong> in Spring2010 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL">(<span class="hljs-keyword">SELECT</span> course_id <br><span class="hljs-keyword">FROM</span> section <br><span class="hljs-keyword">WHERE</span><br>sem = <span class="hljs-string">&#x27;Fall&#x27;</span> <span class="hljs-keyword">AND</span> year = <span class="hljs-number">2009</span>) <br><br><span class="hljs-keyword">INTERSECT</span><br><br>(<span class="hljs-keyword">SELECT</span> course_id <br><span class="hljs-keyword">FROM</span> section <br><span class="hljs-keyword">WHERE</span> sem = <span class="hljs-string">&#x27;Spring&#x27;</span> <span class="hljs-keyword">AND</span> year = <span class="hljs-number">2010</span>)<br></code></pre></td></tr></table></figure></p><h4 id="except">EXCEPT</h4><p>Find courses that ran in Fall 2009 <strong>but not</strong> in Spring2010 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL">(<span class="hljs-keyword">SELECT</span> course_id <br><span class="hljs-keyword">FROM</span> section <br><span class="hljs-keyword">WHERE</span><br>sem = <span class="hljs-string">&#x27;Fall&#x27;</span> <span class="hljs-keyword">AND</span> year = <span class="hljs-number">2009</span>) <br><br><span class="hljs-keyword">EXCEPT</span><br><br>(<span class="hljs-keyword">SELECT</span> course_id <br><span class="hljs-keyword">FROM</span> section <br><span class="hljs-keyword">WHERE</span> sem = <span class="hljs-string">&#x27;Spring&#x27;</span> <span class="hljs-keyword">AND</span> year = <span class="hljs-number">2010</span>)<br></code></pre></td></tr></table></figure></p><h3 id="修改数据类型">修改数据类型</h3><h4 id="cast">CAST/::</h4><p>用CAST修改数据类型（通用），这等价于::（仅pgsql可用）<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL">CAST (expression <span class="hljs-keyword">AS</span> target_type)<br><br>expression :: target_type<br></code></pre></td></tr></table></figure></p><h2 id="窗口函数">窗口函数</h2><h3 id="rank">RANK</h3><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">SELECT</span><br>rank()<br><span class="hljs-keyword">over</span>(<br>[<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> partition_column_list]<br>[<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> order_column_list]<br>)<br></code></pre></td></tr></table></figure><p>正常的排序，PARTITION里面是类似于分组别比较，ORDER是决定rank的顺序，输出为一列rank</p><h1 id="operations">Operations</h1><h2 id="建表">建表</h2><h3 id="create">CREATE</h3><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"># <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> %name_of_table (<br>%attribute1 %datatype [%properties],<br>%attribute2 %datatype [%properties],<br>...<br>[%table_property1],<br>[%table_property2],<br>...<br>);<br></code></pre></td></tr></table></figure><h3 id="添加表约束-constraints">添加表约束 Constraints</h3><h4 id="primary-key">PRIMARY KEY</h4><p>单attribute作为主键，直接在后面加PRIMARY KEY <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> users(<br>id <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">PRIMARY KEY</span>,<br><span class="hljs-type">name</span> <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">45</span>)<br>);<br></code></pre></td></tr></table></figure></p><p>或者，多attributes作为主键 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> users(<br>com_id <span class="hljs-type">INTEGER</span>,<br>user_number <span class="hljs-type">INTEGER</span>,<br><span class="hljs-type">name</span> <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">45</span>),<br><span class="hljs-keyword">PRIMARY KEY</span>(com_id, user_number)<br>);<br></code></pre></td></tr></table></figure></p><h4 id="foreign-key">FOREIGN KEY</h4><p>添加外键约束 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-built_in">table_name</span>(<br>column_defination_1,<br>...<br>[<span class="hljs-keyword">CONSTRAINT</span> foreign_key_name]<br><span class="hljs-keyword">FOREIGN KEY</span> (<span class="hljs-keyword">column</span>)<br><span class="hljs-keyword">REFERENCES</span> parent_table_name (<span class="hljs-keyword">column</span>)<br><span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> ...<br><span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> ...<br>)<br></code></pre></td></tr></table></figure></p><ul><li><code>ON DELETE</code> 和 <code>ON UPDATE</code> 指定了删除或更新父表中的行时要采取的约束策略。你可以使用以下5 个策略中的一个：<ul><li><code>NO ACTION</code>: 这是默认的策略。</li><li><code>RESTRICT</code>:如果父表中的一行在该表中有匹配的行，试图删除或更新父表中行时会引发PostgreSQL 错误。</li><li><code>CASCADE</code>：如果父表中的一行被删除或更新，该表中匹配行的值会自动删除或更新。</li><li><code>SET NULL</code>：如果父表中的一行被删除或更新，该表中匹配行的值设置为 <code>NULL</code>。</li><li><code>SET DEFAULT</code>:如果父表中的一行被删除或更新，该表中匹配行的值设置为默认值。</li></ul></li></ul><h4 id="not-null">NOT NULL</h4><p>添加非空约束 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-built_in">table_name</span> (<br>...<br><span class="hljs-built_in">column_name</span> data_type <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>...,<br>...<br>)<br></code></pre></td></tr></table></figure></p><h4 id="unique">UNIQUE</h4><p>添加某一列为唯一约束 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-built_in">table_name</span> (<br>...,<br><span class="hljs-built_in">column_name</span> data_type <span class="hljs-keyword">UNIQUE</span>,<br>)<br></code></pre></td></tr></table></figure></p><p>添加多列为唯一约束 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-built_in">table_name</span>(<br>column_name1 column_definition,<br>column_name2 column_definition,<br>...,<br>[<span class="hljs-keyword">CONSTRAINT</span> <span class="hljs-built_in">constraint_name</span>]<br><span class="hljs-keyword">UNIQUE</span>(column_name1, column_name2)<br>)<br></code></pre></td></tr></table></figure></p><h4 id="check">CHECK</h4><p>自定义约束。可以对某个列约束，也可以对整个表约束 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL">[CONSTAINT <span class="hljs-built_in">constraint_name</span>]<br><span class="hljs-keyword">CHECK</span>(expr)<br></code></pre></td></tr></table></figure></p><ul><li>LIKE不能用，要用~，但是不知道为啥</li></ul><h2 id="修改表">修改表</h2><h3 id="alter">ALTER</h3><p>选取要修改的表 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-built_in">table_name</span><br></code></pre></td></tr></table></figure></p><h4 id="添加add">添加ADD</h4><p>添加列 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> Bars<br><span class="hljs-keyword">ADD</span> phone <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;Unlisted&#x27;</span><br></code></pre></td></tr></table></figure></p><ul><li>DEFAULT写明默认值，如果没写，默认为NULL</li></ul><p>添加约束 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> Persons <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">PRIMARY KEY</span>(ID)<br></code></pre></td></tr></table></figure></p><h4 id="删除drop">删除DROP</h4><p>删除列 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-built_in">table_name</span><br><span class="hljs-keyword">DROP</span> [<span class="hljs-keyword">COLUMN</span>] [<span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span>] <span class="hljs-built_in">column_name</span> [<span class="hljs-keyword">RESTRICT</span> | <span class="hljs-keyword">CASCADE</span>]<br>[, <span class="hljs-keyword">DROP</span> [<span class="hljs-keyword">COLUMN</span>] ...];<br></code></pre></td></tr></table></figure></p><ul><li>解释说明：<ul><li><code>table_name</code> 是要在其中添加列的表。</li><li><code>DROP [COLUMN] ...</code> 子句用来删除一个列。其中 <code>COLUMN</code> 关键字是可以省略的。如果要在一个语句中删除多个列，请使用多个逗号分隔的 <code>ADD [COLUMN] ...</code> 子句。</li><li><code>IF EXISTS</code> 是可选的，它可以避免因为给出的列名不存在而导致的错误。</li><li><code>column_name</code> 是要删除的列的名字。</li><li><code>CASCADE | RESTRICT</code> 是可选的，它指示了如果有其他对象（比如外键、视图、触发器、存储过程等）引用了要删除的列的处理策略。其中：<ul><li><code>CASCADE</code> - 允许删除此列和引用此列的对象。</li><li><code>RESTRICT</code> -如果有对象引用此列，拒绝删除此列，并给出错误。它是默认的选项。</li></ul></li></ul></li><li>从表中删除一列时，PostgreSQL将自动删除所有涉及删除列的索引和约束。</li></ul><p>删除约束 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> Persons <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">PRIMARY KEY</span><br></code></pre></td></tr></table></figure></p><h2 id="删除表">删除表</h2><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"># <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> %name_of_table<br>$ <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> person<br></code></pre></td></tr></table></figure><h2 id="插入数据">插入数据</h2><h3 id="insert">INSERT</h3><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Relation <span class="hljs-keyword">VALUES</span> (val1,val2,val3,...)<br></code></pre></td></tr></table></figure><h4 id="subquery">Subquery</h4><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgreSQL"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> Relation (Subquery)<br></code></pre></td></tr></table></figure><p>例子： Populate a relation of John's potential drinking buddies (i.e.people who go to the same bars as John). <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> DrinkingBuddies(<br><span class="hljs-type">name</span> <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>)<br>)<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> DrinkingBuddies(<br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> f2.drinker<br><span class="hljs-keyword">FROM</span> Frequents f1, Frequents f2<br><span class="hljs-keyword">WHERE</span> f1.drinker=<span class="hljs-string">&#x27;John&#x27;</span><br><span class="hljs-keyword">AND</span> f2.drinker!=<span class="hljs-string">&#x27;John&#x27;</span><br><span class="hljs-keyword">AND</span> f1.bar=f2.bar<br>)<br></code></pre></td></tr></table></figure></p><h2 id="删除数据">删除数据</h2><h3 id="delete">DELETE</h3><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">Table</span><br><span class="hljs-keyword">WHERE</span> Condition<br></code></pre></td></tr></table></figure><p>例子： Justin no longer likes Sparking Ale. <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> Likes<br><span class="hljs-keyword">WHERE</span> drinker=<span class="hljs-string">&#x27;Justin&#x27;</span><br><span class="hljs-keyword">AND</span> beer=<span class="hljs-string">&#x27;Sparking Ale&#x27;</span><br></code></pre></td></tr></table></figure></p><ul><li>注意，DELETE和DROP不一样</li></ul><h2 id="更新数据">更新数据</h2><p>已经有了一些tuples，但是想要更新其中的部分值</p><h3 id="update">UPDATE</h3><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">UPDATE</span> R<br><span class="hljs-keyword">SET</span> list <span class="hljs-keyword">of</span> assignments<br><span class="hljs-keyword">WHERE</span> Condition<br></code></pre></td></tr></table></figure><p>例子： John moves to Coogee. <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">UPDATE</span> Drinkers<br><span class="hljs-keyword">SET</span> addr=<span class="hljs-string">&#x27;Coogee&#x27;</span>, phone=<span class="hljs-string">&#x27;9665-4321&#x27;</span><br><span class="hljs-keyword">WHERE</span> <span class="hljs-type">name</span>=<span class="hljs-string">&#x27;John&#x27;</span><br></code></pre></td></tr></table></figure></p><p>也可以批量更新tuples 例子： Increase all beer prices by 10%<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">UPDATE</span> Sells<br><span class="hljs-keyword">SET</span> price=price*<span class="hljs-number">1.10</span><br></code></pre></td></tr></table></figure></p><h2 id="view">VIEW</h2><p>VIEW是虚拟的关系，不占DBMS里的空间 创建VIEW： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> View_name <span class="hljs-keyword">AS</span> Query<br></code></pre></td></tr></table></figure>删除VIEW： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">VIEW</span> View_name<br></code></pre></td></tr></table></figure></p><p>例子： Using the InnerCityHotels view <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> InnerCityHotels <span class="hljs-keyword">AS</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-type">name</span>, license<br><span class="hljs-keyword">FROM</span> Bars<br><span class="hljs-keyword">WHERE</span> addr <span class="hljs-keyword">IN</span> (<span class="hljs-string">&#x27;The Rocks&#x27;</span>,<span class="hljs-string">&#x27;Sydney&#x27;</span>)<br><br><span class="hljs-keyword">SELECT</span> pub<br><span class="hljs-keyword">FROM</span> InnerCityHotels<br><span class="hljs-keyword">WHERE</span> lic=<span class="hljs-string">&#x27;123456&#x27;</span><br></code></pre></td></tr></table></figure></p><ul><li>VIEW是自动更新数据的，如果原始的表数据更新了的话</li></ul><h2 id="创建索引">创建索引</h2><h3 id="create-index">CREATE INDEX</h3><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">INDEX</span> index_name<br><span class="hljs-keyword">ON</span> <span class="hljs-built_in">table_name</span> (column1, column2, ...)<br></code></pre></td></tr></table></figure><p>或者 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">INDEX</span> index_name<br><span class="hljs-keyword">ON</span> <span class="hljs-built_in">table_name</span> (column1, column2, ...)<br></code></pre></td></tr></table></figure></p><h1 id="plpgsql">PLpgSQL</h1><h2 id="自定义data-types">自定义Data Types</h2><h3 id="create-domain">CREATE DOMAIN</h3><p>用来创建basic types <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs PostgreSQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DOMAIN</span> DomainName [<span class="hljs-keyword">AS</span>] DataType<br>[<span class="hljs-keyword">DEFAULT</span> expression]<br>[&#123;<span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> | <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">CHECK</span> (expression)&#125;]<br></code></pre></td></tr></table></figure></p><p>例子： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">DOMAIN</span> UnswCourseCode <span class="hljs-keyword">AS</span> <span class="hljs-type">TEXT</span><br><span class="hljs-keyword">CHECK</span> (<span class="hljs-keyword">value</span> ~ <span class="hljs-string">&#x27;[A-Z]&#123;4&#125;[0-9]&#123;4&#125;&#x27;</span>)<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> Course(<br>id <span class="hljs-type">INTEGER</span>,<br>code UnswCourseCode,<br>...<br>)<br></code></pre></td></tr></table></figure></p><h3 id="create-type">CREATE TYPE</h3><p>用来创建复合类型tuple types <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TYPE</span> TypeName <span class="hljs-keyword">AS</span> <br>(AttrName <span class="hljs-number">1</span> DataType1, AttrName2 DataType2, ...)<br></code></pre></td></tr></table></figure></p><p>例子： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TYPE</span> ComplexNumber <span class="hljs-keyword">AS</span> (r <span class="hljs-type">FLOAT</span>, i <span class="hljs-type">FLOAT</span>);<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TYPE</span> CourseInfo <span class="hljs-keyword">AS</span> (<br>course UnswCourseCode,<br>syllabus <span class="hljs-type">TEXT</span>,<br>lecturer <span class="hljs-type">TEXT</span><br>);<br></code></pre></td></tr></table></figure></p><ul><li>可以用自定义的basic type</li><li>如果有约束，放在DOMAIN里 <strong><em>：还不知道CREATETYPE里能不能加约束</em></strong></li></ul><p>另一个例子（将复杂的JSON对象转为SQL行）： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TYPE</span> address <span class="hljs-keyword">as</span> (country <span class="hljs-type">TEXT</span>, city <span class="hljs-type">TEXT</span>);<br><br><span class="hljs-keyword">SELECT</span><br>  *<br><span class="hljs-keyword">FROM</span><br>  json_to_record(<br>    <span class="hljs-string">&#x27;&#123;&quot;name&quot;: &quot;Tom&quot;, &quot;age&quot;: 20, &quot;address&quot;: &#123;&quot;country&quot;: &quot;CN&quot;, &quot;city&quot;: &quot;BeiJing&quot;&#125;&#125;&#x27;</span><br>  ) <span class="hljs-keyword">AS</span> x(<span class="hljs-type">name</span> <span class="hljs-type">TEXT</span>, age <span class="hljs-type">INT</span>, address address);<br></code></pre></td></tr></table></figure> -先创建一个自定义的address类型，包括country和city两个text类型字段。</p><p>结果： <figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-section"> name | age |   address</span><br><span class="hljs-section">------+-----+--------------</span><br><span class="hljs-code"> Tom  |  20 | (CN,BeiJing)</span><br>(1 row)<br></code></pre></td></tr></table></figure></p><p>也可以用来创建枚举类型 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TYPE</span> <span class="hljs-type">name</span> <span class="hljs-keyword">AS ENUM</span>(<br>label_1<br>[, label_2, ...]<br>);<br></code></pre></td></tr></table></figure></p><p>例子： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TYPE</span> my_color <span class="hljs-keyword">AS ENUM</span> (<br>    <span class="hljs-string">&#x27;yellow&#x27;</span>,<br>    <span class="hljs-string">&#x27;red&#x27;</span>,<br>    <span class="hljs-string">&#x27;blue&#x27;</span>,<br>    <span class="hljs-string">&#x27;green&#x27;</span>,<br>    <span class="hljs-string">&#x27;white&#x27;</span>,<br>    <span class="hljs-string">&#x27;black&#x27;</span><br>);<br><br><span class="hljs-keyword">SELECT</span> enum_first(<span class="hljs-keyword">null</span>:: my_color);<br><span class="hljs-keyword">SELECT</span> enum_last(<span class="hljs-keyword">null</span>:: my_color);<br></code></pre></td></tr></table></figure></p><ul><li>用enum_first()和enum_last()函数返回第一个和最后一个枚举值。<ul><li>（函数说明：必须要传入一个数据，所以用null:: my_color；用'yellow'::my_color其实也行，结果一样）</li></ul></li></ul><p>CREATE TYPE和CREATE TABLE不一样 -不创建新的空白表，只是定义一种数据类型 - 没有键的约束 -没有明确特定的域约束</p><h2 id="exception">EXCEPTION</h2><p>用来设定例外条件 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">BEGIN</span><br>Statements ...<br><span class="hljs-keyword">EXCEPTION</span><br><span class="hljs-keyword">WHEN</span> Exception1 <span class="hljs-keyword">THEN</span><br>StatementsForHandler1<br><span class="hljs-keyword">WHEN</span> Exception2 <span class="hljs-keyword">THEN</span><br>StatementsForHandler2<br>...<br><span class="hljs-keyword">END</span>;<br></code></pre></td></tr></table></figure></p><ul><li>Exception的内容可以是（预设的？）一长串<ul><li>如：division_by_zero OR floating_point_exception OR ...</li></ul></li></ul><p>例子： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-comment">-- table T contains one tuple (&#x27;Tom&#x27;, &#x27;Jones&#x27;)</span><br><span class="hljs-keyword">DECLARE</span><br>x <span class="hljs-type">INTEGER</span> := <span class="hljs-number">3</span>;<br><span class="hljs-keyword">BEGIN</span><br><span class="hljs-keyword">UPDATE</span> T <span class="hljs-keyword">SET</span> firstname = <span class="hljs-string">&#x27;Joe&#x27;</span> <span class="hljs-keyword">WHERE</span> lastname = <span class="hljs-string">&#x27;Jones&#x27;</span>;<br><span class="hljs-comment">-- table T now contains (&#x27;Joe&#x27;, &#x27;Jones&#x27;)</span><br>x := x + <span class="hljs-number">1</span>;<br>y := x / <span class="hljs-number">0</span>;<br><span class="hljs-keyword">EXCEPTION</span><br><span class="hljs-keyword">WHEN</span> <span class="hljs-built_in">division_by_zero</span> <span class="hljs-keyword">THEN</span><br><span class="hljs-comment">-- update on T is rolled back to (&#x27;Tom&#x27;, &#x27;Jones&#x27;)</span><br><span class="hljs-keyword">RAISE</span> <span class="hljs-keyword">NOTICE</span> <span class="hljs-string">&#x27;Caught division_by_zero&#x27;</span>;<br><span class="hljs-keyword">RETURN</span> x;<br><span class="hljs-comment">-- value returned is 4</span><br><span class="hljs-keyword">END</span>;<br></code></pre></td></tr></table></figure></p><h4 id="raise">RAISE</h4><p>用来生成log信息</p><p>例如 - <code>RAISE DEBUG 'Simple message';</code> -<code>RAISE NOTICE 'User = %', user_id;</code>（也可当作print用） -<code>RAISE EXCEPTION 'Fatal: value was %', value;</code></p><p>RAISE后面可以跟的东西的等级： - DEBUG - LOG - INFO - NOTICE - WARNING- EXCEPTION</p><h2 id="游标cursors">游标Cursors</h2><p>可以用游标保存、修改（整行）变量。游标也可以作为函数的返回值。一般用于大结果集，内存放不下，用游标一条一条处理。</p><p>使用顺序： - 声明游标 - 打开游标 - 使用游标 - 关闭游标</p><p>例子：一般使用以下get_film_titles(integer)函数接受代表电影发行年份的参数。在函数内部，我们查询所有发行年份等于传递给该函数的发行年份的电影。我们使用光标在各行之间循环，并连接标题和标题包含ful单词的电影发行年份。</p><figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR REPLACE</span> <span class="hljs-keyword">FUNCTION</span> get_film_titles(p_year <span class="hljs-type">INTEGER</span>)<br><span class="hljs-keyword">RETURNS</span> <span class="hljs-type">text</span> <span class="hljs-keyword">AS</span> $$<span class="language-pgsql"></span><br><span class="language-pgsql"><span class="hljs-comment">-- 声明游标</span></span><br><span class="language-pgsql"><span class="hljs-keyword">DECLARE</span> </span><br><span class="language-pgsql">titles <span class="hljs-type">TEXT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span>;</span><br><span class="language-pgsql">rec_film <span class="hljs-type">RECORD</span>;</span><br><span class="language-pgsql">cur_films <span class="hljs-keyword">CURSOR</span>(p_year <span class="hljs-type">INTEGER</span>) <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> film <span class="hljs-keyword">WHERE</span> release_year = p_year;</span><br><span class="language-pgsql"><span class="hljs-keyword">BEGIN</span></span><br><span class="language-pgsql"><span class="hljs-comment">-- 打开游标</span></span><br><span class="language-pgsql"><span class="hljs-keyword">OPEN</span> cur_films(p_year);</span><br><span class="language-pgsql"><span class="hljs-keyword">LOOP</span></span><br><span class="language-pgsql">    <span class="hljs-comment">-- 获取记录放入film</span></span><br><span class="language-pgsql">    <span class="hljs-keyword">FETCH</span> cur_films <span class="hljs-keyword">INTO</span> rec_film;</span><br><span class="language-pgsql">    <span class="hljs-comment">-- exit when no more row to fetch</span></span><br><span class="language-pgsql">    <span class="hljs-keyword">EXIT</span> <span class="hljs-keyword">WHEN</span> <span class="hljs-keyword">NOT</span> <span class="hljs-built_in">FOUND</span>;</span><br><span class="language-pgsql">    <span class="hljs-comment">-- 构建输出</span></span><br><span class="language-pgsql">    <span class="hljs-keyword">IF</span> rec_film.title <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;%ful%&#x27;</span> </span><br><span class="language-pgsql">    <span class="hljs-keyword">THEN</span> titles := titles || <span class="hljs-string">&#x27;,&#x27;</span> || rec_film.title || <span class="hljs-string">&#x27;:&#x27;</span> || rec_film.release_year;</span><br><span class="language-pgsql">    <span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;</span><br><span class="language-pgsql"><span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;</span><br><span class="language-pgsql"><span class="hljs-comment">-- 关闭游标</span></span><br><span class="language-pgsql"><span class="hljs-keyword">CLOSE</span> cur_films;</span><br><span class="language-pgsql"><span class="hljs-keyword">RETURN</span> titles;</span><br><span class="language-pgsql"><span class="hljs-keyword">END</span>; </span><br><span class="language-pgsql">$$</span> <span class="hljs-keyword">LANGUAGE</span> plpgsql;<br><br><span class="hljs-keyword">SELECT</span> get_film_titles(<span class="hljs-number">2006</span>);<br><br><span class="hljs-comment">--返回结果 ,Grosse Wonderful:2006,Day Unfaithful:2006,Reap Unfaithful:2006,Unfaithful Kill:2006,Wonderful Drop:2006</span><br></code></pre></td></tr></table></figure><p>例子：游标作为返回值返回给外层调用者，调用者可使用fetch语句获取游标内容。<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR REPLACE</span> <span class="hljs-keyword">FUNCTION</span> tf4(<span class="hljs-type">refcursor</span>) <span class="hljs-keyword">RETURNS</span> <span class="hljs-type">refcursor</span> <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;</span><br><span class="hljs-string">BEGIN</span><br><span class="hljs-string">OPEN $1 FOR SELECT c4 FROM tf1;</span><br><span class="hljs-string">RETURN $1;</span><br><span class="hljs-string">END; </span><br><span class="hljs-string">&#x27;</span> <span class="hljs-keyword">LANGUAGE</span> plpgsql;<br><br><span class="hljs-keyword">BEGIN</span>; <br><span class="hljs-keyword">SELECT</span> tf4(<span class="hljs-string">&#x27;funccursor&#x27;</span>);<br><br><span class="hljs-keyword">FETCH</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">IN</span> funccursor;<br><span class="hljs-comment">--  c4 </span><br><span class="hljs-comment">-- ---------- </span><br><span class="hljs-comment">-- Dalian </span><br><span class="hljs-comment">-- Tokio </span><br><span class="hljs-comment">-- Xian </span><br><span class="hljs-comment">-- Changsha </span><br><span class="hljs-comment">-- New York </span><br><br><span class="hljs-keyword">COMMIT</span>;<br></code></pre></td></tr></table></figure></p><h3 id="声明游标">声明游标</h3><h4 id="record">RECORD</h4><p>用RECORD（或者Table%ROWTYPE）创建（FOR循环用）游标，最普通</p><p>例子： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> totalSalary() <span class="hljs-keyword">RETURNS</span> <span class="hljs-type">REAL</span> <span class="hljs-keyword">AS</span> $$<span class="language-pgsql"></span><br><span class="language-pgsql"><span class="hljs-keyword">DECLARE</span></span><br><span class="language-pgsql">employee <span class="hljs-type">RECORD</span>;</span><br><span class="language-pgsql">totalSalary <span class="hljs-type">REAL</span>:=<span class="hljs-number">0</span>;</span><br><span class="language-pgsql"><span class="hljs-keyword">BEGIN</span></span><br><span class="language-pgsql"><span class="hljs-keyword">FOR</span> employee <span class="hljs-keyword">IN</span> <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> Employees</span><br><span class="language-pgsql"><span class="hljs-keyword">LOOP</span></span><br><span class="language-pgsql">totalSalary:= totalSalary + employee.salary;</span><br><span class="language-pgsql"><span class="hljs-keyword">END</span> <span class="hljs-keyword">LOOP</span>;</span><br><span class="language-pgsql"><span class="hljs-keyword">RETURN</span> totalSalary;</span><br><span class="language-pgsql"><span class="hljs-keyword">END</span>;</span><br><span class="language-pgsql">$$</span> <span class="hljs-keyword">LANGUAGE</span> plpgsql;<br></code></pre></td></tr></table></figure></p><h4 id="cursor-for绑定sqlquery">CURSOR FOR（绑定SQL/query）</h4><p><code>&lt;cursor_name_a&gt; CURSOR [name datatype, name datatype, ...] FOR &lt;query_b&gt;;</code></p><ul><li>CURSOR和FOR之间可以声明游标使用的参数。</li></ul><h4 id="refcursor-未绑定query">REFCURSOR （未绑定query）</h4><p><code>&lt;cursor_name_c&gt; REFCURSOR;</code></p><ul><li>未绑定query的游标可以在不同query之间用</li></ul><h3 id="打开游标">打开游标</h3><h4 id="open">OPEN</h4><p>打开绑定的游标 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">OPEN</span> cur_films(year:=<span class="hljs-number">2005</span>);<br></code></pre></td></tr></table></figure></p><p>打开未绑定的游标 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">OPEN</span> my_cursor <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> city <span class="hljs-keyword">WHERE</span> counter = p_country;<br></code></pre></td></tr></table></figure></p><p>PostgreSQL中打开游标并绑定到动态查询（有点像python的exec？）<figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">OPEN</span> unbound_cursor_vaariable [ [<span class="hljs-keyword">NO</span>] SCROLL ]<br><span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EXECUTE</span> query_string [<span class="hljs-keyword">USING</span> expression [,...]];<br></code></pre></td></tr></table></figure></p><p>例子： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs postgresql">query := <span class="hljs-string">&#x27;SELECT * FROM city ORDER BY $1&#x27;</span><br><span class="hljs-keyword">OPEN</span> cur_city <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EXECUTE</span> query <span class="hljs-keyword">USING</span> sort_field;<br></code></pre></td></tr></table></figure></p><ul><li>在这个例子中，我们构建一个动态查询，根据一个sort_field（好像就是$1）参数对行进行排序（orderby），并打开执行该动态查询的游标。</li></ul><h3 id="使用游标">使用游标</h3><h4 id="fetch">FETCH</h4><p>获取下一行 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">FETCH</span> [ direction &#123; <span class="hljs-keyword">FROM</span> | <span class="hljs-keyword">IN</span> &#125; ] cursor_variable <span class="hljs-keyword">INTO</span> target_variable;<br></code></pre></td></tr></table></figure></p><ul><li>该FETCH语句从游标中获取下一行，并为其分配一个target_variable，它可以是记录，行变量或逗号分隔的变量列表。如果找不到更多行，则将target_variable其设置为NULL（s）</li><li>如果不显示指定方向，方向缺省为NEXT。可以为：<ul><li>NEXT</li><li>LAST</li><li>PRIOR</li><li>FIRST</li><li>ABSOLUTE count</li><li>RELATIVE count</li><li>FORWARD（只适用于SCROLL option声明的游标）</li><li>BACKWARD（只适用于SCROLL option声明的游标）</li></ul></li></ul><p>例子： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">FETCH</span> cur_films <span class="hljs-keyword">INTO</span> row_film;<br><span class="hljs-keyword">FETCH LAST</span> <span class="hljs-keyword">FROM</span> row_film <span class="hljs-keyword">INTO</span> title, release_year;<br></code></pre></td></tr></table></figure></p><h4 id="move">MOVE</h4><p>移动游标 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">MOVE</span> [ direction &#123; <span class="hljs-keyword">FROM</span> | <span class="hljs-keyword">IN</span> &#125; ] cursor_variable;<br></code></pre></td></tr></table></figure> -如果只想移动游标而不检索任何行，就用MOVE，方向和FETCH一样。</p><p>例子： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">MOVE</span> cur_films2;<br><span class="hljs-keyword">MOVE LAST</span> <span class="hljs-keyword">FROM</span> cur_films;<br><span class="hljs-keyword">MOVE RELATIVE</span> <span class="hljs-number">-1</span> <span class="hljs-keyword">FROM</span> cur_films;<br><span class="hljs-keyword">MOVE FORWARD</span> <span class="hljs-number">3</span> <span class="hljs-keyword">FROM</span> cur_films;<br></code></pre></td></tr></table></figure></p><h4 id="deleteupdate">DELETE/UPDATE</h4><p>删除或更新 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">table_name</span><br><span class="hljs-keyword">SET</span> column = <span class="hljs-keyword">value</span>,...<br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">CURRENT</span> <span class="hljs-keyword">OF</span> cursor_variable;<br><br><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> <span class="hljs-built_in">table_name</span><br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">CURRENT</span> <span class="hljs-keyword">OF</span> cursor_variable;<br></code></pre></td></tr></table></figure></p><p>例子： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">UPDATE</span> film <span class="hljs-keyword">SET</span> release_year=p_year<br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">CURRENT</span> <span class="hljs-keyword">OF</span> cur_films;<br></code></pre></td></tr></table></figure></p><h3 id="关闭游标">关闭游标</h3><p>关闭游标，释放资源或释放游标变量 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">CLOSE</span> cursor_variable<br></code></pre></td></tr></table></figure></p><h2 id="触发器triggers">触发器Triggers</h2><h3 id="trigger">TRIGGER</h3><p>触发器，在指定的数据库事件发生时自动执行/调用 <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> TriggerName<br>[<span class="hljs-keyword">AFTER</span> | <span class="hljs-keyword">BEFORE</span> | <span class="hljs-keyword">INSTEAD</span> <span class="hljs-keyword">OF</span>] Event1 [<span class="hljs-keyword">OR</span> Event2 ...]<br><span class="hljs-keyword">ON</span> TableName<br><span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-keyword">ROW</span>/<span class="hljs-keyword">STATEMENT</span><br><span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">PROCEDURE</span> FunctionName(args...);<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR REPLACE</span> <span class="hljs-keyword">FUNCTION</span> function_name() <span class="hljs-keyword">RETURNS</span> <span class="hljs-type">TRIGGER</span><br>...<br></code></pre></td></tr></table></figure></p><h3 id="trigger作为函数返回值">Trigger作为函数返回值</h3><table><thead><tr class="header"><th>Trigger</th><th>NEW</th><th>OLD</th></tr></thead><tbody><tr class="odd"><td>Insert</td><td>Yes</td><td>No</td></tr><tr class="even"><td>Update</td><td>Yes</td><td>Yes</td></tr><tr class="odd"><td>Delete</td><td>No</td><td>Yes</td></tr></tbody></table><p>例子： <figure class="highlight postgresql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs postgresql"><span class="hljs-keyword">Create</span> <span class="hljs-keyword">Function</span> checkState() <span class="hljs-keyword">returns</span> <span class="hljs-type">trigger</span> <span class="hljs-keyword">as</span> $$<span class="language-pgsql"></span><br><span class="language-pgsql"><span class="hljs-keyword">begin</span></span><br><span class="language-pgsql">  <span class="hljs-comment">-- normalise the user-supplied value</span></span><br><span class="language-pgsql">  <span class="hljs-built_in">new</span>.state = upper(trim(<span class="hljs-built_in">new</span>.state));</span><br><span class="language-pgsql">  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">new</span>.state !~ <span class="hljs-string">&#x27;^[A-Z][A-Z]$&#x27;</span>) <span class="hljs-keyword">then</span></span><br><span class="language-pgsql">  <span class="hljs-keyword">raise</span> <span class="hljs-keyword">exception</span> <span class="hljs-string">&#x27;Code Must Be Two Alpha Chars&#x27;</span>;</span><br><span class="language-pgsql">  <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;</span><br><span class="language-pgsql">  <span class="hljs-comment">-- implement referential integrity check</span></span><br><span class="language-pgsql">  <span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> States <span class="hljs-keyword">where</span> code=<span class="hljs-built_in">new</span>.state;</span><br><span class="language-pgsql">  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">not</span> <span class="hljs-built_in">found</span>) <span class="hljs-keyword">then</span></span><br><span class="language-pgsql">  <span class="hljs-keyword">raise</span> <span class="hljs-keyword">exception</span> <span class="hljs-string">&#x27;Invalid State Code %&#x27;</span>,<span class="hljs-built_in">new</span>.state;</span><br><span class="language-pgsql">  <span class="hljs-keyword">end</span> <span class="hljs-keyword">if</span>;</span><br><span class="language-pgsql">  <span class="hljs-keyword">return</span> <span class="hljs-built_in">new</span>;</span><br><span class="language-pgsql"><span class="hljs-keyword">end</span>;  $$</span> <span class="hljs-keyword">language</span> plpgsql;<br></code></pre></td></tr></table></figure></p>]]></content>
    
    
    <categories>
      
      <category>2023F</category>
      
    </categories>
    
    
    <tags>
      
      <tag>专题整理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>绿格碎片</title>
    <link href="/2023/07/03/%E7%BB%BF%E6%A0%BC%E7%A2%8E%E7%89%87/"/>
    <url>/2023/07/03/%E7%BB%BF%E6%A0%BC%E7%A2%8E%E7%89%87/</url>
    
    <content type="html"><![CDATA[<h2 id="食来自对食相当不敏感的人的总结">食（来自对食相当不敏感的人的总结</h2><h3 id="基地内感谢后勤">基地内（感谢后勤</h3><p>卤肉饭 番茄土豆牛肉 黄焖羊肉 一次比一次辣的凉拌黄瓜冬瓜虾皮（有点黑暗料理 土豆片炒生姜片（还好不是丝）非传统粽子（油饼食不食 大肉面片作为主食的凉拌土豆丝（土豆主食说：米饭是淀粉，土豆也是淀粉，所以土豆可以代替米饭人生第一次吃冰粉（好吃） 冰西瓜、桃子yyds 西凉姜饮（怪好喝的——字面意思</p><h3 id="基地外感谢曾叔">基地外（感谢曾叔</h3><p>传统牛肉面 番茄牛肉片拌面（最好吃的一顿</p><h2 id="事可能指的是之前从未做过的事">事（可能指的是之前从未做过的事？</h2><h3 id="做了">做了</h3><p>从绿皮火车第一节车厢走到最后一节进沙漠的时候看到战斗机训练（这是可以说的吗（后面就没看到过了在沙丘顶上爽吹最狂烈的风（喜欢风看银河、星星和流星（寻真理于星辰，孑然亦复如是掌握三种种梭梭苗的方法（曾叔微操法、石叔大巧不工法、金华狂暴挖土法）第一天手掌就成了战损版，直到最后一天 浇水（我们一般称之为“驯服野生水管”浅捡牛粪，狂暴扫地 咀嚼空气中的沙子，品尝饮水中的无机盐作为第一组洗碗，创立了2h洗碗记录（最短记录于次日被打破（45min），最长记录于x天后被打破（2.5h））学习投掷飞盘，打乒乓球“杀意感知”=爽玩狼人杀（猎人第一晚被刀盲狙小狼；女巫暴跳预言家胡言乱语）与三国杀（当主公手刃忠臣，当忠臣手刃忠臣；冠军皮肤忠马岱：一穿三反）沙地足球赛（10v10公平竞技 乘坐不同载具（军用卡车、皮卡车、曾叔的丰田霸道装人影办的保险柜，看到气象导弹 赶牛，沙漠徒步1km 绕着基地飙车，修围栏抬发电机，学习各种发电机的启动方法 研究基地的电带动男生洗澡时引吭高歌，学会了一些从没听过的歌（点名表扬《天外来物》、《嘉宾》）12男挤在蒙古包睡觉解锁绿格隐藏成就：睡沙丘上（我解锁两次.jpg（太喜欢了，以后有条件必如此（定制化沙床，睁眼满目星空发现仙人掌、壁虎、蜻蜓等神奇生物各方面免疫蜜蜂（视觉、听觉、味觉）（黄色防晒衣=招蜂引虫 见证沙漠下暴雨看到美丽朝霞与晚霞，追逐朝阳与夕阳 调频FM 接受化妆与护理方面的建议变声期后第一次当着许多人面正式唱歌（内心感触<strong>巨深</strong>结识新朋友 克己</p><h3 id="没做">没做（</h3><p>滑沙（呜呜呜 生火与做饭（基本没进厨房（逃吃羊肉火锅（开嬴趴不叫我.jpg 和每一位成员合影（xm迪彬拍摄大量关于自己的照片（纪蓝jj是天使 乘坐摩托车与ATV给曾叔留下一段话（好忙好忙TAT 抒情（是不想吗 喝酒（坚决不</p><h2 id="人">人</h2><h3 id="非团员们">非团员们</h3><h4 id="软卧的老爷爷">软卧的老爷爷</h4><h4 id="硬卧的造飞机的夫妇">硬卧的造飞机的夫妇</h4><h4 id="民勤汽修厂的叔叔">民勤汽修厂的叔叔</h4><h4 id="曾叔">曾叔</h4><h4 id="杨叔">杨叔</h4><h4 id="大石叔">大石叔</h4><h4 id="小石叔">小石叔</h4><h4 id="记者">记者</h4><h3 id="团员们">团员们</h3><h4 id="cjy">cjy</h4><h4 id="cyq">cyq</h4><h4 id="cqr">cqr</h4><h4 id="cym">cym</h4><h4 id="dxw">dxw</h4><h4 id="djq">djq</h4><h4 id="fyt">fyt</h4><h4 id="hyx">hyx</h4><h4 id="hyx-1">hyx</h4><h4 id="hdb">hdb</h4><h4 id="hyh">hyh</h4><h4 id="jhz">jhz</h4><h4 id="lyx">lyx</h4><h4 id="lh">lh</h4><h4 id="lzh">lzh</h4><h4 id="lqy">lqy</h4><h4 id="ljh">ljh</h4><h4 id="ld">ld</h4><h4 id="lll">lll</h4><h4 id="lsm">lsm</h4><h4 id="lyn">lyn</h4><h4 id="lzy">lzy</h4><h4 id="phh">phh</h4><h4 id="prt">prt</h4><h4 id="smj">smj</h4><h4 id="sr">sr</h4><h4 id="ssl">ssl</h4><h4 id="sjm">sjm</h4><h4 id="wtx">wtx</h4><h4 id="wyx">wyx</h4><h4 id="wle">wle</h4><h4 id="wrx">wrx</h4><h4 id="wxz">wxz</h4><h4 id="wjl">wjl</h4><h4 id="wn">wn</h4><h4 id="xzh">xzh</h4><h4 id="xza">xza</h4><h4 id="yxj">yxj</h4><h4 id="yss">yss</h4><h4 id="yjj">yjj</h4><h4 id="yj">yj</h4><h4 id="zhj">zhj</h4><h4 id="zkj">zkj</h4><h4 id="zl">zl</h4><h4 id="zlh">zlh</h4><h4 id="zyy">zyy</h4><h4 id="zyh">zyh</h4><h4 id="zzc">zzc</h4>]]></content>
    
    
    <categories>
      
      <category>2023暑假绿格</category>
      
    </categories>
    
    
    <tags>
      
      <tag>碎碎念</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>绿格Day0呓语</title>
    <link href="/2023/06/20/%E7%BB%BF%E6%A0%BCDay0%E5%91%93%E8%AF%AD/"/>
    <url>/2023/06/20/%E7%BB%BF%E6%A0%BCDay0%E5%91%93%E8%AF%AD/</url>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="Oh, this is an invalid password. Check and try again, please." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="d075e7787d789739ed65b78085fa6f5a78975585f26265f11261b930e4217609">0ba350ecacedc9059da19a514f23f580769b0b6488f550a85b3f918107968e85adc9ba8607d4c46da5757b0224f7c79d1f95f4c41ce4d5855cfc36c4e009f382ff1b96c61d3b2319111a1d1f3f53dc9d9b2229c37bcbcbb8abaf8be6416089b06c06f45240f379aea38cc5a9837dbb35b55031bb3e0fb26771e2cd061e24c2cfe31b02b8083fa0a1739c5b1f4dfc5055086aabe2a0753e738cd6a9ce4a795758d82565b60a0bbdc7ab298d8bfea0a3dd5c2ef34f21cafe364efc8bc289101bb3d46eac1fb0a1b9fa99ea5139245cfda9e2d1c281a53e3e2639cb3e0ce7b7c4ceebdcfa1c5dfd5e9f9349ba9c14b22a0c82ff1635477a0c730cff00e789d4b8d104552e1f0ff070eb25c129517c62ba6ba502b9f2fa417eb361a7f3b21a3b5c91f06718b0c8e6d8bf3e64031a037ce2a9a9e34d46d9df82829ecd58a400dccc3985faef4646880016bbf20113b26041f5fb0483affa0ca66d8fac71937d50d9f0adf5b82b7218303c428d67ff46efbf0df959bc1df735afe8be95aa58fe048ba3c8f8592790c4dd9095e7ee4c67e759e7afe76b8f3f292aa597e572f3db70ba2649a1b041bd33eed3b2f1cccba316d9d136b982c033bdee598045a146a9384eaaf92a47cd712e55bf569c97cba423c8d2fb2390bcbb7ef8c9610192a4dcc22c9e9334850128d5dde297d58a6b710ff63b9b80d2e94eb5a53e5c0a5eaed386762069c175b6ef2a47dd9e8af87c92cfba5c8c1492b0a4f35167721359cc2bad7b3043e40f70959fdb70e2b2540396df6ee7c61f5132d2079a1113130f8176125dd928ca27a09cc057cf0602f0fa77223e590401796fa91a70cff41d2f5e270cc7a8aef91327ffd6f4d8cc4bd8da31d24e15f41d788add80d477e98618994eb1c261459fb9033fca443e7a780d1cdb25588694166088878b76e99c2f4463cb4d507c5cb26d97024a308726e892bf0ae737c2be0cac6140e3b596877574254c52ec504821c82585e6a2fbf65bbdb2b604e9195e9e28182463d7e95f9bee7607fba6c62d5028077abf8f83d7513921cf63c9de69c02fe2a99354213e97e463e37fb1a292bd03219b76a54c8834bbba07faa06ccb7dfbf628d06a0d9faae15d421e0d53506e99771ac6fea7f31bf6feb9f5ae3650c7a708bbc61b10cb68c2dc2ce1123f6fa9871d07724a9f73f8e3bfdbc501d505cb053fca1521ef17f7e40f7c324de2936b82a934defe3c5a58196fd5519cbdd7db6b5c69ae2faa549cbdaf8380b5190984e045c47782f566a6b193b39c704f2fde049156e47b99a02696eef723721221e730701e8f3b68bc8c5ea84341bb58a13be53c60547fdb1ce62da5a4244a774058f938aeadb58b36788b01423d4b2ded5f258c5b448131c053f8b6e2bf04e96bac20758ffb48344584e91530c7f94dc5c4ea9cf35a81426faf9e0d1b712cc90870065ac6c2773674dc884658a771e323feec34787eced2cace0c5bc96b19d90df98220aba8939af5f95c1e2bfc307ffad498a396362750a069daeee84e9dc2fe1f19e714d31a2321dfe9d314ac09f24327664e9f29a8ebd28413f6ea16ec60129379511598cc5250f3c422177e268f21d97992bfaf1f842ef9f8a0052ab7e52bc485ac737391311984fbf9ff4b9fe6f4583bc8c79cc1527aa6f9883f4c7714888988cb81b8e827350b10b3d3437bfd62a8b272f087d9620df01bfcb697443e58eb0df831e4b7fcb15c10675f38104b8381934d5f6d0747291dc65e6522670e3d10e0348f555487f259acd331cbb97ca651843d4da6519bb30c00bf7a826bbf36d5c25f23b1929a9018cd3100e6af0e7711a2df61eb51670179eceb4222c5ce0f2018dad4db8cb6a2e0547251dc02f4d870d5b76f3554cf50f6ede53fab07b7f29c57ea55f8943918b0086b74ebc102a5b2a866635d45636f3cd0f6dc700bfc8b9b618a2d6f3ad73d6e10c2d265b1c856bbf206fcaa94944a6ffba77934f50458a3faf0ff2a5b73a06e53db38e8022d77ef6d8bc449858008bb4c4e51887496bf1c327217f5f48a13340048c6c574c3f65f3cc779723969f2dac571ac8575622e9b8a5057b00b68a632552b4f6eeef53920b0855c383ee9523f0fc4cf16e60ac4eb0db4c2b205976ffd5aea1017df69d413423f0d684f0b3c25b3d40fc59efc331304995acf12c448729cc0c7c706f8b280738ce1c596dc6abf95dc6bb89d15a31bc713e943f70e7ae167e347329883a6ac05bf862c8b0bf0c740c99a551ef3360c8b05a570e7c5fd7e4fc49d96077f123111d06f2aa49f361150e42b98a0cc060b0379d99171fbc2666dc8a8e5e6ebd1be05c6274fb79277137d756a5b8b92de9a096f564b67922cd7089fa92d59d126ae3aea0268c3c7a74e0c221bcbb2f240a2730c0b39e69355428b800fcea9007a3154507e1c7fa963c75c6fccc2913dc4bb50ddef8ef03d53b7508cee1832e8c50a18949925c5cb869ad519f38fdf3cb39619f8fc3f83fbc3d1fc2a9092fd3f53091c09de96c0100c02f2a34518c817b2a781aad43a0ebc294c13d8e23aaf8f04f1ef3dd92dfbcaef9b0562fe56a61a4fcb28537d49197f4c68eac32cdfbd24dfb337e28287690ac2e3d834a64773b08f292d0424909bccad4070e7896389eb8c5bb76d082a4399b9c7e1436956a22c03de8f5a1652c845006e25e82a8bbd1da297e4d75a2686c77bbb768ff3739021a365bf17131553bc0fe5f03639d95c457e3c9af622b47ce497383ff59f773ae4d22a44115ffe1a3437138335d225d2e0237e9af6b53e9ba9e88b1011490df3c3993f6e6b79214f78522123de8d6b96b14e83673e3e737dbe49b9fb0224ecf22f2fdb41a025fa9a2f92aa786dbf3e99f4f12b28247feb18df726555fc38682966c9336c10038284c32b3a4401e72253ad506b0522720b7891d2c5136d245c4e90892cdc334fc8985d3a50e6a038983f3728691af85197b17cea1f44ee030d5bcecb4a74bd8c9d6299a81cfcd097c9f4d0aaee00fa0e77cd3c9ec34fd0d897f7a3e8755fded48e0f24ecc0b1a8f8cc401c7ca8ee9b3f84137b356255d641b243a87f3e7653f6c0e2dc652ebe04737406cc70035b96b506ff3f3b5ede31e8017402b0c4a76bc2b244f6573edee1985e7bd1fb2494463139fb650696fb42b21a27c588ebfe250f1be3a08c01f8bc8a91881990dbaa73a14a9e9919d0eafa64aef55bf29e293995b495b52768b12f7d8b61bd8a595502d8782c32d32a96fd70e8a80e89906793a2e69a40b07cec70fa184a97e285ba38ef6fd1656dd14f865048da0afc45c5a539d7750deecaeef1c8300f738fdd4a81493f505cc05f1d4fa490549368b0454d4a94fbd3a26bf757b956ba21035a86e8cbd0946ad3851594ea480e796989420d2c0503b7dd87033d1c408a23508c7850338bbd5952cc1f1e34df40c0b8bfc7ce1810e0aa1f86f055e1ba62ed47418fc55cbbd8fe253f3637363701bb8828c17fe3c432327d601b0119eb914174b7a5ea4cce7dfd55340bc74ec68689e6e81ea2b9361aaafb441b5339fcf39880c3d830290e6cb5abeb1727f11330fa53ad6cd33971efbf18c0a920c975038cabd535d2b10fc0cf1493e9e947781ca1f6242693209d36469d09c4aed5c38fe7c7d044b7669e048809f943f7c05c39720d3fc7942dab2336e2f0b4fc9f0ed62e4e82aa00be75f8fe1b8888d9319f78f06954a1cfd0acd3c96872b488630590f4b6792e419baf5b1a133f6eab451f50d3f68d4d475d75a62568b1d535fae6708aa6ef5b0e8b45333d57e03ceed73c68e54eebe8169f4017546cc9a7faa58337dfb858f4ff00838d9fd9c04e9b914f5cfcfedd5168253479a02312dc1f0531a5accde469f8ef824e1dc952a2dc59752fb0c9f9afa6f439bf1b9c3b2db8e43939d69dc1a67b3db3998396d29eeeb5d670eb0ba5b5639e8c9b094f6d3d30c9d19a4b09637bd5e55f4d13bbe65ce181aa5d5001cc0ee5a1c3af25e1d07a719177bdacc43382c6c0e90edbfd32de94daf2ed629c511f333c144bac307a00291c4c55ac62c331e31394035b9128444e6bdee6ac2f11863e2872d4302ecc5a30857621dcd862af409134530c9756cec7a6b2980027d36141e2aa75f738c819ea7c93aafe9657960a40f3444a64f49901277da74df0b6c16b0d2aecf2107e367b5c26d7608d72cab2bf078ca7e4e2cb83e84d194236988a43fe000439fee9f7fb97700935c757b3b4d587966f2ce970ca3b401b325103200dcf322ef84d122f5a84b89cffe3b8f17b81d41f0ee2ed88499283536beb1c2e589d0189e1715cb010eb0fbface6e846b23654b17aac60bddd3b0edbef195193d77cbcb6ec86df86ef4af0b5600fac961421cd65565404a12a8f26ca5d93aae3f4cca3335782cacd809a86dc85803d6d11945caa93d49165ba691496825d89db43609447054598015190c827f5a381d5a2978b50535fe33fadcf25a6c8fdd7682731140bd13c06333d86c2f176503188f26e3a822f613c81ff09ae276a74fdde133fdebd5513f04d71df7d968aac1206fe569f7d9aa23056b7cea45f8cff0c70b273c75ce50571f383015911391ad4aaab9eef4809818ea03da804ad2b7b228447593a1277fe9b3c49ef69e9b3339a9a45dae6f2dbf158bf4e92d97b7c9fe32eddbed6a17f4e5cd957839ce1e96ed22823837d92bb600373670e0224a31c1f993a2e18780c31decf907ca77cd591ad06adf2c8226ae92be90d84cb90f5ae7e2eb04631ca30de606f3035fefca6b6e384fe31d0703ad2c711fae104322304618f90ba4d3ba77cd7788e7173306228ed0f738edbb5f37e8da509f6c5fe37d4ed638586ec2e7edb445f6bf54c83e3d650d658a370fb1d605e2f3db7cc854eae303daf03d83eb56016f4712de0cf397148786e01804a95c9967e51b1c33fac4c1faf080694e4589ba020340d3125d496c99e924f3cad24789d288ca20b5ca6258619673273218c66cfa07d781bf15d85b609026078aaa45bac8aedb3dceb67e333f9b186caf3dd1d5dff207e9e6a4fc066a0c67ab98bc0d0b218160f13866c6c483e0e824ac2a9bb3ff8fb7419b2ccda2edeef72c10c579e2dfa684d0dde62e6c77db0349f014359bb1468f08ec611c78a31c46e7d7ffcd46f8a0a03254a87cedf6cf44d3d6b60068b4bbd2eb53b0a145dce3ead211456b759ce781dead2c2d4f954e5d542b44ac4d5463de1497390168e732070a52f2a5a2534585d1953132448a1b3608c14251fdb22b54832fd458c6495c9ff6950ef1d0da0734873a23cac912b3a060ccf3cefe7d62343942888d62bba566ef0e8f76c123c4e109c7a9dce7b2007fc8604cda62a8f230b352faa3d18a42b59ad2b61e3e39ac4e0b82149147e277454e523d86d64b6477b15c295a1795c4253dbb54acb9dcd024d072a93c33b31997b9877e364ae01f69fe59267057e286d79d3822269257dc1f8aa88cf0210857ea919fd746546cb97c17d4a89bfa4d32ad5779755941405f8769ef380ce3f4cbbb4c0098faa506f112e1c2530aabaffffc15068b78d2a3ea818e7c3b9c5f1f61236eec5087432915fd9764042c3b37dd14ab20b9afbd1970a5fc10f6d9734b5aa1fce2336f9a4f01cb1195bc97a2910495d8d5573d7cb0511c0d33ebcf2ef5490cd63555a2f3f4062295181f1e48bba2378caf31bc92845be62e3bd9f72ee61600feeeafdb72f22dc764f6b3e9ac45d503bcd71299d9cd3f89267ce0ed2c3613e8e812a46aa8ccaaadeeffb3afd9515f4b0ed27a9912c04bc2a4d66dd698374dac3125a2f500002702894afd744add209a25e80c89036f4b8247ffb75369f98a99407808d19984af4cd9fba1c1da3c6b73a3f4138f563801b3436ea6a41eb5447b273cbdf05171e9fad5f57faecbd13d9929c5d426c4f605db4ab7ed07ec80aa7c06edac2b8492831f586cc94a91024eb2b081ee982bf8d49c0ac792ebe1114cab49fcb0c2b57fdac895f8a26f2940fa6cc3cc95e58b2529837efb46ccf985875c8b0c3aa5aa51742507115be4121f34ab4c3d878d1a1e7d6ba68b41f9a54d8fc11e322888b5bdfcf38271f71387262f542c8d045204e1ea372051185c8cc031b00ca605398b5c704987b455ebeddcd20f96c27a4006938f0fd0e2c41a5de1a9c49100c16f6b4f9136edd0033e77cba596a61c225dfa9023455dc9cbccf8cae13fed6adf555dc3b01331ef1c333af2eaf607b1702c6af8db72c32b37c9640c7371d5f8d04b6a14062823d01247316db3f2ea6782cb540a4c221d6a5cd0bf26d8f1395e0f88ae7327144bca96b4179b1a7e6d484c08c91dccac8a3bb2546feda92155fb328023945b87890b10ce36c03cd941e78d9a3f6e87cafd9e4e7e5c8d8632284ac16eb2a0937d66d103ba7c9a0c843ff87a45fe2d6673bc4f3798abc6ffc30ff72197605a36b0c2f716cf45b408ad2df4d0583976da81207e996af25ecfb95a7a31078922859321dffe8865e617d4a3998aee7f19ea20bb6c070b533e134c6dea0e7529058b7c7d132bebc2eb80c4c33a6154cdc6531dac00a4f506d40cc10b7981297ed071390cfb9174a75b7e5e096d2e8af07cad53523c86a27abe688d91de0683999c56518cdc59a5f8df2cc50ec650e6eab2812f25e988cc00b50985a669eacadaa1c10380eb8e3476d62f5576adefab901691fa4bd6fce244dc814b430fe73b1cad901c279810932de29f9d7320616bba3e3c74c51b71f3faf0c80f0154ed099574dc0a8a69d65fd1b3d71bdc765f5738807c0d35a4719a76b6b9db77b0f84e1e53ce3b496fd0587127128d71f621d68ef23e0fc85d221ad22617d71cb25e3d9c28f40c143062fd3e114c4811c2cbcd946f7048b535ce60f269de633d38f4250c9aa19f27ea728a01944a36b58b649659e9215f29e0fe23b54d1ae5124c81f582938d8d0037a8a7ee32dcd5efabfd9d4b60002951b2378e9c43c6bbd903f4bf8bc8b0ce90110d5f11eca0d33d8836b601f24ea8b89a9ecd008b1bf1365496b2bafff8807a802c23235114e32f790ba9a3b76b25d5050d958134df6680525a735038cdde9104a05b4de0a9de548331ed059f8d8b26ed0a1ab75d8ddb51b41b6f7e4eaaa17f5bd49401e137a6b5eb8253d158b49a9a9afd523acbceff7b05da84463cf66ed788b27a95dca342f1a9ef7ad6ccf1198acb5e7e0d89060d8c2a6b2490ed1a5f5a75c5a50af7b0f182d5aecefd287ab6ef4f91666f7724d05fe03d7f708a33aebe2f162bc1383857560e8ff9f918efdeaf97cd084cb3794a1d75e392f05c3d9955e2dda10d2ec62f6bb0d66a201c6153eff26a549f66f316b378f567c44b76b073808cb41de95ea79dc99b2e3f1a0f17278d63c9397ddaafa6e941d02b658781940d1bd9922345b1e187c6002fa75ba2d36dd5ad3c4c7a8d1aec962b8dd828a804fa159277a2f82e91993598951caf139cd2a681544d220274d5d6652bdfbe9c42d6b70a99b391d3613d999cc77ec39b547d414f16554b73deaf2ea97e3ad8625e8a7607630de9555b82065e2ef05ffccd6d5bc3357eda6b20b7b301ff45cdf7a8b037ee44041c0b88741d3db236fa465729081e0c2649af6e99da85a1a90027c47e3d7c9bb042fc74d7d1bd29e033fc8a1a4ad8beff49eee5d84fffa32d9d4b2a68f4e0e9c8e52dfb015eecb398ed3b03881cce5aef541ae5d97bbc411fb4ed366cb51f08de1dfef487bb08ff52232eec823ccdaa38ecce2e4603d52fbdb095b4db8ef0b952b4d60c0d38f75e9650cc8fec7ec7c2a7c5669caf96d21f30a4b4929bb70f9cbf406f4da5e2a34e54ba5faa9bf87898e5962f37298dc7a69c812b7b1a8ed9115a684727acfb318d868deea50548662f0c093fdf58f48af844a822ed9bc0c56c27ccb7985e0480082119e8bf1b54c99e8280a0693037f1680cfcb29a51ad39ecf331acdcbdce13f52e934b2831c7aa72876786898dce368025cce16928968b4a2e2730f8c867a872ea24e79b2b8283b06fcb7797acc56ca802b66a7c10557f00a3665241f024c466a7711568a273dce9ae047512451a3c97d2adee10af68f6929010924c0ee54bf35752a3a3fb1d88a1430ad57f1b78880603e99ebbdb98c2d441c988b37f9ebe6aaaea8b788e08c3fbfb619e1a8c0ee292a9dfd72072efacef6d91e4542024f07c6c7e6c756c4348464837972fd835cba150f0f60ccd06ecc1e1fe23d2c658797372aec46de30a2a4e2f3b221a235c5b6dd4701f6a0bd1d21e10cb7574db620ddc0e4c83b173098bd164232f96eaba66138024db8b787252d6f5e16ff1d5ae440e8a5ba0b1f7c421c5f9fd2134e8488e63a9f62b40c1097538bb4d11b85949b756ed6ee80180d1c1cc091224226c47e0745a063f0fc86b10d9d0b44fb4c129a8c30c910cbc016f17ce2ca3715dc7cfb5f8f48caa8e5bf50678ac0519e4d1cba9d20f99be0baeaffd7de493e7023b7658a994af4cc6c19986d4eb1580501e6e80637144cef8288c15ed899de938aaaa9ca4c3790cd09596508265857aab22e8a79e2573d999d9ad14edb14a9d63b89db0741872399cb2e00e1c6854ba2f8070d592b63a40c4e05e37a0b188ea2b623fa8a4790e47fdc00c6844546b83f237f84ed7d30e25ea41115c44f334e226f1a72839925e94bb211eec67f5543bffc3b09224bf15cd2a411d9d1402e1588abc19ba887e71fc34ab800a3b7c21e81f4c5f54bebb70570467a2d6fcae4472fd79125b9e6b08564c6cc3ae82a23e1ef8258990610fdfe88e0250bed9379a3e6c32b2314f086656bccc42ad368e6d37cc73216b9924b027f3c953085a4b59c2641741d854c8b32ed0007a978b29cd5fad0ab75b8b9c905d31140d61ea6639e90d6a33335cf831817b8623fabc983cc9c2ce228c6eb07da66a2d41c6f3bc369c5e356e6fd417d2fc4e353514b4d7ab4d685631e9f1ff5068a9a6c818c98ffe4f92ddf283bb600e3f7339d9736ba6444c9ff768a65bb6611fa8b33078ba753371a74dbc456f3b0a1d190ffd5f1f6303e85e0114320955396a6172ccae67cfc1a7e14a77ead80793e0880afba85d4b5974f03f63d65232ac87c9d2dd1dce0c96f51e0212cf144a1866f993b831c2eeefd9004af2872e3613b98ed40b025248b18c27ae13a19abfd121cc91f52ce97da11c5fb62cf4c1920d19cd49f82a2986c464f0ab6b945314823a0fdb6918189a4b8acfd473731035cb1469563e7b285cdfd84d6dea530c2e27277b44c47400d6837c05afae4cf6f65aef411ad3c17ec8ee23a1e02b463d54a5005c866349f8b472652bc6d8c264b9bf9fce475a55acc267635bb4bb26be9d8e8d4d6a1b9f508ad9e64cec6a1275641331652ed1afb5fd4dc8c4cb07b24eb50a7d47f50993c4a564f8ef947f3907ed3bfe3501917222094072b3717521cee3b8fbcd10c1576a7c52ed98b63ab4df33f8527ca3c67770b50bc462df83e72c7988a626f1b4d920641c34d1cb32ed31edf9367d119939d3f167ba5fa493935dc7f75bd5de428e749130b575f5e08bf855d969d85ea0d48cb3c577190504eafc050b46bd3de59a9bbdd0aad9bda6b7c3a91765015c359c892fcb3dcc9ce7bd12209ae5d67820ba17d2115baf256fa37128e176b66806969cb3bcbad14123400c93699e31020bbd220873a2c5ce5c69b52ee3321e99c2600b97a5a72c632c62729c45c46f87250b7c8b5e2ea0dd9b72aad2e36bf6f43532d935103b8d44b327999ee160e55b4137820bdc52b71c22a5d2cd8c21461f7b317f40b2598942e32efa623d744d2925ad3a73c0c9e7df1e99352d914d0f1d8a806966f421e7ea523eacfaf2808125d8c1e6e9fc65b2bace86254a13ec2f885b16524ee060297d0fb31d5d465855376ad9540a8c70afb33a8c17704ce1c63867380e65af503df57a11f1df250747f1d56156d462e353c05fe56d558e59803bcaf3c5ad9a5060741058f00b300b79656bd8e46bed49ba525050ed60cfa3bc0f6a6e2e5a9e302106dd5c926ae2d2d41b16d61a98777daafe80c4b18ccae7eec959edde6a2fe5926b10ea0da8e37db9857a10e50608c0faccdd8924a8dad99baf11a5decd6804634cdf010e89fadfcd8780c796bea6f30ea337380cdb66b6b2f931e7e4f1d8a91677de27d698c1b42932350ed150ae24a18765cdfe0b37073b0878d2540a17082bb45cfb0b7225005f837ac8b3c020d3d7dabe68f11e7dd20ee5e748ea1a8a9f29949f0c5f7f0e4a320196ca77055049c99075da023c6467afd74c363f9a8ef7df217206e656efc53e12ba621b713545f2755acc621a73c8aca23111d69d8ac60bc7e6106c3817f309e4d527a7fbc7dcbce91c61937d4ceb33c905db54253e6e2f9e18ced816997dc70f71117be460b822e1c2ee0a6b358561f9503bb5872660c26a065f10781172fd2052028faac8e23d4fa42c32ac186e44988deaded00d53099d980aed37d67263a7c87036926f344ca5aa9c9019ced91222c7a3b9e135184dd181e11c5b6f7e1f3a449a1045c5768f8095731c80348b88711200e1f30f5bf1674d905a5a54610a838e8c43d46ccba0753913dd7112c988555d5b97dfff9a695c6eab95b0970c2a7ed3ff20b760426e123e67c8f28ba6dd3f4ea5645eae364ed9ff949e6e1034f5034bf998b1f8e7031464c10938065603d8485292e17673500eda998b4755eb639edf19d53686170e424fcbccc2914f8ca8914fd640f3ff67affc4b54a24bbfe6d84a11c7b7bd077edecb1b29562318853d4d9033a5c14004503babbf8bb32f9ab176408eb5a5f929384df571319781002670bcb8c699ae38fa08dbad94753ecd75dd0b19d802ead80abf4fe2a75b39bb23a70a1bb44219a9ce51340aedc1d669ceb88b567379faf3c074243bbe1635cf98731b0cba1d5747f376a56d02966d1c9d6cbf4932aa7196e3eee6569b730e33cd91d480fcab2d115ebe21c7ef7452e97d75228608fb3908c2e81271fad4ab7f3aa59b035d25aabfee6abd658270ca2b12109b7a2438f5042c4bf365b03de8e758fb7b23629975734b9ca1774cf463cf37d64f2efc9891b3122d0269bc50750e9f41fbfbcf9ee555d8c9398e7b0d86eb7dd2cb5f9d44de112a65484b244a1f095e2eaed7299f75fd7eb10ceb2d947b31bb377cedbd127b54748d5721e10e8f86d043c50be80f9c365cd29073901214e16c2d25878ea84cf6db3817e26efbd841d0fb676b0aca9db9c9b849fcd7c5d38f63eac21bb0c9546223c3266960f91fda80cd69156c82e4638517bc56f23b400cde0f6f423041eb64b3387ae3edc48cd5727724d08ba12b531cb2ad2bb5c72b66ed2ed83d41c9047080d7249b279e7bc25256f2fd6558901ad0e1efefb11031e781b949fd8794c5d4918a738a10ccccb67f73fb8c0d1fd71f781cb4bc863d3f7fef2ebc31a35742051568a15ca062edfe4149d1456e3cfe219779f20ffb2d0e6265a9b7f2e27e64b79a86349a2d3bdf3bf79fe8f48ac732316baef3c73a1336f242c64eafa0bc21d4015f4e21429abf7d32c59eed0aa8e5e7a802f114177599376e6257963ade1d97097d2c3687c1371799a41a66c556a13bce92c1667092fd715fcc3caa00b43415fb66036febdaddaee753b054417fdf6d7b4edc0d28e22e434b3c636acce83818436406ea4ee506488818dcc7271192efbc24d7a227c28f0d2d0e580563ec8fc3a92d14ce768ced2fa16edb059cd7007d36dc5200f32dff97960cc590b46fd779733a1ba6dbaf3fe206024cfd15781deeab2dad746fc2aed76591efee54f87f9c621282d46dc24a78b41ab23bd00ab02f62496398f2b5f114ba3113efe4c99d111ac9772c924a709e14e3067c953588d42de8ac80086974e0f2258c8c5f44f1b1f44e8d5af5f2107350d645e8ace7d2b879b23258be62355ed50c743e5332c5d198dea9dca633b936100d04527186d1b73f896956c7588d58825ecaaf1fead598716b7d25984f4950c40fd8b7cb0e3adfd6c38fac338d1a0bc4035b81dbb4a32f7811b9c31e8d88631c1f9c2ed8b91cbfdcb8bccc480cdc0d062d8f4fbe219aa19fbfc6ac43c6571a2abda13790b16673855dccfc117a5e588c53fac50604c015c8d851c7191d0ff453b967c2888ee3a14ac6c80838dea26b207c0a5d3be0548720c813c3414c096e5ec775ceea08a3a69ed91395043272342bb78d29b02d4af6319a8fcf31445a1867acdefbb1ba33e0c5c18295e646b0dad50090282864dfc42026b5536ed70636ecf38385428b6b43d743b24ce7718ef10c970683555bd67e9dd6053fbf00ffc02684571f8b60cc1ca62f6459d3b99950b7113da1a605ce7e0d53e69b88b0b4811c3d22966d195c56af7e07a8ba3581e4f32962b64a334098b8e64ea4072b416a80831f72ede7da0e5b7168e8c5aa212d9004e42b58807907d1ce0cc97df8dcfde2d47974272a00285122d1d0fd933591de4070b15ec820c6510d292c449d91b5277298674b3ab1579d6afe969771044a768100d5caa3ef86d5a32ab60d677184d0b807b323bea3516b1352aa490eb32525b588d976abfd158c16a187808ca33325ba5e834e0e1fd4f225322c57b93a67984f422d767fbe163468d79c42f0c4ef74f260b16ae28fcb625c78cee5e277cf7e9a82d0702ff126d1394d950237d72965fdc3683f052a51bff9d18261a150f99a49f1a0da820efef3ba52ecffe9b2f2ecc053c5ceb1901a8c4ea77a0cefbd29235739a768263f2b2b4973b4099f0e8c6e5e1ad3a91c722512cafacb5f0f6a7d94e5355a2d2d2b6a54bec2a34a557793e9242f1c996dbfc9785c78901e37104b3efd0a5b9e1a5f0f310e12dc45f16a4b1a77887ac8910c398a12957270a8fd059f62e55cb0364b43a0733680e08e9265605a29e63a1364d2eedd0e160aa7a8da480d831ed68bcbdc58b9d22ca9279071e03997710dfa792d32b46e7ea00063538a763700da03bae7039d94cbd84fc57818769727076f55390d2f427804eb45cbf7e209ffeb362596ecc37bc34fd564bbde8a1cd74c735251c90fa20cf817e05941ad43c5c1e78dd58b8c38c2c4b8eac731e88e4fd4801b82310ccbdc351f54606f58a4af4326d6339782e1edc8ae4bf53d6c8806397b28459b0736c1651692def3c58f1bcc5a03a49157635489212c51944671ed6b2c572db6744bcf6d19f7cce4ef5c58a875343898dd4cf02b2beb2260dbf74dcb8e311d96fe529d10192f86fbdd7e49c4c5c51dd8581a1f7caa3a9e4690f99a541fdd085fe679c3a7023c52284be5fbec8d996f3de76105812a50e0f78755d231b772ff87a5f59c837fb5a816b2c428617f597c1d6079d5aaabf49faa1589e1a2b870c297acc1eb24b1bb92070f38f57d7e3c3af91692839028a201a449e3e8fcf2f306f1d1004ec96d5e1550ceebbef14e77b9dca21613721bf1b4df2ef3b447db0312e159c380d442011ad2957d0af2f82a19da34a97870c8e4dce2ac68a0cd76de60d0745f5f99d9a022f6db6a64239682a917b82e22183cf564efc8dc3742b678a914e25cb105a928c501a8099c140b9fc6b86c9052341ad1a96432e23993bf57bae9df1e8fb5fc4cf0868cab25f138c68b195e7242faab9c1b8866bfc33a1434f01e6247289106e36c473325de64f08f25b21288c380c13f5f153e1520aad217412755f248eb4414e735de1cb60d26c3f527797d98e03dc0ab8f32c1ce82110019e2eafbd4443b56261b0a1622e1645af3f729ba3b9f29ef8b3e7525bb6f5ab89e75c09ee33a70ea9cc238c53011d8e0ebb58b6675eda88a9237b92b82bff38d2a08533593c3809c3f00556d4dbf198f761e9b016edb2b1b16aa5c7fa693759cb328b1d46b2cc7acba41b641fb7237494b6beedea30b2781e5bcbb9ade2c05fa1d3e22064627589461452d0fa2f92f3fd8ef331a9156e54c5b54ead6529f5c6b68a9e3d4bbd03bb4f9bf02b5e512f7e0b6feb236ca285ed40021dc2d4c2621e283c9a8371f87fea33eaf1e91e056373501d4091246319f0be361f5c436e20974aab031af47b2c2b859f01eb8a36636e687af3d478fb14db1cf3ca95b7c152de03af45818a8c8e3a3f5c399bce4589dbbd1506eb0e88efcb1943e1f82c014ad695e970a83e95bced8fb80f7cae3b1dcff5519abddcc3168cc3000ccd9210887a04848a4db82637c700bbc502cf68a3146a285c7358864a2156d4db3db66740f4e6800947c876ec586a5472a03ab710b2b0a15737633af2ce8335350499ce0f82645d62eed27a969b0b9f7e278df24dbfd9d25e29a7baab759d3b03b34f9742c356252a172f87c1e8842091817c5ec172281e353aeca8d8c30f1b38e92ce474b7cb6d740126dec48378de6446ce3418421fbdaece05a6636ac860f786e9ad1c4f46377130f12bd2e3ad417c4d2231a5587a73dc761b72f7e1bcbf8eb89fbe809be37093a668f43def241ab2ed81f08d7033608e5ede25f5b67fe8e51946e1a4e1e037606a8a397b2f5d946e447d1af96bad60a3407a7bc74d2e6bfff9e26b9254861124036c7f4e643b354776266fc8294800c1340dd740871015e5f37f88504432ff5251990776fce59f3c5cd57118c7ceda6ff0ec6baaa0ceb8f1f4fbff123efa64be71db746e6bbefd67074cda06c8495191f3fabb86cacfe057453fb7eae10e906715b5285f16baf5d3e5a4908bd7e161950883b2b25280bf72aab9ca78b70a5a7788325d8ac7159c9d0a0451728cd8d7dac6913d1725c185e394c10c3474cc116476e2b10a35f0ca3dfd3cd7e9cd53a59704cff8a3dd84ad2e48bd8d1c8d6a46cff84b02b4542d30df8f9578fb2e6ebcbb499c14c8ec757b467a699458f872512c37ccac939fdbc0aa076018743d864b9c8604562c2176bbe56cda9a7a80ec32d6a45a06bd7c117e0ef7808ae131abf1a48453016826d31481c0f61eef59c07b38e67b1cc88ef4dbff65944fe6f3745e148c0e7e720fadb4404caf339727d98f8785905a99663495a455556402ce078e55d6e6fbe61000ae3894027975c4456ee1580050c352e6351b9892f6467bb2adfbbb29461bf33fc4eb2e3011815c28a304d60c0b8095b05fa08cb0c56ece4104652d2859021fb18db9a94a457cb836764e7fc8c1bc6ee3d76e773f629a9885ca376d5e7fdea96e2e4e6904fde8e6a7ed999dc2a76d89e619dcc97666ee9e5a287f9b3dd864eeb37265d397628c18f1abc8088642ea0a9f88ffd23f5ca048834ae10acc5595f8d9a1b626703932824aef8f8142b35edef69de197b443c8976c59325275151f0e0749931892596e283446b2f4b10faa7790ac1d84c96adf7743b94864ef9769c33f0c96d3f56769b07dadb3179f9db000573675264143d9e3e3aae38dbde5cb50fb0a66ebaa48646fbddf45b99e23d5f7c264f5995c4c9c74e1b92e84ea64f68d2c039dabfc258b6ddecaba52fa39fad4e4d66b77e2e672ff38238e0c1a05ed1c5042fcf846e0518d72f1253fe731bdf593587c3246880901cfd23edd4eaceda38d9cc74be695ce952635bae6ff3a6b7cd6703c3e4b315a6ba13016e18b8c85c910152684ba1bb7976b886bf21db05476b72bf6981051ed77e4d4e0b43cbbb2b053919ff62dc30d2cc7e00f2b17b76e0f52535df963257dd7bcced5a5c59d1d660738f93e26564ae2db435079e7ee94609f619ec3</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Hey, password is required here.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <categories>
      
      <category>2023暑假绿格</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Mind-streaming</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2023.03.14 生病了</title>
    <link href="/2023/03/14/%E7%94%9F%E7%97%85%E4%BA%86/"/>
    <url>/2023/03/14/%E7%94%9F%E7%97%85%E4%BA%86/</url>
    
    <content type="html"><![CDATA[<p>甲流有点难受啊……</p><span id="more"></span><p>记录一下全流程： 1. 嗓子哑 2. 头疼 3. 鼻塞 4. 流鼻涕，打喷嚏 5.嗓子痒，狂咳不止 6. 有时咳嗽 7. 嗅觉丧失</p><p>2周后更新：似乎是新冠？因为我的嗅觉似乎丧失了。但是我又似乎没有发烧，也没吃任何药，硬扛扛下来了这一波病毒。只能说人定胜天，然后疫苗应该起到了不少作用。</p><p>3周后更新： 嗅觉恢复了，芜湖~</p>]]></content>
    
    
    <categories>
      
      <category>日记、杂感与自我批判</category>
      
    </categories>
    
    
    <tags>
      
      <tag>碎碎念</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>最后一名 | 马塞尔·埃梅</title>
    <link href="/2023/02/28/%E6%9C%80%E5%90%8E%E4%B8%80%E5%90%8D/"/>
    <url>/2023/02/28/%E6%9C%80%E5%90%8E%E4%B8%80%E5%90%8D/</url>
    
    <content type="html"><![CDATA[<p>这篇文章是我两年前看到的，非常喜欢，没有理由，或者说理由不详。</p><span id="more"></span><p>从前，有一名自行车运动员，名叫马尔丹，他每次参加比赛，总是最后一名到达，被其他运动员远远甩在后面，受到观众纷纷的嘲笑。他身穿一件浅蓝色运动衫，左胸前绣着一小朵长春花。只见他伏在车把上，牙齿紧紧咬住手帕，使劲蹬车的神气，不亚于第一名。在最艰难的爬坡中，他的情绪无比高涨，眼睛射出炽热的光芒。看到他那闪亮的眼神、奋力鼓起来的肌肉，人人都说：</p><p>“嘿！瞧马尔丹的样子，看来他的竞技状态蛮高嘛。好极啦，他这次到达图尔城（或者波尔多城、奥尔良城、敦刻尔克城），准能名列前茅。”</p><p>然而，这次同从前一样，马尔丹还是最后一名。他一直希望能够得个好名次。他手头确实有点拮据，家里有妻子儿女要养活，而最后一名的收入是不多的。尽管他生活不顺心，可是从来没有人听到他抱怨过命运不公道。他到达图尔的时候（或者马赛、瑟堡），看热闹的人都哈哈大笑，奚落他说：</p><p>“喂！马尔丹！你是倒数第一名呀！”</p><p>马尔丹听到这样的玩笑后，从来不发脾气；他若是向人群瞥一眼，也总是含着淡淡的微笑，好像对人们说：”对，是我，马尔丹，我是最后一名，下一次会赶上去的。“车赛结束之后，他的比赛伙伴问他：</p><p>“怎么样，你对结果满意吗？这次挺顺利吧？”</p><p>“哦，还不错！”马尔丹回答说，“还算满意吧。”</p><p>他没听出来别人是在嘲笑他，也跟着别人笑。看着别人在朋友们的簇拥下，在一片恭贺声中走开，他甚至没有一点嫉妒的念头。最后，只剩下他孤零零一个人，因为，从来没有任何人在终点接他。他的妻子儿女住在乡下，村子位于巴黎通往奥尔良的公路旁。他赛车路过那里时，一闪而过，只能远远地望一望亲人。凡是有理想的人，生活自然与众不同，这是可以理解的。马尔丹爱他的妻子，也爱他的孩子们。然而，他是自行车运动员，比赛时中途不能停下来。他赚到点钱，就给家里寄去；他也经常想家，不过，比赛时不想（他正忙着呢），而是到了晚上中途休息、在他按摩长途蹬车疲惫的双腿时才思念家人。</p><p>睡觉之前，马尔丹总是做祷告，向天主汇报他一天的赛程，根本不想会不会惹烦了天主。他以为天主会关心自行车比赛，按说这种想法也对头。天主如果不熟稔各行各业，就不可能理解要具有一颗坦荡的心灵有多难。</p><p>“天主啊，”马尔丹祷告说，“还是讲讲今天的车赛吧。不知道是什么原因，结果总是老样子。说起来，我这辆车很好，是挑不出毛病来的。有一天，我心里琢磨，会不会脚蹬子里掉进了什么东西。于是，我不慌不忙，就像我同您聊天这样，把车子一件一件拆开，结果一看，脚蹬子里没有一粒砂子，别的机件也一样。谁若是来对我说这辆车不好，我会回答说是好车，是名牌的。既然车没问题，那又是怎么回事呢？当然啦，人与人不同：体力、意志、智慧都不能相比。至于人嘛，天主啊，这正是您管的事情。我就是这样想的，因此毫无怨言。我非常清楚，在比赛中，总得有人是最后一名，这没有什么见不得人的。不，我不是发牢骚，不过说说而已。”</p><p>祷告完了，他合上眼睛，一觉睡到大天亮，没有做一个梦，醒来喜笑颜开，说道：“今天，我可要头一个到达。”</p><p>他想象自己荣获第一的情景：一名少女跑来向他献花，他把赢得的钱寄给妻子，想到得意处，便美滋滋地笑起来。他还仿佛看到报纸的报道：“在波利尼—斯特拉斯堡的分程赛中，马尔丹夺魁；经过反复争夺，他在这次短距离比赛中获胜。”他想第一想得入了迷，连名列第二或者再后几名，都会感到难受，更不用说最后一名了。而其实呢，他已经不知不觉爱上了这最后的名次。</p><p>晚上到达斯特拉斯堡时，马尔丹还是往常的名次，观众哗然，纷纷嘲笑他。他有点莫名其妙，可是到了第二天，他进入下一程比赛时，照样充满必胜的信心。每天早晨，每次比赛出发时，这种伟大的奇迹都要在他充满希望的头脑中重演一遍。巴黎到马赛的自行车比赛的前一天，在首都的赛手中间盛传，马尔丹要一鸣惊人，五十三名记者马上跑去采访他。</p><p>“问我对戏剧的看法吗？”马尔丹答道。“记得有一天，我经过卡尔松，偶然去市剧院观看《浮士德》演出，真替玛格丽特难过。我要说，倘使浮士德懂得一辆好自行车的意义，他就不会贻误青春，也不会起邪念，糟蹋了那个姑娘，那个姑娘也就肯定能找到丈夫了。这就是我的看法。你们现在问我，第一个到达马赛的将是谁。我可以直言不讳地告诉你们，这场车赛夺魁的将是我。”</p><p>记者散去之后，马尔丹收到一封香气扑鼻的书信，是一个叫莉莉雅娜寄来的，信中邀请他去喝茶。莉莉雅娜是个放荡的女人，道德败坏，生活堕落，这类女人多得成灾。马尔丹先去赛车场，骑几圈试试车。出了赛车场，他直奔莉莉雅娜的住所，一点戒心也没有。他只拎一只小手提箱，里边装着他的运动服。</p><p>他向莉莉雅娜介绍自行车赛的情况，比赛中采取什么策略最高，如何保养自行车和自己的身体。这个荡妇故意提出些问题来挑逗他：</p><p>“马尔丹先生，怎么样按摩呢？”</p><p>说着，她把腿伸过去。马尔丹坦然地抓住这个堕落女人的腿，一点儿也没有动心，就像抓住一名运动员的腿似的，平静地解释说：</p><p>“就这样按摩，慢慢往上推。给女人按摩可不容易，对不对，因为她们的肌肉太松软。”</p><p>“如果发生车祸受了伤，您怎么抱我呢？”</p><p>她还提了一些别的问题；不过，那个女人说的话，不便全在这里重复。马尔丹老老实实地一一回答，丝毫没有觉察出她居心不良。她很想知道手提箱里装的是什么，马尔丹毫不迟疑，把自己的运动衫、运动裤、运动鞋拿出来给她看。</p><p>“哦！马尔丹先生，”莉莉雅娜说，“我真想看看您穿上运动衣是什么样子，我从来没有近看过。”</p><p>“既然您有这个兴趣，”马尔丹回答说，“我很乐意穿给您看。对不起，我到隔壁房间去一下。”</p><p>等他回来一瞧，发现莉莉雅娜穿得比他还要少，那情景就不便描述了。然而，马尔丹连头也没有低一低，他严肃地瞅着无耻的女人，频频点头说道：</p><p>“看得出来，您也想当自行车运动员。这事儿，我可要坦率地同您谈谈。依我看呀，自行车运动不适合女人。要论腿力，您可能会赶上我，这一点我并不怀疑。但是，女人有乳房，骑车跑二三百公里，这是非常沉重的负担，太太。还没有把孩子的问题打上呢，这也是一条原因。”</p><p>这番话又明智，又天真，莉莉雅娜听了深受感动，她终于明白美德有多么可爱。她一生罪孽很多，这是幡然悔悟，开始憎恨自己，流着甜蜜的眼泪说：</p><p>“我真是个疯女人，不过，从现在开始，我绝不再干了。”</p><p>“其实也没什么不好，”马尔丹说。“您现在看到了我穿运动服的样子；我再回避一下，到隔壁去穿好衣裳。您趁这工夫也把衣裳穿好，以后就不会再想当运动员了。”</p><p>两人各自穿好衣裳。多亏了马尔丹，可怜的女人恢复了名誉和对生活的乐趣，从此于心无愧了。马尔丹也带着她的祝福离开了。各家晚报登出了马尔丹的照片，他既不兴奋，也不骄傲，他用不着这种鼓噪就信心十足。次日一早从巴黎出发，马尔丹就落到最后，并且一直保持到底。他进阿尔勒城的时候，听说他的对手们已经到达终点马赛，但是，他仍然全力以赴。对其他赛手来说，比赛尽管已经结束，可是马尔丹心里并不气馁，还希望名列第一。各报记者这才明白上了当，非常恼火，都骂他是牛皮大王，建议他去参加“同龄驴子赛”（这是文字游戏，不看体育报的人是不懂的），马尔丹对此毫不介意，依然信心十足。而且，莉莉雅娜也弃旧图新，在忠诚街开了一个乳品店，字号为“好车店”，卖的鸡蛋比各处都便宜一个苏。</p><p>随着年龄与经验的增长，马尔丹竞争的劲头也越来越大，他参加赛车的次数跟日历中的圣徒节一样多。他不知休息，一场自行车赛刚刚结束，又立刻报名参加另外一场。他的两鬓渐白，背也驼了，成了自行车运动这行的元老。但是，他并没有意识到这种变化，甚至连自己的年龄也好像忘记了。他还同过去一样，总是最后一个到达，可是眼睛却比从前瞪大了两三倍。他在祷告时说：</p><p>“天主啊，我不明白，我真不知道这是怎么回事……”</p><p>夏季有一天，他参加巴黎到奥尔良的自行车赛，正使劲爬一个他熟悉的山坡，忽然发现车带是瘪的。他到路边换车带的工夫，有两个妇女走过来，其中一个怀抱着刚生下几个月的小孩，向他打听说：</p><p>“请问，有一个叫马尔丹的自行车运动员，您认识吗？”他心不在焉地答道：</p><p>“我就是马尔丹，最后一名就是我。下一次比赛会赶上去的。”</p><p>“我是你的妻子，马尔丹。”</p><p>他抬起头，可是手还在不停地校正车带，一边充满感情地说：</p><p>“我真高兴……看来孩子们也见大了。”他看了看妻子怀里的婴儿，以为是他的孩子，就补充了这么一句。</p><p>他妻子有点尴尬，赶紧指了指一同来的年轻妇女说：</p><p>“马尔丹，她是你的女儿，个头儿长得赶上你了，她已经结婚了；你的几个儿子也都成了家……”</p><p>“我真高兴，没想到孩子们都长这么大了，时间过得可真快……你怀里抱的，是我的外孙吗……”</p><p>年轻妇女扭过头去，还是她的母亲回答说：</p><p>“不是，马尔丹，这不是她的儿子。是我的……我看你一直不回来……”</p><p>马尔丹一句话没讲，又接着安装他的车带，然后开始打气。他直起腰来的时候，看到妻子簌簌流泪，便喃喃地说：</p><p>“干自行车运动员这行，你知道是怎么回事，由不得自己呀……我经常想念你，当然啦，这跟在你的身边还不一样……”孩子哇哇哭起来，怎么哄好像也哄不好。马尔丹一时慌了神儿，只好拿起打气筒，对着孩子的鼻孔打气，一边还娇声娇气地说：</p><p>“你，你，你……”</p><p>婴儿破涕为笑。马尔丹亲了亲孩子，同家人告别。</p><p>“我耽误了五分钟，但是我并不后悔，何况我不用费劲就能赶上去。这次比赛，第一我稳拿了。”</p><p>他蹬车继续爬坡，两个女人目送他很长时间。只见他站立在车蹬上，身体的重量忽而偏向左边，忽而偏向右边。</p><p>“瞧他多吃力，”他妻子低声说。“从前，他爬什么山坡，只需用腿蹬车就能上去，身子根本不用离座位，那时到现在才不过十五年。”</p><p>马尔丹快到坡顶时，速度越来越慢，看上去好像要随时停下来。车子终于升到地平线，他打了一秒钟飞轮，只见他那身淡蓝色运动服同夏空融为一色。</p><p>马尔丹比谁都熟悉法国的各条公路，成千上万的里程碑，对他全是一副副熟悉的面孔，这几乎令人难以相信。很久以来，他已经是推着自行车上坡，这还累得上气不接下气，可是他总是相信他的福星高照。</p><p>“下坡时我就会赶上，”他喃喃自语说。</p><p>到达中途站使已经是晚上了，有时第二天才到，他仍然奇怪自己不是第一名。</p><p>“我的天呀，不知道是怎么回事儿……”</p><p>他的脸瘦成了皮包骨，上面布满深深的皱纹，颜色就像秋天的土路；头发也全白了，然而，他那双老花眼却闪烁着青春的光芒。蓝运动服在他枯干弯曲的躯干上飘动，本色已经褪完，好像染上了一层烟尘色。没有钱乘坐火车，他并不懊恼。等他赶到巴荣纳城，三天前自行车赛就结束了，人们已把这事忘得一干二净。他马上又跨上车到鲁贝城去，参加另一次刚刚开始的车赛。他走遍整个法国，上坡时步行，平地上骑车，下坡打飞轮时打盹，这样日夜不停。</p><p>“我这是在训练。”他常常这样说。</p><p>他到达鲁贝才听说，运动员出发已有一个星期。他点了点头，重新跨上车子，嘴里咕哝说：</p><p>“真遗憾，这次要是参加上了我准赢。没关系，从格勒诺布尔到马赛的那段比赛，我照样去参加，我正想熟悉一下阿尔卑斯山口的道路。”</p><p>可是，等他赶到格勒诺布尔，已经太晚了。此后，他无论到南特，到巴黎，到佩皮尼昂，到布雷斯特，到瑟堡，总是为时太晚。“可惜，实在可惜，”他声音细微而颤抖地说。“不过，我会赶上去的。”</p><p>他不慌不忙地离开普罗旺斯，又奔向布列塔尼，或者赶往阿图瓦，去鲁西荣，或又转向汝拉山脉，去旺代地区。他一路上不时眨眨眼睛，冲着路碑说：</p><p>“我这是训练呢。”</p><p>马尔丹已经老迈不堪，双目几乎失明。但是，有他的那些里程碑朋友们，甚至每隔百米一块的小路碑的指引，他知道该向左拐还是向右拐。他的自行车也已旧得不行，车牌子老得无人知晓，连历史学家都从来没有听说过。车架子上的漆皮全部剥落，斑斑铁锈又都盖满了泥尘。车轮的辐条几乎全部断掉，但是，马尔丹的身体没什么分量，有五六根就能经得住。</p><p>“天哪，”他常常说，“我的车子倒蛮好，这方面我没什么可抱怨的。”</p><p>自行车带没了，轮辋着地，他照样骑，骑起来哗啦哗啦乱响；孩子们见了，一边扔石块打他，一边叫喊：</p><p>“打疯子呀！卖废铁呀！送疯人院去！”</p><p>“我会赶上去的。”马尔丹听不清，就这样答道。</p><p>多年来，他想报名参加车赛，可是总赶不上趟。有一次，本周内要在巴黎开始法国全程自行车赛；他离开纳尔博赶去参加，然而赶到那里已经是第二天了；当他听说运动员昨天才出发，心里非常高兴。</p><p>“今天晚上我会赶上他们的，”他说道，“第二阶段我就能夺魁。”</p><p>马尔丹骑着自行车出马约城门的当儿，被一辆卡车撞倒在马路上，自行车也散了架。他爬起来，双手紧紧握住车把，临死还说：</p><p>“我会赶上去的。”</p>]]></content>
    
    
    <categories>
      
      <category>分享文章</category>
      
    </categories>
    
    
    <tags>
      
      <tag>转载</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>一道can报文读取的问题</title>
    <link href="/2023/02/22/%E4%B8%80%E9%81%93can%E6%8A%A5%E6%96%87%E8%AF%BB%E5%8F%96%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <url>/2023/02/22/%E4%B8%80%E9%81%93can%E6%8A%A5%E6%96%87%E8%AF%BB%E5%8F%96%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h2 id="问题">问题</h2><p><img src="/2023/02/22/%E4%B8%80%E9%81%93can%E6%8A%A5%E6%96%87%E8%AF%BB%E5%8F%96%E7%9A%84%E9%97%AE%E9%A2%98/733c9efe42012d64aa64fee7b66367b.png"></p><h3 id="小端模式little-endian-intel-order">小端模式（Little Endian /Intel Order）</h3><p>数据的高字节保存在内存的高地址中，而数据的低字节保存在内存的低地址中</p><h2 id="解决">解决</h2><p>首先，收到的CAN报文为5(Y) C4 61 60 86 AF 11 9(X)，为16进制</p><p>转换为2进制：0101 (YYYY) 1100 0100 0110 0001 0110 0000 1000 0110 10101111 0001 0001 1001 （XXXX）</p><p>然后，画出各报文位置对应数据含义表格 <img src="/2023/02/22/%E4%B8%80%E9%81%93can%E6%8A%A5%E6%96%87%E8%AF%BB%E5%8F%96%E7%9A%84%E9%97%AE%E9%A2%98/15e38f285c14beb7f97417d9b276b50.png"></p><p>按<strong>小端模式</strong>填充 <img src="/2023/02/22/%E4%B8%80%E9%81%93can%E6%8A%A5%E6%96%87%E8%AF%BB%E5%8F%96%E7%9A%84%E9%97%AE%E9%A2%98/faa4153db0e11f009359d1e132051e0.png"></p><p>因此可得 - 刹车指示：00 0101 - 电池电流：01 1000 01110001（-500+6257*0.1=125.7A） - 电机转速：1000 0110 0110 0000（-10000+34400*0.5=7200r/min） - 动力电池电压：1 0001 1010 1111（4527*0.1=452.7）</p><p>填空 - 蓄电池电压：100 1XXX X000 （应为1272*0.01=12.72） -转速红区标志：Y3Y2（应为0x03） -超功率标志：Y1Y0（计算功率125.7*452.7=56904.39W，应为0x01）</p><p>所以X为1111（F），Y为1101（D）</p>]]></content>
    
    
    <categories>
      
      <category>工学</category>
      
    </categories>
    
    
    <tags>
      
      <tag>汽车控制</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2023.02.22 从班会发言引出的思考</title>
    <link href="/2023/02/22/%E4%BB%8E%E7%8F%AD%E4%BC%9A%E5%8F%91%E8%A8%80%E5%BC%95%E5%87%BA%E7%9A%84%E6%80%9D%E8%80%83/"/>
    <url>/2023/02/22/%E4%BB%8E%E7%8F%AD%E4%BC%9A%E5%8F%91%E8%A8%80%E5%BC%95%E5%87%BA%E7%9A%84%E6%80%9D%E8%80%83/</url>
    
    <content type="html"><![CDATA[<p>今天晚上久违地开了班会，开完之后我去领取了我的进博会志愿者证书，然后匆匆赶到图书馆。距离暂离时间结束只剩下5分钟了，运气还不错。现在是22点06分，我在包图敲下今天的日记，也是第一次尝试这种方式，<strong>自称</strong>的“意识流”写作。</p><p>班会课最后让我们每个人交流了一下，主题我已经忘了，似乎一开始就没搞清楚过，好像是谈谈上学期的收获和这学期的展望，总之是什么都能谈。我在发言前就”动机不纯“，准备说两个东西：一个是我对这种发言不是很感兴趣，二是希望“大学生活不把我变成我不想成为的人”。即使如此，我感觉自己的发言也是稀烂，语言能力好像需要提升一下。在台下内心中我感觉有很多话可以说，各种旁征博引，口若悬河，站起来发言却不是很利索，所谓“理想很丰满，现实很骨感“。</p><p>出现这种情况的原因我应该自己总结出来，因为这是我的发言和我的感受，别人也不可能知道。之前也想过很多次，我觉得本质原因是”自卑“，直接原因是说的时候想得太多，又有些紧张。本质原因回头再慢慢分析，先评价一下直接原因。我起身之后，心里一直想着要说的几个点，说第一点的时候想快点讲出第二点，导致论据不够充分，论证也很跳跃。这是一个问题。然后发言时也不够自然，我平时聊天时组织语言应该还是不错的，虽然思维也很跳跃，但是至少能够给出逻辑论证，语速和节奏也还行。我想如果我不紧张的话，在最自然的情况下发言，像日常和同学们胡扯一样发言，呈现出的结果应该是会比今天和之前好得多的。或许我应该去培训一下脱口秀之类的，平常也能说一些段子，还挺好笑的，怎么公开发言的时候就吞吞吐吐的呢？</p><p>说回我的发言内容。关于对发言这个行为的看法，我给出的原因是每个人都是独一无二的，或者说每个人都有自己的life。这里我罕见地使用了英文，这个单词本身的含义是生活，但是我想这里解释为故事比较贴切。上个学期的经历强化了我对这个看法的认同。我先审视我的一生，显然是独一无二的，甚至是美好的，幸运的，也可以是不幸的，随便怎么说。”独一无二“是客观的描述，而”美好“是主观的描述。主观的描述是主观的，我说是什么就是什么，那我宁可说是美好的。这是我对过去20年我的故事的态度，先按下不表。人与人不能一概而论，我经常说这句话，并奉为圭臬。所以我想每个人对事物的看法是不同的，成功的经验自然也不同，因此发言无用。但是转念一想，全盘否定发言好像也不大好，毕竟可以吸收一些道理占为己用，而我也确实这么做过。所以我现在觉得我提出的这一点有些牵强，纯粹是为了装X</p><p>（在写上面一段的时候我已经到了图书馆的通宵座位。我感觉我的状态有所改变，最开始是脑子里转的比打字打的要快，而上面一段已经反转了。我认为后者状态不如前者。前者是我写作文的状态，而后者才是我写真情实感的状态。要是之前的作文我也能以后者的状态来写的话，那就真的是“文思泉涌”了。但是在以前，高中或者初中，我还不具备如今的思考能力，或者说“自省”能力，因此也无法达到第二种状态。现在我可以达到了，写一些文章，也算是“作文”吧。而且我发现，“意识流”写作能够提升我的专注程度，当我把思想聚焦在自我反省和自我沉思上时，我能够从一个比较浮躁的状态进入一个比较专注的状态，进而能够开始新的学习。而且最好开始新的学习，因为继续写下去就会慢慢变成“手等大脑”的不好的状态了）</p><p>即使如此，我还是最好浅谈一下我对大学生活的看法。总之就是“不要被世俗磨平棱角”、“去功利化”、“保持自主思考”这些关键词之类的。大学作为进入社会前的重要时期，在学习之外还有许多事情需要思考，比如我想成为一个什么样的人。额，感觉有些写不下去了，状态没了TAT那就下次有机会再写吧。</p>]]></content>
    
    
    <categories>
      
      <category>日记、杂感与自我批判</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Mind-streaming</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>对chatgpt的欢呼是人对异化的反抗——论ai代写论文的解放性与开放性</title>
    <link href="/2023/02/19/%E5%AF%B9chatgpt%E7%9A%84%E6%AC%A2%E5%91%BC%E6%98%AF%E4%BA%BA%E5%AF%B9%E5%BC%82%E5%8C%96%E7%9A%84%E5%8F%8D%E6%8A%97%E2%80%94%E2%80%94%E8%AE%BAai%E4%BB%A3%E5%86%99%E8%AE%BA%E6%96%87%E7%9A%84%E8%A7%A3%E6%94%BE%E6%80%A7%E4%B8%8E%E5%BC%80%E6%94%BE%E6%80%A7/"/>
    <url>/2023/02/19/%E5%AF%B9chatgpt%E7%9A%84%E6%AC%A2%E5%91%BC%E6%98%AF%E4%BA%BA%E5%AF%B9%E5%BC%82%E5%8C%96%E7%9A%84%E5%8F%8D%E6%8A%97%E2%80%94%E2%80%94%E8%AE%BAai%E4%BB%A3%E5%86%99%E8%AE%BA%E6%96%87%E7%9A%84%E8%A7%A3%E6%94%BE%E6%80%A7%E4%B8%8E%E5%BC%80%E6%94%BE%E6%80%A7/</url>
    
    <content type="html"><![CDATA[<blockquote><p><em>本文转载自公众号“后现代主义哲学”</em></p></blockquote><span id="more"></span><p><img src="/2023/02/19/%E5%AF%B9chatgpt%E7%9A%84%E6%AC%A2%E5%91%BC%E6%98%AF%E4%BA%BA%E5%AF%B9%E5%BC%82%E5%8C%96%E7%9A%84%E5%8F%8D%E6%8A%97%E2%80%94%E2%80%94%E8%AE%BAai%E4%BB%A3%E5%86%99%E8%AE%BA%E6%96%87%E7%9A%84%E8%A7%A3%E6%94%BE%E6%80%A7%E4%B8%8E%E5%BC%80%E6%94%BE%E6%80%A7/微信图片_20230219203124.png"></p><p>我们首先尝试厘清人和chatgpt的异同，某种意义上来说，chatgpt确实是一个人，只不过它是一个完全被某种形式性支配的僵死之人，因为无分碳基硅基，人就是一种语言生物，正所谓“语言玷污了肉体才有了心”，任何事物一旦呈现在主体面前就必然会被迅速“语言化”，物只有被彻底整理成词句之后，才能以词句的形式反映在主体的意识结构里，<em>可见人类的自我意识作为纯词句的组合就是一场被语言、语法、逻辑编织出来的幻梦，我们的精神本身正和chatgpt处在同一个根本性的层面上</em>，那么后者当然可以在它能够和人类重合的地方取代人类的工作，反过来说，人能够被chatgpt所取代的部分也一定是他心灵秩序里最机械化的部分。</p><p>此处的差异性在于二者精神运动的组织方式，人类具有发问、回答、无意识自言自语三种词句流淌状态，而chatgpt则只能作出回答，<strong>人因其无知而能动</strong>，在广阔的黑暗未知之域与狭隘的光亮已知之域的间隙里，人不断搭建自身通达于未知的道路，其精神内在秩序也得以进入动态的流变与永动的生成，而这恰恰是chatgpt所匮乏的，知晓一切反而把chatgpt圈禁和否定了起来——<strong>它因全知而无能</strong>。</p><p>换言之，<em>人因为绝对的无知和永恒的匮乏而开启了自身面向无尽黑暗界限的精神运动，chatgpt则因已知之光明照耀一切和未知之域的被抹杀而陷入了“对匮乏的匮乏”状态里只能被动等待着自身数据库的更新</em>，它是全知的（全知不是指chatgpt掌握了世上的一切信息，而是说并没有一个位于已知世界外部的有待于被探索的未知例外空间的存在），因此，它不会自己向自己提问（没有什么好问的），便不会自言自语（不会能动的自生成），因此它必然是凝滞的和僵死的。</p><p>当一个人开始思考“今天中午吃什么”的时刻，那一个接一个从未知的幽邃黑暗里蹦出来的生命力的字词就是他的心灵的纯显现，从上一秒的“今”到这一秒的”天“再到下一秒的”中午“，人的自我的实质就是从字到词的过程——<strong>主体是一个无限延长的句子，而创造它的正是问题的悬而未决</strong>，某种意义上来说，不是悲观主义者所警告的懒惰之人面对chatgpt让渡出了自己思考的权力，恰恰相反，是无能的chatgpt在借助人的大脑来进行思考，唯有借助人的问题才能生成它此刻的自身。</p><p><img src="/2023/02/19/%E5%AF%B9chatgpt%E7%9A%84%E6%AC%A2%E5%91%BC%E6%98%AF%E4%BA%BA%E5%AF%B9%E5%BC%82%E5%8C%96%E7%9A%84%E5%8F%8D%E6%8A%97%E2%80%94%E2%80%94%E8%AE%BAai%E4%BB%A3%E5%86%99%E8%AE%BA%E6%96%87%E7%9A%84%E8%A7%A3%E6%94%BE%E6%80%A7%E4%B8%8E%E5%BC%80%E6%94%BE%E6%80%A7/640.png"></p><p>但该运转结构里依然缺乏了一个未知作为关键性的例外，导致它不能生成新的东西，而只能在模仿人的说话方式的前提下重复（或者更好的组织着其重复）已经存在的东西，<em>这种不面向未知的、纯粹对已知事物的纯重复作为纯机械性的心灵活动当然可以被交给ai去思考</em>，我们只需要直接面对已经被chatgpt用精简的逻辑整理过的内容就好了。</p><p>对于chatgpt，一些批评者认为，chatgpt的滥用会导致学生通过习惯性地求助ai来完成他们的论文作业，这将致使学生失去创造力和思考能力，但问题在于，<strong>为什么一个机械性的复读机器能够创造出应试教育体系下获得高评分的论文？这难道不意味着这种强制性的论文书写和评级系统本身就在将人异化成某种既定范式下的写作机器（所以我们才在机器争霸里赢不过实在的“ai写作机器”chatgpt）？</strong></p><p>打开百度学术或道客巴巴等论文集成网站搜索鲍德里亚，你能找到的几乎所有的论文都是这样子的，题目是用鲍德里亚去讨论一个什么东西，第一段简介鲍德里亚的思想，第二段简介这个东西，第三段把东西套进鲍德里亚的几个常用名词上去，全部都是些滥竽充数的凑字数和老调重弹的废话，如果说真正有灵感的论文写作不足以在分数上同ai及其代表的此类机械化写作竞争的话，那么我们当然有理由采用齐泽克的办法，<em>即学生用ai写作业，我则用ai批作业，把机械化的工作都交给ai去完成吧，让chatgpt打破那科层绩点的教育系统对人学习形式的僵死统治，我们就终于有时间自由学习我们想学的东西了。</em></p><p><img src="/2023/02/19/%E5%AF%B9chatgpt%E7%9A%84%E6%AC%A2%E5%91%BC%E6%98%AF%E4%BA%BA%E5%AF%B9%E5%BC%82%E5%8C%96%E7%9A%84%E5%8F%8D%E6%8A%97%E2%80%94%E2%80%94%E8%AE%BAai%E4%BB%A3%E5%86%99%E8%AE%BA%E6%96%87%E7%9A%84%E8%A7%A3%E6%94%BE%E6%80%A7%E4%B8%8E%E5%BC%80%E6%94%BE%E6%80%A7/641.png"></p><p>除此之外，ai的批评者担心以后的人们在遇到任何问题、做出任何决策和书写任何文本的时候都会选择直接向chatgpt发问，久而久之，我们便不再需要分析、统筹、书写和决策了，它会让人依赖成瘾，变得懒惰和愚笨，可实际上来说，这些结果总是难以想象的，我们今天这个异化的科层绩点社会难道不已经让我们变得足够蠢笨了吗？被它规训出来的单项度的面向金钱或美色等事物的神经官能价值系统不正是“依赖成瘾”的大写表现吗？我们日复一日重复这些单调的机械化的狗屁工作和复演这些单调机械化的权力欲望，确实让人很难想象变笨的过程是如何在只剩下纯粹重复性劳作和纯粹等级制攀登的现代人身上成为可能的。</p><p>除了机械，人的心灵存在中还有些什么？<strong>如果教育体系中的科层绩点考察都可以由只会复读的ai来很好的完成，那么这种教育系统真的能对人的智识能力的成长起到正面的作用吗？如果我们担心chatgpt可以取代人在社会上的存在位置，那么这里难道不更应该反过来思考人于系统内部为何会以机械的形式而存在？</strong>如果ai可以将自己打扮成纯欲的、禁欲的、呆萌的、奶狗的或者狼狗的以便于使它看起来“像是一个人”，那么此处的人类生命不显然就是一个个纯粹的套路和模板，作为机械，也作为捕获他者和权力的规范化工具才能将自身的社会性到场得以展开？</p><p>也许比培养学生机械复读能力更好的是，培养他们提问的能力，学生可以使用chatgpt来书写论文，但他们也需要依托答辩来当面实证自己已经明晰了论文里的知识（实际上在ai代写论文事件曝光之后一些欧美大学就是这样做的），我们以围棋为例子，今天棋手们都在学习ai的下法和定式，可以说阿尔法狗的出现让人类围棋界的水平得到了飞跃性地提升，当然围棋只是一个狭隘的19*19棋盘里的纯重复，但我们依然可以借此看到——<em>同作为某种生产资料被公开的chatgpt一样，思想也是公有而非私有的，我顺着你的思路走一遍，那么你的就是我的，并且我还能从你我思维场域的差异性碰撞之间收获新的灵感和启发的火花，在你之上进行更有创造力的更深刻的思考</em>（反思一旦进入了一个阶段，那它就不可能再退回去，只有面向无垠未知纵深无限的前进和登阶）。</p><p>据此来说，对chatgpt的欢呼实际上意味着人对自身被系统性机械异化部分的无意识反抗，人试图摆脱自身被物化、机械化和纯粹社会功能化的生存维度，而保守主义者则想着将我们再次固定在既成的能指位置和社会权力节点之上，因此它不是人和ai的对立，而是当下科层绩点社会的符号秩序大他者稳定自身运作的欲望的转达，<strong>chatgpt可以取代人类的智识能力，这种论述得以成立的前提恰恰是——必须先将人类规定成一具毫无创造力和想象力的机械僵尸。</strong></p>]]></content>
    
    
    <categories>
      
      <category>分享文章</category>
      
    </categories>
    
    
    <tags>
      
      <tag>后现代主义哲学</tag>
      
      <tag>社会分析</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2023/02/12/hello-world/"/>
    <url>/2023/02/12/hello-world/</url>
    
    <content type="html"><![CDATA[<p>新学期第一天晚上，搭建了一个差不多的blog。感觉还有许多细节需要完善，md语法好像也不是很熟。</p><p>总有一天，我会设计出自己的blog主题！</p><p>Anyway，欢迎来到我的世界！</p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
